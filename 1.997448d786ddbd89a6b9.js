(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{391:function(e,t,n){"use strict";n.r(t);var a,r,o,c,i,s,l,u,m,p,d,f,E,h=n(705),g=n(749),v=n(152),y=n(744),b=n(721),k=n(10),w=n.n(k),C=n(12),I=n.n(C),x=n(13),O=n.n(x),j=n(14),S=n.n(j),N=n(9),T=n.n(N),D=n(15),F=n.n(D),A=n(3),R=n.n(A),W=n(17),B=n.n(W),q=n(32),M=n.n(q),L=n(0),_=n(268),V=n.n(_),H=n(18),z=n.n(H),P=n(20),U=n(141),G=n.n(U),K=n(35),Y=n(731),J=n(737),Z=n(220),Q=n(128),X=n.n(Q),$=n(113),ee=n(38),te=n(736),ne=n(732),ae=n(59),re=n(176),oe=n(24),ce=n.n(oe),ie=n(52),se=n.n(ie),le=n(653),ue=n(652),me=n(733),pe=n(746),de=n(30),fe=n(371),Ee=B()(function(){return{rating:{display:"block",margin:"auto"},paper:{margin:"10px 0",padding:"15px"}}})(a=Object(P.c)(a=function(e){function t(){var e,n;w()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=O()(this,(e=S()(t)).call.apply(e,[this].concat(r))),R()(T()(n),"onChangeCount",function(e){n.props.form.change("count",e)}),R()(T()(n),"onChangeComment",function(e){n.props.form.change("comment",e.target.value)}),n}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.form,a=n.rating,r=n.data;return L.createElement(v.a,{className:t.paper},L.createElement(ae.a,{variant:"subtitle1"},a.name,":"),L.createElement($.D,{value:r.count,onChange:this.onChangeCount}),L.createElement(fe.a,{placeholder:"Комментарий",value:r.comment||"",onChange:this.onChangeComment,fullWidth:!0,margin:"normal"}))}}]),t}(L.Component))||a)||a,he=Object(de.q)("WORKER_RATING_FORM_"),ge=Object(P.c)(r=function(e){function t(){var e,n;w()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=O()(this,(e=S()(t)).call.apply(e,[this].concat(r))),R()(T()(n),"onSubmit",function(){var e=se()(ce.a.mark(function e(t){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.props.form.request();case 3:e.sent&&(n.props.onSuccess(),n.props.onClose());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.form,n=e.request,a=t.data,r=a.fact,o=a.didNotWork;return L.createElement(L.Fragment,null,L.createElement(ue.a,null,L.createElement("form",{id:he,onSubmit:this.onSubmit},L.createElement(ae.a,{variant:"caption"},"Работник"),L.createElement(ae.a,{variant:"body1"},n.user.name),L.createElement(ae.a,{variant:"caption"},"Роль"),L.createElement(ae.a,{variant:"body1"},n.vacancy.role.name),L.createElement(ae.a,{variant:"caption"},"Магазин"),L.createElement(ae.a,{variant:"body1"},n.vacancy.shop.name),L.createElement(ae.a,{variant:"caption"},"Дата"),L.createElement(ae.a,{variant:"body1"},n.vacancy.dateAsText),L.createElement(ae.a,{variant:"caption"},"Фактическое время работы"),!o&&L.createElement($.w,{period:r}),L.createElement(me.a,{control:L.createElement(pe.a,{checked:o,onChange:function(){return t.change("didNotWork",!o)},color:"primary"}),label:"Не работал(-а)"}),t.errors.ratings&&L.createElement(ae.a,{color:"error"},"Необходимо указать комментарий, если оценка меньше 2 звезд"),t.data.ratings&&t.data.ratings.map(function(e){return L.createElement(Ee,{key:e.rating.id,form:e})}))),L.createElement(le.a,null,L.createElement(re.a,{variant:"contained",color:"primary",onClick:this.onSubmit,form:he,disabled:t.sending},"Отправить")))}}]),t}(L.Component))||r,ve=n(1),ye=n(764),be=ee.j.named("DeleteEventItemForm").actions(function(e){return{invokeRequest:function(){return Object(ve.getEnv)(e).api.events.deleteEvent(Object(ve.getParent)(e).id)},parseErrors:function(t){var n=Object(ve.getEnv)(e).api.parseErrors(t,{404:"Уведомление не найдено либо уже удалено",default:"Не удалось удалить уведомление"});return 404===t.response.status?e.afterRequest():Object(ve.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n}}}),ke=ye.a.named("EventItem"),we=Object(ee.sb)({ItemModel:ke,DeleteForm:be}).named("EventsList").actions(function(e){return{receiveEvent:function(t){t.isImportant,e.items.unshift(t)},invokeRequest:function(){return Object(ve.getEnv)(e).api.events.getEvents()},mapResponse:function(t){var n=t.events;e.items=n}}}),Ce=n(21),Ie=n.n(Ce),xe=ee.B.named("RatingItemForm").props({data:ve.types.optional(ve.types.model({comment:ve.types.maybeNull(ve.types.string),count:ve.types.optional(ve.types.number,0)}),{}),rating:ee.S}).views(function(e){return{get preparedToSend(){return{id:e.rating.id,comment:e.data.comment,count:e.data.count}}}}),Oe=ee.B.named("WorkerRatingForm").props({data:ve.types.optional(ve.types.model({id:ve.types.maybeNull(ve.types.number),didNotWork:!1,fact:ve.types.optional(ee.N,{}),ratings:ve.types.array(xe)}),{})}).actions(function(e){return{invokeRequest:function(t){var n=t.ratings,a=t.fact,r=a.begin,o=a.end,c=Ie()(t,["ratings","fact"]);return Object(ve.getEnv)(e).api.ratings.sendRating(M()({},c,{fact:{begin:r,end:o},ratings:n.map(function(e){return e.preparedToSend})}))},parseErrors:function(t){var n=Object(ve.getEnv)(e).api.parseErrors(t);return Object(ve.getEnv)(e).snackBar.show("Не удалось отправить вашу оценку",{variant:"error"}),n},setRatings:function(t){var n=t.map(function(e){return xe.create({rating:e})});e.change("ratings",n)}}}),je=ee.B.named("HolidayConsiderForm").props({data:ve.types.optional(ve.types.model({id:ve.types.maybeNull(ve.types.number),status:ve.types.optional(ve.types.number,ee.C),dateRange:ve.types.optional(ee.h,{})}),{})}).actions(function(e){return{invokeRequest:function(t){var n=t.dateRange,a=Ie()(t,["dateRange"]);return Object(ve.getEnv)(e).api.holidays.changeHoliday(M()({},a,{beginAt:n.begin,endAt:n.end}))}}}),Se=Object(K.c)(Oe,{name:"form"})(o=Object(K.a)("ratings")(o=Object(P.c)(o=function(e){function t(){var e,n;w()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=O()(this,(e=S()(t)).call.apply(e,[this].concat(r))),R()(T()(n),"setMainRatings",se()(ce.a.mark(function e(){var t,a,r,o,c,i,s,l;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.form,r=t.request,o=r.id,c=r.vacancy.plan,i=c.begin,s=c.end,a.setData({id:o,fact:{begin:i,end:s}}),e.next=4,n.props.ratings.getItems();case 4:(l=e.sent)&&n.props.form.setRatings(l);case 6:case"end":return e.stop()}},e)}))),n}return F()(t,e),I()(t,[{key:"componentDidMount",value:function(){this.setMainRatings()}},{key:"render",value:function(){var e=this.props,t=e.form,n=e.request,a=e.onSuccess,r=e.ratings;return L.createElement($.i,{title:"Оценить коллегу",loading:t.sending&&r.loading,content:function(e){var r=e.onClose;return L.createElement(ge,{form:t,request:n,onSuccess:a,onClose:r})}},function(e){var t=e.show;return L.createElement(re.a,{size:"small",color:"primary",onClick:t},"Оценить")})}}]),t}(L.Component))||o)||o)||o,Ne=function(e){function t(){return w()(this,t),O()(this,S()(t).apply(this,arguments))}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.entity,n=e.onDelete,a=t.user,r=t.vacancy;return L.createElement(L.Fragment,null,L.createElement(ne.a,null,L.createElement(ae.a,null,a.surname," ",a.name),L.createElement(ae.a,null,r.role.name,", ",r.shop.name),L.createElement(ae.a,null,r.dateAsText)),L.createElement(te.a,null,L.createElement(Se,{request:t,onSuccess:n})))}}]),t}(L.Component),Te=function(e){function t(){return w()(this,t),O()(this,S()(t).apply(this,arguments))}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.entity,a=e.time,r=void 0===a?null:a,o=n.role,c=n.shop,i=n.dateAsText,s=n.plan,l=n.workerFullName;return L.createElement(ne.a,null,l&&L.createElement(ae.a,null,l),L.createElement(ae.a,null,o.name),L.createElement(ae.a,null,c.address),L.createElement(ae.a,null,i," ",r||s.asText),t)}}]),t}(L.Component),De=n(757),Fe=n(745),Ae=Object(K.c)(je,{name:"form"})(c=Object(P.c)(c=function(e){function t(){var e,n;w()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=O()(this,(e=S()(t)).call.apply(e,[this].concat(r))),R()(T()(n),"onSubmit",se()(ce.a.mark(function e(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.form.request();case 2:e.sent&&n.props.onSuccess();case 4:case"end":return e.stop()}},e)}))),n}return F()(t,e),I()(t,[{key:"componentDidMount",value:function(){var e=this.props.holiday,t=e.id,n=e.beginAt,a=e.endAt;this.props.form.setData({id:t,dateRange:{begin:n,end:a}})}},{key:"render",value:function(){var e=this.props,t=e.holiday,n=e.form;return L.createElement(L.Fragment,null,L.createElement(ue.a,null,L.createElement($.s,{loading:n.sending},L.createElement(ae.a,{variant:"caption"},"Сотрудник"),L.createElement(ae.a,{variant:"body1"},t.user.fullName),L.createElement(ae.a,{variant:"caption"},"Тип выходного"),L.createElement(ae.a,{variant:"body1"},t.typeAsText),L.createElement(ae.a,{variant:"caption"},"Фотографии"),L.createElement(ae.a,{variant:"body1"},"Нет"),L.createElement(ae.a,{variant:"caption"},"Период"),L.createElement($.g,{dateRange:n.data.dateRange,minDate:new Date}),L.createElement(ae.a,{variant:"caption"},"Статус"),L.createElement(De.a,{value:"".concat(n.data.status),onChange:function(e){return n.change("status",parseInt(e.target.value,10))}},t.statusesForChange.map(function(e){return L.createElement(me.a,{key:e,value:"".concat(e),control:L.createElement(Fe.a,null),label:ee.yb[e]})})))),L.createElement(le.a,null,L.createElement(re.a,{disabled:n.sending,variant:"contained",color:"primary",onClick:this.onSubmit},"Сохранить")))}}]),t}(L.Component))||c)||c,Re=function(e){var t=e.entity,n=e.onDelete,a=e.isDirector;return L.createElement(L.Fragment,null,L.createElement(ne.a,null,L.createElement(ae.a,null,t.user.fullName),L.createElement(ae.a,{color:"textSecondary"},"Статус: ",t.statusAsText),L.createElement(ae.a,{color:"textSecondary"},"Тип: ",t.typeAsText),L.createElement(ae.a,null,t.periodAsText),L.createElement(ae.a,null,t.text)),!!a&&t.status==ee.D&&L.createElement(te.a,null,L.createElement(L.Fragment,null,L.createElement($.i,{title:"Рассмотреть заявку на выходной",content:function(e){var a=e.onClose;return L.createElement(Ae,{holiday:t,onSuccess:function(){a(),n()}})}},function(e){var t=e.show;return L.createElement(re.a,{size:"small",color:"primary",onClick:t},"Рассмотреть")}))))},We=function(e){function t(){return w()(this,t),O()(this,S()(t).apply(this,arguments))}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this.props.entity,t=e.reason,n=e.vacancy;return L.createElement(Te,{entity:n},L.createElement(ae.a,null,t))}}]),t}(L.Component),Be=function(e){function t(){return w()(this,t),O()(this,S()(t).apply(this,arguments))}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this.props.entity;return L.createElement(Te,{entity:e,time:e.fact.asText},L.createElement(ae.a,null,e.sumAsText))}}]),t}(L.Component),qe=function(e){function t(){return w()(this,t),O()(this,S()(t).apply(this,arguments))}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this.props.entity.name;return L.createElement(ne.a,null,L.createElement(ae.a,null,e))}}]),t}(L.Component),Me=n(766),Le=Object(K.c)(Me.b,{name:"respondForm"})(i=Object(P.c)(i=function(e){function t(){var e,n;w()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=O()(this,(e=S()(t)).call.apply(e,[this].concat(r))),R()(T()(n),"onRespond",se()(ce.a.mark(function e(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.respondForm.request();case 2:e.sent&&n.props.onDelete();case 4:case"end":return e.stop()}},e)}))),n}return F()(t,e),I()(t,[{key:"componentDidMount",value:function(){this.props.respondForm.change("vacancyId",this.props.entity.id)}},{key:"render",value:function(){var e=this.props,t=e.entity,n=e.respondForm;return L.createElement(L.Fragment,null,L.createElement(Te,{entity:t}),L.createElement(te.a,null,L.createElement($.s,{loading:n.sending},L.createElement(re.a,{size:"small",color:"primary",onClick:this.onRespond},"Откликнуться"))))}}]),t}(L.Component))||i)||i,_e=n(769),Ve=Object(P.c)(s=function(e){function t(){return w()(this,t),O()(this,S()(t).apply(this,arguments))}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.entity,n=e.onDelete;return L.createElement(L.Fragment,null,L.createElement(Te,{entity:t}),L.createElement(te.a,null,L.createElement(L.Fragment,null,L.createElement($.i,{title:"Подтвердить время работы",content:function(e){var a=e.onClose;return L.createElement(_e.g,{vacancy:t,onSuccess:function(){a(),n()}})}},function(e){var t=e.show;return L.createElement(re.a,{size:"small",color:"primary",onClick:t},"Подтвердить")}))))}}]),t}(L.Component))||s,He=n(767),ze=Object(P.c)(l=function(e){function t(){return w()(this,t),O()(this,S()(t).apply(this,arguments))}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.entity,n=e.onDelete;return t.typeHMS?L.createElement(te.a,null,L.createElement($.s,null,L.createElement(ne.a,null,L.createElement(ae.a,null,t.name),L.createElement(ae.a,null)),L.createElement(re.a,{variant:"contained",color:"primary",href:t.description,onClick:t.accept,target:"_blank"},"Открыть обучение"),L.createElement(He.b,{training:t,onConfirm:n,openLabel:"Завершить обучение",content:L.createElement(ae.a,null,'Вы действительно прошли обучение "'.concat(t.name,'"?'))}))):L.createElement(te.a,null,L.createElement($.s,null,L.createElement(ne.a,null,L.createElement(ae.a,null,t.name),L.createElement(ae.a,null,t.address),L.createElement(ae.a,null,t.description),L.createElement(ae.a,null,t.dateAsText)),L.createElement(He.a,{training:t,onAccept:n,openLabel:"Принять участие",content:L.createElement(ae.a,null,'Вы действительно хотите посетить обучение "'.concat(t.name,'"?'))})))}}]),t}(L.Component))||l,Pe=n(348),Ue=Object(Pe.a)(u=function(e){function t(){return w()(this,t),O()(this,S()(t).apply(this,arguments))}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this;return L.createElement(ne.a,null,L.createElement(ae.a,null,"Для завершения испытательного срока, необходимо пройти тестирование"),L.createElement(re.a,{size:"small",color:"primary",onClick:function(){return e.props.history.push("/exams")}},"Открыть тестирование"))}}]),t}(L.Component))||u,Ge=function(e){function t(){return w()(this,t),O()(this,S()(t).apply(this,arguments))}return F()(t,e),I()(t,[{key:"render",value:function(){return L.createElement(ne.a,null,L.createElement(ae.a,null,"Испытательный срок успешно завершен"))}}]),t}(L.Component),Ke=n(256),Ye=function(e){function t(){return w()(this,t),O()(this,S()(t).apply(this,arguments))}return F()(t,e),I()(t,[{key:"render",value:function(){return L.createElement(te.a,null,L.createElement(re.a,{component:Ke.a,to:"personalSales",color:"primary"},"Заполнить продажи"))}}]),t}(L.Component),Je=(m={},R()(m,ee.q,Ne),R()(m,ee.u,Le),R()(m,ee.v,Te),R()(m,ee.x,Te),R()(m,ee.y,Te),R()(m,ee.w,Ve),R()(m,ee.k,Re),R()(m,ee.l,Re),R()(m,ee.n,We),R()(m,ee.m,Be),R()(m,ee.r,qe),R()(m,ee.t,ze),R()(m,ee.p,Ue),R()(m,ee.o,Ge),R()(m,ee.s,Ye),R()(m,"default",function(){return null}),m),Ze=B()(function(e){return{container:{marginBottom:e.spacing(2),marginLeft:e.spacing(.5),marginRight:e.spacing(.5)}}})(p=Object(P.c)(p=function(e){function t(){var e,n;w()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=O()(this,(e=S()(t)).call.apply(e,[this].concat(r))),R()(T()(n),"renderAction",function(){var e=n.props.event,t=e.canDelete,a=e.deleteForm;if(t)return L.createElement(Z.a,{onClick:a.delete},L.createElement(X.a,null))}),n}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.event,n=t.title,a=t.createdAsText,r=t.deleteForm,o=r.sending,c=r.delete,i=t.entity,s=t.type,l=e.classes,u=e.isDirector,m=Je[s]||Je.default;return L.createElement(Y.a,{className:l.container},L.createElement($.s,{loading:o},L.createElement(J.a,{titleTypographyProps:{variant:"subtitle1"},title:n,subheader:a,action:this.renderAction()}),L.createElement(m,{entity:i,isDirector:u,onDelete:c})))}}]),t}(L.Component))||p)||p,Qe=n(680),Xe=n.n(Qe),$e=B()(function(e){var t,n;return{container:(t={padding:e.spacing(2),marginTop:40,display:"flex",height:"100%",flexDirection:"column",position:"relative"},R()(t,e.breakpoints.down("md"),{marginTop:0}),R()(t,e.breakpoints.up("lg"),{height:"calc(100% - 40px)"}),t),header:(n={padding:e.spacing(1),marginTop:-40,color:"white",marginBottom:e.spacing(1),backgroundColor:e.palette.primary.main,alignItems:"center"},R()(n,e.breakpoints.down("sm"),{flexWrap:"wrap"}),R()(n,"zIndex",11),n),tabsRoot:{maxWidth:"100%"},tabRoot:{color:"white",borderRadius:2*e.shape.borderRadius,transition:"0.2s background-color 0.1s",minWidth:30},tabSelected:{backgroundColor:"rgba(255, 255, 255, 0.2)"},tabsIndicator:{backgroundColor:"transparent"},tabWrapper:{display:"block"},scroll:{maxHeight:"100%",overflow:"auto"},refreshButton:{marginBottom:e.spacing(2)}}})(d=Object(P.c)(d=function(e){function t(){return w()(this,t),O()(this,S()(t).apply(this,arguments))}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.children,a=e.onRefresh,r=e.loading;return L.createElement(v.a,{className:t.container},L.createElement(g.a,{mdDown:!0},L.createElement(v.a,{className:t.header},L.createElement(h.a,{container:!0,justify:"space-between",alignItems:"center"},L.createElement(h.a,{item:!0},L.createElement(ae.a,{variant:"subtitle1",color:"inherit"},"Уведомления")),L.createElement(h.a,{item:!0},L.createElement(Z.a,{disabled:r,color:"inherit",onClick:a},L.createElement(Xe.a,null)))))),L.createElement(g.a,{lgUp:!0},L.createElement(re.a,{disabled:r,fullWidth:!0,onClick:a,size:"small",className:t.refreshButton},"Обновить")),L.createElement($.s,{noWrap:!0,loading:r},L.createElement($.k,{variant:"flexGrow",visible:!n.length&&!r},L.createElement("div",{className:t.scroll}," ",n))))}}]),t}(L.Component))||d)||d,et=n(91),tt=Object(K.c)(we,{name:"events"})(f=Object(P.b)("store")(f=Object(P.c)(f=function(e){function t(){var e,n;w()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=O()(this,(e=S()(t)).call.apply(e,[this].concat(r))),R()(T()(n),"handleEvent",function(e){n.props.events.receiveEvent(G.a.camelizeKeys(JSON.parse(e.data.model)))}),n}return F()(t,e),I()(t,[{key:"componentDidMount",value:function(){this.props.events.getItems(),this.subscribes=[et.b.subscribe(et.a.EVENT_EVENT,this.handleEvent)]}},{key:"componentWillUnmount",value:function(){this.subscribes.forEach(function(e){return e()})}},{key:"render",value:function(){var e=this.props,t=e.events,n=t.loading,a=t.items,r=t.getItems,o=e.store.app.user.isDirector;return L.createElement($e,{loading:n,onRefresh:r},a.map(function(e){return L.createElement(Ze,z()({key:e.id},{isDirector:o,event:e}))}))}}]),t}(L.Component))||f)||f)||f,nt=n(771),at=function(e){return{container:M()({marginLeft:0,width:"100%"},e.getAbsoluteBodyHeight(e)),vacancyGrid:{height:"100%"},slideClass:{height:"100%"}}},rt=B()(at)(E=function(e){function t(){var e,n;w()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=O()(this,(e=S()(t)).call.apply(e,[this].concat(r))),R()(T()(n),"state",{tab:0}),R()(T()(n),"handleChange",function(e,t){n.setState({tab:t})}),R()(T()(n),"handleChangeIndex",function(e){n.setState({tab:e})}),n}return F()(t,e),I()(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.tab;return L.createElement(L.Fragment,null,L.createElement(g.a,{lgUp:!0},L.createElement("div",{className:e.container},L.createElement(v.a,null,L.createElement(y.a,{value:t,variant:"fullWidth",onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},L.createElement(b.a,{label:"Уведомления"}),L.createElement(b.a,{label:"Работа сегодня"}))),L.createElement(V.a,{index:t,style:{height:"calc(100% - 48px)"},containerStyle:{height:"100%"},onChangeIndex:this.handleChangeIndex,slideClassName:e.slideClass},L.createElement(tt,null),L.createElement(nt.a,null)))),L.createElement(g.a,{mdDown:!0},L.createElement(h.a,{container:!0,className:e.container,style:at.grid,direction:"row-reverse",spacing:2},L.createElement(h.a,{item:!0,xs:12,sm:12,md:6},L.createElement(nt.a,null)),L.createElement(h.a,{item:!0,xs:12,sm:12,md:6,className:e.vacancyGrid},L.createElement(tt,null)))))}}]),t}(L.Component))||E;t.default=rt},764:function(e,t,n){"use strict";var a=n(1),r=n(38),o=r.L.named("TrainingAcceptForm").props({id:a.types.maybeNull(a.types.number)}).actions(function(e){var t=e.afterRequest;return{reset:function(){e.setData({id:e.id}),e.sending=!1},invokeRequest:function(){return Object(a.getEnv)(e).api.trainings.acceptTraining(e.id)},parseErrors:function(t){var n=Object(a.getEnv)(e).api.parseErrors(t,{409.1:"Вы работаете в этот день",409.2:"Вы уже записались на это обучение",404:"Тест не найден",default:"Не удалось записаться на обучение"});return Object(a.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},afterRequest:function(n){Object(a.getParent)(e).typeHMS||Object(a.getEnv)(e).snackBar.show("Вы подтвердили желание принять участие в обучении.",{variant:"success"}),t(n)}}}),c=r.L.named("TrainingConfirmForm").props({id:a.types.maybeNull(a.types.number)}).actions(function(e){var t=e.afterRequest;return{reset:function(){e.setData({id:e.id}),e.sending=!1},afterRequest:function(n){!e.typeHMS&&Object(a.getEnv)(e).snackBar.show("Вы подтвердили прохождение обучения.",{variant:"success"}),t(n)},invokeRequest:function(){return Object(a.getEnv)(e).api.trainings.confirmTraining(e.id)},parseErrors:function(t){var n=Object(a.getEnv)(e).api.parseErrors(t,{default:"Не удалось подтвердить обучение"});return Object(a.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n}}}),i=Object(r.rb)({ItemModel:r.db}).props({confirmForm:a.types.optional(c,{}),acceptForm:a.types.optional(o,{})}).actions(function(e){var t=e.afterItemUpdate;return{afterItemUpdate:function(n){t(n),e.confirmForm.setData(n),e.acceptForm.setData(n)},accept:function(){var t;return(t=e.acceptForm).request.apply(t,arguments)},confirm:function(){var t;return(t=e.confirmForm).request.apply(t,arguments)}}}),s=n(3),l=n.n(s),u=n(32),m=n.n(u)()({},r.qb,l()({},r.t,i)),p=Object(r.xb)({eventEntityModelByType:m}),d=r.z.props({entity:a.types.union({dispatcher:p})}).named("MainEvent");n.d(t,"b",function(){return i}),n.d(t,"a",function(){return d})},766:function(e,t,n){"use strict";var a=n(1),r=n(38),o=r.B.named("RespondForm").props({data:a.types.optional(a.types.model({vacancyId:a.types.maybeNull(a.types.number)}),{})}).actions(function(e){return{invokeRequest:function(t){return Object(a.getEnv)(e).api.vacancies.respond(t.vacancyId)},reset:function(){e.sending=!1},parseErrors:function(t){var n=Object(a.getEnv)(e).api.parseErrors(t,c);return Object(a.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},afterRequest:function(){Object(a.getEnv)(e).snackBar.show("Вы успешно откликнулись на вакансию",{variant:"success"})}}}),c={default:"Не удалось откликнуться на вакансию",404:"Вакансия не найдена",406.1:"Вакансия уже неактуальна",406.2:"У вас недостаточно компетенции для этой вакансии",409.1:"Вы уже работаете в этот день",409.2:"У вас обучение в этот день",409.3:"У вас выходной в этот день",423:"Вакансия зарезервирована для работников ВПРОКа"},i=r.kb.named("VacancyItem").props({respondForm:a.types.optional(o,function(){return o.create()})}).actions(function(e){return{afterCreate:function(){e.respondForm.change("vacancyId",e.id)}}}),s=Object(r.ub)(i).named("VacanciesList").props({date:a.types.maybeNull(a.types.number),shopId:a.types.maybeNull(a.types.number)}).actions(function(e){return{invokeRequest:function(){return Object(a.getEnv)(e).api.vacancies.getVacanciesByShop(e.shopId,e.date)},setDate:function(t){e.date=t},setShopId:function(t){e.shopId=t,e.getItems()},setDateAndShopId:function(t,n){e.setDate(t),e.setShopId(n)}}}),l=Object(r.ub)(r.Z).named("ShopsList").props({date:a.types.maybeNull(a.types.number)}).actions(function(e){return{invokeRequest:function(){return Object(a.getEnv)(e).api.vacancies.getShops(e.date,{})},setDate:function(t){e.date=t}}}),u=n(24),m=n.n(u),p=a.types.model({loading:!1,errors:a.types.maybeNull(a.types.frozen()),vacancy:a.types.maybeNull(r.kb)}).views(function(e){return{get titleText(){if(!e.vacancy)return"На сегодня у вас работы нет";switch(e.vacancy.status){case r.kb.VACANCY_STATUS_PROCESS:return"Наступило время вашей работы.";case r.kb.VACANCY_STATUS_COMPLETED:return"На сегодня ваша работа закончена.";case r.kb.VACANCY_STATUS_NO_APPEARANCE:return"Вы не явились на работу.";default:return"Сегодня вы назначены на вакансию."}}}}).actions(function(e){return{getCurrent:Object(a.flow)(m.a.mark(function t(){var n,r,o;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,e.errors=null,t.prev=2,t.next=5,Object(a.getEnv)(e).api.vacancies.getCurrent();case 5:n=t.sent,r=n.vacancy,e.vacancy=r,e.loading=!1,t.next=16;break;case 11:t.prev=11,t.t0=t.catch(2),o=Object(a.getEnv)(e).api.parseErrors(t.t0,{default:"Не удалось загрузить текущую вакансию"}),e.loading=!1,e.errors=o;case 16:case"end":return t.stop()}},t,null,[[2,11]])}))}});n.d(t,"d",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return p})},767:function(e,t,n){"use strict";var a,r=n(749),o=n(10),c=n.n(o),i=n(12),s=n.n(i),l=n(13),u=n.n(l),m=n(14),p=n.n(m),d=n(9),f=n.n(d),E=n(15),h=n.n(E),g=n(3),v=n.n(g),y=n(0),b=n(20),k=n(113),w=n(35),C=n(724),I=n(726),x=n(725),O=n(723),j=n(722),S=n(59),N=n(176),T=n(18),D=n.n(T),F=n(24),A=n.n(F),R=n(52),W=n.n(R),B=n(21),q=n.n(B),M=Object(b.c)(function(e){var t=e.training,n=t.acceptForm.sending,a=t.accept,r=e.onAccept,o=void 0===r?function(){}:r,c=e.children,i=q()(e,["training","onAccept","children"]);return y.createElement(k.f,D()({title:"Принять участие",dialogProps:{loading:n},onConfirm:W()(A.a.mark(function e(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:if(!e.sent){e.next=6;break}return o(),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e)})),content:y.createElement(S.a,null,"Вы действительно хотите посетить это обучение?")},i),c&&c)}),L=Object(b.c)(function(e){var t=e.training,n=t.confirmForm.sending,a=t.confirm,r=e.onConfirm,o=void 0===r?function(){}:r,c=e.children,i=q()(e,["training","onConfirm","children"]);return y.createElement(k.f,D()({title:"Завершить обучение",openLabel:"Прошел обучение",dialogProps:{loading:n},onConfirm:W()(A.a.mark(function e(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:if(!e.sent){e.next=6;break}return o(),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e)})),content:y.createElement(S.a,null,"Вы действительно прошли это обучение?")},i),c&&c)}),_=Object(b.c)(function(e){var t=e.training;return y.createElement(O.a,null,y.createElement(j.a,null,t.id),y.createElement(j.a,null,t.name),y.createElement(j.a,null,t.typeHMS?y.createElement(N.a,{variant:"text",color:"primary",onClick:t.accept,href:t.description,target:"_blank"},"Открыть обучение"):t.description),y.createElement(j.a,null,!t.typeHMS&&t.dateAsText),y.createElement(j.a,null,!t.typeHMS&&t.address),y.createElement(j.a,null,t.userTraining&&t.userTraining.statusPassed?y.createElement(S.a,{color:"textSecondary"},"Обучение пройдено"):t.typeHMS?y.createElement(L,{training:t,openLabel:"Завершить обучение",content:y.createElement(S.a,null,'Вы действительно прошли обучение "',t.name,'"?')}):t.userTraining&&t.userTraining.statusWaiting?y.createElement(S.a,{color:"textSecondary"},"Вы записаны на обучение"):y.createElement(M,{training:t,title:"Подтверждение",openLabel:"Принять участие",content:y.createElement(S.a,null,'Вы действительно хотите посетить обучение "',t.name,'"?')})))}),V=function(e){var t=e.trainings,n=e.onAccept;return y.createElement(C.a,null,y.createElement(x.a,null,y.createElement(O.a,null,y.createElement(j.a,null,"id"),y.createElement(j.a,null,"Название"),y.createElement(j.a,null,"Описание"),y.createElement(j.a,null,"Дата"),y.createElement(j.a,null,"Адрес"),y.createElement(j.a,null,"Статус"))),y.createElement(I.a,null,t.map(function(e){return y.createElement(_,{key:e.id,training:e,onAccept:n})})))},H=n(705),z=n(731),P=n(735),U=n(732),G=n(17),K=n.n(G),Y=n(30),J=Object(Y.c)(K()(function(e){return{container:{marginBottom:e.spacing(2),marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},subtitle:{whiteSpace:"nowrap"}}}),b.c)(function(e){var t=e.training,n=e.classes;return y.createElement(z.a,{className:n.container},y.createElement(P.a,null,y.createElement(U.a,null,y.createElement(S.a,{variant:"h6",color:"textPrimary"},t.name),y.createElement(S.a,{variant:"body1",color:"textSecondary",className:n.subtitle},!t.typeHMS&&t.description),y.createElement(S.a,null,!t.typeHMS&&"Дата: ".concat(t.dateAsText)),y.createElement(S.a,null,!t.typeHMS&&"Адрес: ".concat(t.address)),y.createElement(H.a,{container:!0},y.createElement(H.a,{item:!0},t.typeHMS&&y.createElement(N.a,{variant:"contained",color:"primary",onClick:function(e){t.accept(),e.stopPropagation()},href:t.description,target:"_blank"},"Открыть обучение")),y.createElement(H.a,{item:!0},t.userTraining&&t.userTraining.statusPassed?y.createElement(S.a,{color:"textSecondary"},y.createElement("span",null,"Обучение пройдено")):t.typeHMS?y.createElement(L,{training:t,openLabel:"Завершить обучение",content:y.createElement(S.a,null,'Вы действительно прошли обучение "'.concat(t.name,'"?'))}):t.userTraining&&t.userTraining.statusWaiting?y.createElement(S.a,{color:"textSecondary"},"Вы записаны на обучение"):y.createElement(M,{training:t,openLabel:"Принять участие",content:y.createElement(S.a,null,'Вы действительно хотите посетить обучение "'.concat(t.name,'"?'))}))))))}),Z=function(e){var t=e.trainings,n=e.onAccept;return y.createElement(H.a,{container:!0},t.map(function(e){return y.createElement(H.a,{item:!0,key:e.id,xs:12,lg:4,md:6,sm:12},y.createElement(J,{training:e,onAccept:n}))}))},Q=n(1),X=n(38),$=n(764),ee=Object(X.ub)($.b).named("Trainings").actions(function(e){return{invokeRequest:function(){return Object(Q.getEnv)(e).api.trainings.getTrainings()}}}),te=Object(w.c)(ee,{name:"trainings"})(a=Object(b.c)(a=function(e){function t(){var e,n;c()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r))),v()(f()(n),"onAccept",function(){n.props.trainings.getItems()}),n}return h()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.props.trainings.getItems()}},{key:"render",value:function(){var e=this.props.trainings,t=e.items,n=e.loading,a={trainings:t,onAccept:this.onAccept};return y.createElement(k.s,{noWrap:!0,variant:"fixed",loading:n},y.createElement(k.k,{variant:"absolute",visible:t.length<1&&!n},y.createElement(r.a,{smDown:!0},y.createElement(V,a)),y.createElement(r.a,{mdUp:!0},y.createElement(Z,a))))}}]),t}(y.Component))||a)||a;n.d(t,"c",function(){return te}),n.d(t,"a",function(){return M}),n.d(t,"b",function(){return L})},769:function(e,t,n){"use strict";var a,r,o,c,i,s,l,u,m,p,d,f,E,h,g,v,y,b,k,w,C,I,x,O,j,S,N,T,D,F,A,R,W,B,q,M,L,_,V,H=n(749),z=n(10),P=n.n(z),U=n(12),G=n.n(U),K=n(13),Y=n.n(K),J=n(14),Z=n.n(J),Q=n(15),X=n.n(Q),$=n(0),ee=n.n($),te=n(20),ne=n(35),ae=n(1),re=n(38),oe=re.K.named("HireForm").props({vacancyId:ae.types.maybeNull(ae.types.number),workerId:ae.types.maybeNull(ae.types.number)}).views(function(e){return{get getData(){return e.data}}}).actions(function(e){return{reset:function(){e.setData({vacancyId:e.vacancyId}),e.sending=!1},invokeRequest:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.workerId,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.vacancyId;return Object(ae.getEnv)(e).api.director.hireWorker({vacancyId:a,workerId:n})},parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t,{default:"Не удалось назначить работника",406:"У работника нет подходящей роли",404:"Вакансия уже в работе",423:"Вакансия зарезервирована",409.1:"Работник уже назначен на вакансию в этот день",409.2:"Работник обучается в этот день",409.3:"Работник отдыхает в этот день"});return Object(ae.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},afterRequest:function(){Object(ae.getEnv)(e).snackBar.show("Работник назначен",{variant:"success"})}}}),ce=n(32),ie=n.n(ce),se=n(21),le=n.n(se),ue=n(19),me=n.n(ue),pe=re.B.named("DismissForm").props({vacancyId:0}).actions(function(e){return{invokeRequest:function(){return Object(ae.getEnv)(e).api.director.dismissWorker(e.vacancyId)},parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t,{403:"Вы не можете снимать работников с вакансии в этом магазине",404:"Вакансия не найдена",406.1:"Вакансия уже подтверждена",406.2:"На эту вакансию не назначен сотрудник",default:"Не удалось снять работника с вакансии"});return Object(ae.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},afterRequest:function(){Object(ae.getEnv)(e).snackBar.show("Работник снят с вакансии",{variant:"success"})}}}),de=n(30),fe=re.W.props({spots:ae.types.optional(ae.types.array(re.bb),[])}),Ee=Object(re.ub)(fe).named("RolesList").props({shopId:ae.types.maybeNull(ae.types.number)}).actions(function(e){return{invokeRequest:function(){return Object(ae.getEnv)(e).api.director.getRolesWithSpots(e.shopId)},getRole:function(t){return e.items.find(function(e){return e.id===t})}}}),he=re.f.named("VacancyCreateForm").props({data:ae.types.optional(ae.types.model("Data",{shopId:ae.types.maybeNull(ae.types.number),roleId:ae.types.maybeNull(ae.types.number),spotId:ae.types.maybeNull(ae.types.number),date:ae.types.maybeNull(ae.types.number),time:ae.types.maybeNull(re.N)}),{}),roles:ae.types.maybeNull(Ee)}).views(function(e){return{get getData(){var t=e.data,n=t.time,a=n.begin,r=n.end,o=le()(t,["time"]);return ie()({},o,{time:{begin:a,end:r}})}}}).actions(function(e){return{invokeRequest:function(){return Object(ae.getEnv)(e).api.director.createVacancy(e.getData)},afterCreate:function(){e.data.time=re.N.create(Object(de.f)(e.data.date)),e.roles=Ee.create({shopId:e.data.shopId})},reset:function(){e.sending=!1,e.data.roleId=null,e.data.spotId=null,e.data.time=re.N.create(Object(de.f)(e.data.date))},parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t,{403:"Вы не можете создавать вакансии в этом магазине",default:"Не удалось создать вакансию"});return(n.begin||n.end||n["begin or end"])&&(n.time="Неверно указан период"),n.date&&(n.form="Нельзя создать вакансию на эту дату"),n}}}),ge=re.j.named("VacancyDeleteForm").actions(function(e){return{invokeRequest:function(){return Object(ae.getEnv)(e).api.director.deleteVacancy(Object(ae.getParent)(e).id)},parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t,{403:"Вы не можете удалять вакансии в этом магазине",404:"Вакансия не найдена либо уже удалена",409:"На вакансию уже назначен работник",default:"Не удалось удалить вакансию"});return Object(ae.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n}}}),ve=re.kb.named("VacancyItem").props({dismissWorkerForm:ae.types.optional(pe,function(){return pe.create()})}).views(function(e){return{get canDelete(){return e.status===re.hb||e.status===re.ib||(e.status===re.gb||e.status===re.jb)&&e.isToday},get canHire(){return[re.hb,re.gb,re.ib].includes(e.status)},get canApprove(){return e.status===re.fb&&(!e.isBeginApproved||!e.isEndApproved)||e.status===re.ib},get canDismiss(){return e.status===re.gb&&!e.isToday}}}).actions(function(e){return{dismissWorker:function(){return e.dismissWorkerForm.request()},afterCreate:function(){e.dismissWorkerForm.vacancyId=e.id}}}),ye=Object(re.sb)({ItemModel:ve,CreateForm:he,DeleteForm:ge}).named("DirectorVacanciesList").props({shopId:ae.types.maybeNull(ae.types.number),date:ae.types.maybeNull(ae.types.number)}).views(function(e){return{get dateAsText(){return me.a.unix(e.date).format("dddd, DD MMMM")},get canCreate(){return!me()().isAfter(me.a.unix(e.date+86400))}}}).actions(function(e){var t=e.afterItemDelete;return{invokeRequest:function(){return Object(ae.getEnv)(e).api.director.getShopVacanciesByDate(e.shopId,e.date)},afterItemCreate:function(){e.getItems()},afterItemDelete:function(n){t(n),Object(ae.getEnv)(e).snackBar.show("Вакансия удалена",{variant:"success"})},setDateAndShopId:function(t){var n=t.date,a=t.shopId;e.date=n,e.shopId=a,e.createForm=he.create({data:{shopId:a,date:n}}),e.getItems()}}}),be=ae.types.model("VacancyTemplate",{name:ae.types.maybeNull(ae.types.union(ae.types.string,ae.types.number))}),ke=re.I.named("TemplateCreateForm").props({name:ae.types.maybeNull(ae.types.string),shopId:ae.types.maybeNull(ae.types.number),date:ae.types.maybeNull(ae.types.number)}).actions(function(e){return{reset:function(){e.name="",e.sending=!1},invokeRequest:function(){return Object(ae.getEnv)(e).api.director.saveTemplate(e.data)},parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t,{default:"Не удалось сохранить шаблон"});return Object(ae.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},afterRequest:function(){Object(ae.getEnv)(e).snackBar.show("Шаблон успешно сохранен",{variant:"success"})}}}),we=re.J.named("TemplateDeleteForm").actions(function(e){return{invokeRequest:function(){return Object(ae.getEnv)(e).api.director.deleteTemplate({name:Object(ae.getParent)(e).name,shopId:Object(ae.getParent)(e,3).shopId})}}}),Ce=Object(re.wb)({CreateForm:ke,DeleteForm:we,ItemModel:be}).named("TemplatesList").props({shopId:ae.types.maybeNull(ae.types.number)}).actions(function(e){return{invokeRequest:function(){return Object(ae.getEnv)(e).api.director.getTemplates(e.shopId)},setShopId:function(t){var n=t.shopId,a=t.date;e.shopId=n,e.createForm.setData({shopId:n,date:a}),e.getItems()}}}),Ie=re.K.named("TemplateApplyForm").props({date:ae.types.maybeNull(ae.types.number),shopId:ae.types.maybeNull(ae.types.number),name:ae.types.maybeNull(ae.types.string)}).actions(function(e){return{reset:function(){e.name="",e.sending=!1},invokeRequest:function(t){return Object(ae.getEnv)(e).api.director.loadTemplate(t)},parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t,{403:"У вас нет доступа",409:"На вакансию уже назначены сотрудники в этот день",default:"Не удалось сохранить шаблон"});return Object(ae.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n}}}),xe=re.K.named("VacancyWorkersListFilter").props({query:ae.types.maybeNull(ae.types.string),vacancyId:ae.types.maybeNull(ae.types.number),workerTypes:ae.types.optional(ae.types.array(ae.types.number),[re.lb]),shopId:ae.types.maybeNull(ae.types.number)}).views(function(e){return{get getData(){return ie()({},e.data,{workerTypes:e.workerTypes.join(";")})}}}),Oe=Object(re.tb)(re.mb).named("VacancyWorkersList").props({filter:ae.types.optional(xe,{})}).actions(function(e){return{invokeRequest:function(t,n){return Object(ae.getEnv)(e).api.director.getWorkersForVacancy(ie()({offset:t,limit:n},e.filter.getData))}}}),je=n(3),Se=n.n(je),Ne=n(66),Te=n.n(Ne),De=ae.types.model("DayRole",{total:ae.types.number,exist:ae.types.number,roleId:ae.types.number,role:re.W}),Fe=ae.types.model("CalendarDay",{date:ae.types.number,shopId:ae.types.number,roles:ae.types.optional(ae.types.array(De),[])}).views(function(e){return{get total(){return e.roles.reduce(function(e,t){return e+t.total},0)},get exist(){return e.roles.reduce(function(e,t){return e+t.exist},0)},get isFilled(){return!e.isEmpty&&e.exist===e.total},get isEmpty(){return!e.roles.length}}}),Ae=Object(re.ub)(Fe).named("DirectorVacanciesCalendar").props({shopId:ae.types.maybeNull(ae.types.number),hours:ae.types.maybeNull(ae.types.number),hoursSelected:ae.types.maybeNull(ae.types.number),date:ae.types.optional(ae.types.number,me()().utc().startOf("day").unix()),monthOffset:0}).actions(function(e){return{invokeRequest:function(){return Object(ae.getEnv)(e).api.director.getDaysByShop(e.shopId,e.monthOffset)},fillDays:function(t){var n=t.reduce(function(e,t){var n=t.date,a=le()(t,["date"]);return e[n]?ie()({},e,Se()({},n,[].concat(Te()(e[n]),[a]))):ie()({},e,Se()({},n,[a]))},{}),a=Object.keys(n),r=Object(de.i)(e.monthOffset).filter(function(e){return!a.includes(e)}).map(function(t){return Fe.create({date:t,shopId:e.shopId})});e.items=[].concat(Te()(a.map(function(t){return Fe.create({date:parseInt(t),shopId:e.shopId,roles:n[t]})})),Te()(r))},mapResponse:function(t){var n=t.date,a=t.days,r=t.hours,o=t.hoursSelected;e.fillDays(a),e.date=n,e.hours=r,e.hoursSelected=o},setShopId:function(t){e.shopId=t,e.getItems()},getDays:e.getItems,changeMonthOffset:function(t){e.monthOffset=t,e.getItems()}}}).views(function(e){return{getDayByDate:function(t){return e.items.find(function(e){return e.date===t})}}}),Re=re.B.named("SpotDeleteForm").actions(function(e){return{parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t);return Object(ae.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},afterRequest:function(){Object(ae.getEnv)(e).snackBar.show("Пост удален",{variant:"success"})},invokeRequest:function(){return Object(ae.getEnv)(e).api.director.deleteSpot(Object(ae.getParent)(e,5).shopId,Object(ae.getParent)(e).id)}}}),We=re.B.named("SpotUpdateForm").props({data:ae.types.optional(re.cb,{})}).actions(function(e){return{parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t);return Object(ae.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},invokeRequest:function(){return Object(ae.getEnv)(e).api.director.updateSpot(Object(ae.getParent)(e,5).shopId,Object(ae.getParent)(e).id,{roleId:Object(ae.getParent)(e,3).id,name:e.data.name})},afterRequest:function(){Object(ae.getEnv)(e).snackBar.show("Пост изменен.",{variant:"success"})}}}),Be=re.B.named("SpotCreateForm").props({data:ae.types.optional(re.cb,{})}).actions(function(e){return{parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t);return Object(ae.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},addCategories:function(t){e.data.categories.push(t)},afterRequest:function(){Object(ae.getEnv)(e).snackBar.show("Пост добалвен.",{variant:"success"})},invokeRequest:function(){var t={roleId:Object(ae.getParent)(e).id,name:e.data.name};return Object(ae.getEnv)(e).api.director.createSpot(Object(ae.getParent)(e,3).shopId,t)}}}),qe=re.bb.named("SpotItem").props({updateForm:ae.types.optional(We,{}),deleteForm:ae.types.optional(Re,{})}).actions(function(e){return{afterAttach:function(){e.updateForm.data.name=e.name,e.updateForm.data.categories=e.categories}}}),Me=re.W.props({spots:ae.types.array(qe),spotCreateForm:ae.types.optional(Be,{})}),Le=Object(re.ub)(Me).props({shopId:ae.types.optional(ae.types.number,0),idx:0}).actions(function(e){return{invokeRequest:function(){return Object(ae.getEnv)(e).api.director.getRolesWithSpots(e.shopId)},setShopId:function(t){e.shopId=t},handleRoleChange:function(t){e.idx=t}}}),_e=ae.types.model({allShops:!1,workerTypes:ae.types.optional(ae.types.array(ae.types.number),re.pb)}),Ve=re.B.named("DirectorHolidaysFilter").props({data:ae.types.optional(_e,{})}).views(function(e){return{get workerTypesString(){return e.data.workerTypes.join(";")},get workerTypesNames(){return re.Ab},get workerTypes(){return re.zb}}}).actions(function(e){return{"сhangeWorkerTypes":function(t){e.data.workerTypes.includes(t)?e.data.workerTypes=e.data.workerTypes.filter(function(e){return e!==t}):e.data.workerTypes.push(t)}}}),He=Object(re.ub)(re.F).named("DirectorHolidays").props({shopId:ae.types.maybeNull(ae.types.number),filter:ae.types.optional(Ve,{})}).actions(function(e){return{setShopId:function(t){return e.shopId=t}}}).views(function(e){return{invokeRequest:function(){var t=e.shopId,n=e.filter,a=n.workerTypesString,r=n.data.allShops;return Object(ae.getEnv)(e).api.director.getHolidays({shopId:t,all:r,workerTypes:a})},get holidays(){return e.items}}}),ze=re.B.named("VacancyApproveFormData").props({worker:ae.types.maybeNull(re.mb),data:ae.types.optional(ae.types.model({vacancyId:ae.types.maybeNull(ae.types.number),fact:ae.types.optional(re.N,{})}),{})}),Pe=ze.named("VacancyApproveForm").actions(function(e){return{invokeRequest:function(t){var n=t.vacancyId,a=t.fact,r=a.begin,o=a.end;return Object(ae.getEnv)(e).api.director.approveVacancy({vacancyId:n,begin:r,end:o,workerId:e.worker?e.worker.id:null})},reset:function(){e.sending=!1},parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t,{default:"Не удалось подтвердить вакансию",404:"Вакансия не найдена",406:"Вакансия еще на завершена",409:"Начало еще не подтверждено"});return Object(ae.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},setWorker:function(t){e.worker=t?ie()({},t.toJSON()):null}}}),Ue=n(24),Ge=n.n(Ue),Ke=n(52),Ye=n.n(Ke),Je=re.K.named("VacancyNoAppearanceForm").props({vacancyId:ae.types.maybeNull(ae.types.number)}).actions(function(e){return{reset:function(){e.setData({vacancyId:e.vacancyId}),e.sending=!1},invokeRequest:function(){var t=Ye()(Ge.a.mark(function t(){return Ge.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(ae.getEnv)(e).api.director.vacancyNoAppearance(e.vacancyId));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t,{406.1:"Вакансия еще не начата.",406.2:"Вакансия уже подтверждена.",406.3:"Статус вакансии уже был изменен.",default:"Не удалось подтвердить прогул."});return Object(ae.getEnv)(e).snackBar.show(n.form,"error"),n},afterRequest:function(){Object(ae.getEnv)(e).snackBar.show("Не явка сотрудника подтверждена.",{variant:"success"})}}}),Ze=re.B.named("WorkersFilter").props({data:ae.types.optional(ae.types.model("WorkersFilterData",{shopId:0,workerTypes:ae.types.optional(ae.types.array(ae.types.number),re.pb)}),{})}).views(function(e){return{get workerTypesString(){return e.data.workerTypes.join(";")},get workerTypesNames(){return re.Ab},get workerTypes(){return re.zb}}}).actions(function(e){return{"сhangeWorkerTypes":function(t){e.data.workerTypes.includes(t)?e.data.workerTypes=e.data.workerTypes.filter(function(e){return e!==t}):e.data.workerTypes.push(t)}}}),Qe=ae.types.model("SummaryItem",{daysCount:0,hoursCount:0}),Xe=ae.types.model("Schedules",{vacancies:ae.types.optional(ae.types.array(re.kb),[]),trainings:ae.types.optional(ae.types.array(re.db),[]),holidays:ae.types.optional(ae.types.array(re.F),[])}),$e=re.kb.named("DismissableVacancy").props({dismissForm:ae.types.optional(pe,{})}).actions(function(e){return{afterCreate:function(){e.dismissForm.vacancyId=e.id}}}),et=ae.types.model("WorkerSchedulesDay",{date:ae.types.number,holiday:ae.types.maybeNull(re.F),vacancy:ae.types.maybeNull($e),training:ae.types.maybeNull(re.db)}).views(function(e){return{get isHoliday(){return!!e.holiday},get isTraining(){return!!e.training},get isWork(){return!!e.vacancy},get isEmpty(){return!e.holiday&&!e.training&&!e.vacancy},formatDate:function(){var t;return(t=me.a.unix(e.date)).format.apply(t,arguments)},get dateAsText(){return me.a.unix(e.date).format("dddd, DD MMMM")}}}),tt=ae.types.compose(Object(re.ub)(et),re.c,Xe).named("WorkerSchedules").props({workerId:ae.types.optional(ae.types.union(ae.types.null,ae.types.number,ae.types.string),null),current:ae.types.optional(Qe,{}),previous:ae.types.optional(Qe,{})}).views(function(e){return{getDayByDate:function(t){return e.items.find(function(e){return e.date==t})},get daysList(){return e.items.filter(function(e){return!e.isEmpty})}}}).actions(function(e){var t=function(t){var n=t.vacancies,a=t.trainings,r=t.holidays,o={};e.monthDaysArray.forEach(function(e){return o[e]={date:e}}),n.forEach(function(e){o[e.date].vacancy=e}),a.forEach(function(e){return o[e.date].training=e}),r.forEach(function(e){for(var t in o)me.a.unix(t).isBetween(me.a.unix(Object(de.m)(e.beginAt)-1),me.a.unix(Object(de.g)(e.endAt)))&&(o[t].holiday=e)}),e.items=e.monthDaysArray.map(function(e){return o[e]||{date:e}})};return{getWorkerSchedules:function(t){e.workerId=t,e.getItems()},invokeRequest:function(){return Object(ae.getEnv)(e).api.director.getSchedules({workerId:e.workerId,offset:e.monthOffset})},parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t,{409:"Сотрудник уже занят в этот день",406:"Сотрудник не может быть назначен на эту роль"});return Object(ae.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},getSchedules:function(){e.getItems()},fillDays:t,mapResponse:function(n){for(var a in n)e[a]=n[a];t(n)}}}),nt=ae.types.compose(re.nb,Qe,Xe).named("Worker"),at=Object(re.ub)(nt).props({filter:ae.types.optional(Ze,{})}).actions(function(e){return{invokeRequest:function(){var t=e.filter,n=t.data.shopId,a=t.workerTypesString;return Object(ae.getEnv)(e).api.director.getWorkers({shopId:n,workerTypes:a})},setShopId:function(t){e.filter.change("shopId",t)},getShopWorkers:function(t){e.filter.change("shopId",t),e.getItems()}}}),rt=re.kb.named("ResponsibleVacancy").props({responseForm:ae.types.optional(oe,{})}).actions(function(e){return{afterCreate:function(){e.responseForm.vacancyId=e.id,e.responseForm.workerId=Object(ae.getParent)(e,2).workerId}}}),ot=Object(re.ub)(rt).named("DayVacanciesList").props({shopId:ae.types.maybeNull(ae.types.number),date:ae.types.maybeNull(ae.types.number),workerId:ae.types.maybeNull(ae.types.number)}).actions(function(e){return{getVacancies:function(t){var n=t.shopId,a=t.date,r=t.workerId;e.shopId=n,e.date=a,e.workerId=r,e.getItems()},invokeRequest:function(){var t=e.shopId,n=e.workerId,a=e.date;return Object(ae.getEnv)(e).api.director.getWorkerVacancies({shopId:t,workerId:n,date:a})}}}),ct=re.K.named("HMSFilter").props({query:ae.types.maybeNull(ae.types.string),categoryId:ae.types.maybeNull(ae.types.number),productId:ae.types.maybeNull(ae.types.number),dateRange:ae.types.optional(re.M,{}),statuses:ae.types.optional(ae.types.array(ae.types.union(ae.types.number,ae.types.string)),[re.O.STATUS_SALE_NEW,re.O.STATUS_SALE_CONFLICT])}).actions(function(e){return{onProductChange:function(t){var n=t.categoryId,a=t.productId;e.change("categoryId",n),e.change("productId",a)}}}),it=re.L.named("HMSDeclineForm").props({id:ae.types.maybeNull(ae.types.number)}).actions(function(e){return{invokeRequest:function(){return Object(ae.getEnv)(e).api.director.declineSale(e.id)},reset:function(){(e={id:e.id}).sending=!1},parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t);return Object(ae.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n}}}),st=re.L.named("HMSUpdateForm").props({id:ae.types.maybeNull(ae.types.number),amount:0,status:re.O.STATUS_SALE_NEW,productId:ae.types.maybeNull(ae.types.number),date:ae.types.optional(re.i,{required:!0})}).preProcessSnapshot(function(e){return ie()({},e,{amount:Number(e.amount),status:Number(e.status),productId:e.productId||e.product&&e.product.id||null,date:e.date instanceof Object?e.date:{date:me()(1e3*e.date)}})}).actions(function(e){var t=e.afterRequest;return{reset:function(){e.sending=!1},afterRequest:function(n){t(n),Object(ae.getEnv)(e).snackBar.show("Продажа изменена",{variant:"success"})},parseErrors:function(t){return Object(ae.getEnv)(e).api.parseErrors(t,{default:"Ошибка сохранения продажи"})},invokeRequest:function(){var t=e.data,n=t.id,a=t.amount,r=t.productId,o=t.date;return Object(ae.getEnv)(e).api.director.editHighMarginSale({id:n,amount:a,productId:r,date:o.unix})}}}),lt=re.O.props({declineForm:ae.types.optional(it,{})}).actions(function(e){return{decline:function(){return e.declineForm.request()}}}),ut=Object(re.wb)({ItemModel:lt,UpdateForm:st}).props({filter:ae.types.optional(ct,{})}).actions(function(e){return{invokeRequest:function(t,n){var a=e.filter.data,r=a.dateRange,o=a.statuses,c=le()(a,["dateRange","statuses"]);return Object(ae.getEnv)(e).api.director.getShopSales(ie()({offset:t,limit:n,statuses:o.join(";")},r,c))}}}),mt=Object(re.vb)().named("CheckSales").actions(function(e){var t=e.afterRequest;return{invokeRequest:function(){return Object(ae.getEnv)(e).api.director.checkSales()},afterRequest:function(n){return n?Object(ae.getEnv)(e).snackBar.show("Продажи успешно проверены",{variant:"success"}):Object(ae.getEnv)(e).snackBar.show("Обнаружены конфликты личных продаж",{variant:"info"}),t(n)},parseErrors:function(t){var n=Object(ae.getEnv)(e).api.parseErrors(t);return Object(ae.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n}}}),pt=re.V.views(function(e){return{get canEdit(){return me()().unix(e.date).isSame(me()(),"month")},get dateAsText(){return me.a.unix(e.date).format("MMMM YYYY")}}}),dt=re.L.named("RevisionUpdateForm").props({id:ae.types.maybeNull(ae.types.number),declaredDeficit:ae.types.optional(ae.types.union(ae.types.number,ae.types.string),0)}).actions(function(e){return{reset:function(){e.loading=!1},invokeRequest:function(){return Object(ae.getEnv)(e).api.director.editRevision(e.data)}}}),ft=Object(re.wb)({name:"RevisionList",ItemModel:pt,UpdateForm:dt}).named("RevisionList").actions(function(e){return{invokeRequest:function(){return Object(ae.getEnv)(e).api.director.getRevision()}}}),Et=n(113),ht=n(731),gt=n(732),vt=n(705),yt=n(59),bt=n(17),kt=n.n(bt),wt=Object(de.c)(kt()(function(e){return{container:{marginBottom:e.spacing(2),marginLeft:e.spacing(.5),marginRight:e.spacing(.5),height:"100%"}}}),te.c)(function(e){var t=e.holiday,n=e.classes;return $.createElement(ht.a,{className:n.container},$.createElement(gt.a,null,$.createElement(vt.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-start"},$.createElement(vt.a,{item:!0},$.createElement(yt.a,{variant:"h6",color:"textPrimary"},t.typeAsText)),$.createElement(vt.a,{item:!0},$.createElement(yt.a,{variant:"h6",color:"textSecondary"},t.statusAsText))),$.createElement(yt.a,{variant:"body1",color:"textSecondary"},t.user.fullName),$.createElement(yt.a,null,t.periodAsText),$.createElement(yt.a,{variant:"body1",color:"textSecondary"},t.text)))}),Ct=n(723),It=n(722),xt=function(e){var t=e.holiday;return $.createElement(Ct.a,{key:t.id},$.createElement(It.a,null,t.user.fullName),$.createElement(It.a,{align:"right"},t.typeAsText),$.createElement(It.a,{align:"right"},t.beginAsText),$.createElement(It.a,{align:"right"},t.endAsText),$.createElement(It.a,{align:"right"},t.text))},Ot=n(724),jt=n(726),St=n(725),Nt=function(e){var t=e.holidays;return $.createElement(Ot.a,null,$.createElement(St.a,null,$.createElement(Ct.a,null,$.createElement(It.a,null,"ИМЯ"),$.createElement(It.a,{align:"right"},"ТИП"),$.createElement(It.a,{align:"right"},"НАЧАЛО"),$.createElement(It.a,{align:"right"},"КОНЕЦ"),$.createElement(It.a,{align:"right"},"КОММЕНТАРИЙ"))),$.createElement(jt.a,null,t.map(function(e){return $.createElement(xt,{key:e.id,holiday:e})})))},Tt=kt()(function(){return{grid:{width:"100%",margin:0}}})(function(e){var t=e.holidays,n=e.classes;return $.createElement(vt.a,{container:!0,className:n.grid,spacing:2,justify:"space-around"},t.map(function(e){return $.createElement(vt.a,{item:!0,key:e.id,lg:4,md:6,sm:6,xs:12},$.createElement(wt,{holiday:e}))}))}),Dt=n(704),Ft=n(733),At=n(746),Rt=Object(te.c)(function(e){var t=e.onSave,n=e.filter;return $.createElement(Et.o,{onSave:t,onReset:n.reset},$.createElement(Ft.a,{key:"allShops",control:$.createElement(At.a,{value:"allShops"}),label:"Все магазины",checked:n.data.allShops,onChange:function(){return n.change("allShops",!n.data.allShops)}}),n.workerTypes.map(function(e){return $.createElement(Ft.a,{key:e,control:$.createElement(At.a,{value:"".concat(e)}),label:n.workerTypesNames[e],checked:n.data.workerTypes.includes(e),onChange:function(){return n.сhangeWorkerTypes(e)}})}),$.createElement(Dt.a,{variant:"middle"}))}),Wt=(a=Object(ne.c)(He,{name:"holidays"}),a(r=Object(te.c)(r=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){this.props.holidays.setShopId(this.props.shop.id),this.props.holidays.getItems()}},{key:"render",value:function(){var e=this.props.holidays,t=e.loading,n=e.items,a=e.getItems,r=e.filter;return $.createElement($.Fragment,null,$.createElement(Et.s,{noWrap:!0,loading:t},$.createElement(Et.k,{variant:"flexGrow",visible:n.length<1&&!t},$.createElement(H.a,{smDown:!0},$.createElement(Nt,{holidays:n})),$.createElement(H.a,{mdUp:!0},$.createElement(Tt,{holidays:n}))),$.createElement(Rt,{title:"Фильтры",onSave:a,filter:r})))}}]),t}($.Component))||r)||r),Bt=n(653),qt=n(176),Mt=n(652),Lt=n(734),_t=n(220),Vt=n(9),Ht=n.n(Vt),zt=n(661),Pt=n.n(zt),Ut=n(128),Gt=n.n(Ut),Kt=(o=kt()(function(){return{customContainer:{display:"flex",alignItems:"center","& button":{marginLeft:"5px"}}}}),c=Object(ne.c)(Pe,{name:"form"}),i=Object(ne.c)(Oe,{name:"vacancyWorkers"}),s=Object(ne.c)(Je,{name:"noAppearanceForm"}),o(l=c(l=i(l=s(l=Object(te.c)((u=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"onSubmit",Ye()(Ge.a.mark(function e(){var t,a,r;return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.onSuccess,r=t.form,e.next=3,r.request();case 3:e.sent&&a();case 5:case"end":return e.stop()}},e)}))),Se()(Ht()(n),"onSelectWorker",function(e){n.props.form.setWorker(e)}),Se()(Ht()(n),"onResetWorker",function(){n.props.form.setWorker(null)}),Se()(Ht()(n),"onNoApearence",Ye()(Ge.a.mark(function e(){var t,a,r,o;return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.noAppearanceForm.request,r=t.onSuccess,e.next=3,a();case 3:if(!(o=e.sent)){e.next=7;break}return r(),e.abrupt("return",o);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e)}))),n}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.vacancyWorkers.filter,n=e.form,a=e.noAppearanceForm,r=e.vacancy,o=r.plan,c=r.id,i=r.shop;a.change("vacancyId",c),t.change("vacancyId",c),t.change("shopId",i.id),n.change("vacancyId",c),n.change("fact",{begin:o.begin,end:o.end})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.form,r=t.vacancy,o=t.vacancyWorkers,c=t.noAppearanceForm;return $.createElement($.Fragment,null,$.createElement(Mt.a,null,$.createElement(Et.s,{loading:a.sending},$.createElement(yt.a,{variant:"caption"},"Работник"),$.createElement("div",{className:n.customContainer},$.createElement(yt.a,{variant:"body1"},a.worker?a.worker.fullName:r.workerFullName),$.createElement(Et.i,{title:"Изменить работника",closable:!0,loading:o.loading,content:function(t){var n=t.onClose;return $.createElement(Et.F,{workers:o,onClose:n,onSelectWorker:e.onSelectWorker})}},function(e){var t=e.show;return $.createElement(Lt.a,{title:"Изменить работника",placement:"top"},$.createElement(_t.a,{"aria-label":"edit",fontSize:"small",onClick:t},$.createElement(Pt.a,{fontSize:"small"})))}),a.worker&&$.createElement(Lt.a,{title:"Отменить изменения",placement:"top"},$.createElement(_t.a,{"aria-label":"edit",fontSize:"small",onClick:this.onResetWorker},$.createElement(Gt.a,{fontSize:"small"})))),$.createElement(yt.a,{variant:"caption"},"Роль"),$.createElement(yt.a,{variant:"body1"},r.role.name),$.createElement(yt.a,{variant:"caption"},"Магазин"),$.createElement(yt.a,{variant:"body1"},r.shop.name),$.createElement(yt.a,{variant:"caption"},"Дата"),$.createElement(yt.a,{variant:"body1"},r.dateAsText),$.createElement(yt.a,{variant:"caption"},"Фактическое время работы"),$.createElement(Et.w,{period:a.data.fact}))),$.createElement(Bt.a,null,$.createElement(Et.f,{title:"Вы уверены?",content:"Сотрудник не явился?",loading:c.sending,onConfirm:this.onNoApearence},function(e){var t=e.show;return $.createElement(qt.a,{onClick:t},"Не работал")}),$.createElement(qt.a,{disabled:a.sending,variant:"contained",color:"primary",onClick:this.onSubmit},"Подтвердить")))}}]),t}($.Component),l=u))||l)||l)||l)||l)||l),Yt=kt()(function(){return{row:{"&:hover":{background:"rgba(0,0,0,0.1)"}}}})(function(e){var t=e.worker,n=e.classes,a=e.onClick;return $.createElement(Ct.a,{className:n.row,onClick:a},$.createElement(It.a,null,t.fullName),$.createElement(It.a,{align:"right"},t.workerType.typeAsText),$.createElement(It.a,{align:"right"},t.vacancies.length>0&&"Работает",t.trainings.length>0&&"Обучается",t.holidays.length>0&&"В отпуске",(t.vacancies.length|t.trainings.length|t.holidays.length)<1&&"Свободен"),$.createElement(It.a,{align:"right"},t.daysCount,"д. или ",t.hoursCount,"ч."),$.createElement(It.a,{align:"right"},$.createElement("a",{href:"tel:".concat(t.phone)},"+7",t.phone)))}),Jt=n(36),Zt=n.n(Jt),Qt=kt()(function(e){return{root:{border:"1px solid rgba(128,128,128, 0.2)",backgroundColor:"rgba(255,221,0, 0.5)",height:"100%",padding:e.spacing(1)}}})(function(e){var t=e.classes,n=e.children,a=e.className;return $.createElement(ht.a,{className:Zt()(t.root,a)},n||"День пуст")}),Xt=kt()(function(){return{root:{border:"1px solid rgba(128,128,128, 0.2)",backgroundColor:"rgba(255,221,0, 0.5)"}}})(function(e){var t=e.classes,n=e.day,a=n.holiday,r=n.formatDate;return $.createElement(Qt,{className:t.root},$.createElement(yt.a,{variant:"caption"},"Тип"),$.createElement(yt.a,{variant:"body1"},a.typeAsText),$.createElement(yt.a,{variant:"body1"},r("dddd, DD MMMM")),$.createElement(yt.a,{variant:"caption"},"Период"),$.createElement(yt.a,{variant:"body1"},a.periodAsText))}),$t=kt()(function(){return{root:{border:"1px solid rgba(128,128,128, 0.2)",backgroundColor:"rgba(131,170,236, 0.5)"}}})(function(e){var t=e.classes,n=e.day,a=n.training,r=n.formatDate;return $.createElement(Qt,{className:t.root},$.createElement(yt.a,{variant:"body1"},r("dddd, DD MMMM")),$.createElement(yt.a,{variant:"caption"},"Название"),$.createElement(yt.a,{variant:"body1"},a.name),$.createElement(yt.a,{variant:"caption"},"Описание"),$.createElement(yt.a,{variant:"body1"},a.description),$.createElement(yt.a,{variant:"caption"},"Адрес"),$.createElement(yt.a,{variant:"body1"},a.address),$.createElement(yt.a,{variant:"caption"},"Время"),$.createElement(yt.a,{variant:"body1"},a.time.asText))}),en=n(735),tn=n(18),nn=n.n(tn),an=Object(te.c)(function(e){var t=e.onClose,n=e.workerName,a=e.vacancy,r=a.role,o=a.shop,c=a.spot,i=a.plan,s=a.dismissForm,l=s.request,u=s.sending,m=e.onSuccess,p=function(){var e=Ye()(Ge.a.mark(function e(){return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:e.sent&&m(),t();case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return $.createElement(Et.s,{noWrap:!0,loading:u},$.createElement(Mt.a,null,$.createElement(yt.a,{variant:"body1"},"Вы действительно хотите снять работника ",n,' с вакансии "',r.name,'" ',o.address," ",i.asText),c&&$.createElement($.Fragment,null,$.createElement(yt.a,{variant:"caption"},"Пост"),$.createElement(yt.a,{variant:"body1"},c.name))),$.createElement(Bt.a,null,$.createElement(qt.a,{variant:"outlined",color:"primary",onClick:t},"Назад"),$.createElement(qt.a,{variant:"contained",color:"primary",onClick:p},"Ок")))}),rn=kt()(function(e){return{root:{border:"1px solid rgba(128,128,128, 0.2)",backgroundColor:"rgba(233,190,149, 0.5)"},area:{padding:e.spacing(1),height:"100%"}}})(function(e){var t=e.classes,n=e.day,a=n.vacancy,r=n.dateAsText,o=e.onSuccess;return $.createElement(Et.i,{content:function(e){return $.createElement(an,nn()({},e,{vacancy:a,onSuccess:o}))},title:"Рабочий день",subTitle:r},function(e){var n=e.show;return $.createElement(Et.s,{noWrap:!0,loading:a.responding},$.createElement(Qt,{className:t.root},$.createElement(en.a,{className:t.area,onClick:n},$.createElement(yt.a,{variant:"h6"},"Рабочий день"),$.createElement(yt.a,{variant:"body1"},r),$.createElement(yt.a,{variant:"caption"},"Роль"),$.createElement(yt.a,{variant:"body1"},a.role.name),$.createElement(yt.a,{variant:"caption"},"Магазин"),$.createElement(yt.a,{variant:"body1"},a.shop.address),a.spot&&$.createElement($.Fragment,null,$.createElement(yt.a,{variant:"caption"},"Пост"),$.createElement(yt.a,{variant:"body1"},a.spot.name)),$.createElement(yt.a,{variant:"caption"},"Планируемое время работы"),$.createElement(yt.a,{variant:"body1"},a.plan.asText))))})}),on=function(e){var t=e.day,n=e.workerName,a=e.onSuccess;if(t){if(t.isHoliday)return $.createElement(Xt,{day:t});if(t.isTraining)return $.createElement($t,{day:t});if(t.isWork)return $.createElement(rn,{day:t,workerName:n,onSuccess:a})}return null},cn=kt()(function(e){return{summaryContainer:{position:"sticky",bottom:0,padding:e.spacing(1),backgroundColor:e.palette.secondary.main,color:"white",width:"100%"},grow:{display:"flex",flexGrow:1},overflow:{overflow:"auto"},monthSlider:{zIndex:2},body:{padding:10,width:"100%",margin:0}}})(m=Object(te.c)(m=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.schedules,a=n.daysList,r=n.monthOffset,o=n.changeMonthOffset,c=n.getSchedules,i=e.classes;return $.createElement($.Fragment,null,$.createElement(Et.t,{fullWidth:!0,variant:"sticky",className:i.monthSlider,monthOffset:r,onChangeOffset:o}),$.createElement("div",{className:i.grow},$.createElement(Et.k,{visible:a.length<1,variant:"flexGrow"},$.createElement(vt.a,{container:!0,className:i.body,spacing:2},a.map(function(e){return $.createElement(vt.a,{item:!0,key:e.date,xs:12,sm:6,md:4,lg:3},$.createElement(on,{day:e,workerName:t,onSuccess:c}))})))))}}]),t}($.Component))||m)||m,sn=n(736),ln=Object(ne.c)(ot,{name:"vacancies"})(p=kt()(function(){return{card:{width:"calc(100% - 10px)",margin:5}}})(p=Object(te.c)(p=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"getOnclickHandler",function(e){return Ye()(Ge.a.mark(function t(){return Ge.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.responseForm.request();case 2:t.sent&&n.props.onSuccess();case 4:case"end":return t.stop()}},t)}))}),n}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.workerId,n=e.date,a=e.shopId;this.props.vacancies.getVacancies({workerId:t,date:n,shopId:a})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.vacancies,r=a.items,o=a.loading;return $.createElement(Et.s,{noWrap:!0,loading:o},$.createElement(Et.k,{visible:r.length<1,emptyText:"Нет свободных вакансий",variant:"flexGrow"},r.map(function(t){return $.createElement(Et.s,{key:t.id,loading:t.responseForm.sending},$.createElement(ht.a,{className:n.card},$.createElement(sn.a,{onClick:e.getOnclickHandler(t)},$.createElement(gt.a,null,$.createElement(yt.a,{variant:"subtitle1"},t.role.name),$.createElement(yt.a,{variant:"subtitle2"},t.shop.address),t.spot&&$.createElement(yt.a,{variant:"subtitle2"},t.spot.name),$.createElement(yt.a,{variant:"subtitle2"},t.plan.asText)))))})))}}]),t}($.Component))||p)||p)||p,un=function(e){var t=e.date,n=e.day,a=e.workerName,r=e.workerId,o=e.shopId,c=e.getSchedules;return n?$.createElement(Et.j,{wrapBody:!1,title:"Назначить на вакансию",subTitle:"".concat(a," (").concat(n.dateAsText,")"),body:$.createElement(ln,{workerId:r,shopId:o,date:n.date,onSuccess:c})},function(e){var a=e.show;return $.createElement(Et.z.EmptyDay,{onClick:a,date:t,day:n})}):$.createElement(Et.z.EmptyDay,{date:t})},mn=Object(de.c)(kt()(function(){return{root:{border:"1px solid rgba(128,128,128, 0.2)",backgroundColor:"rgba(233,190,149, 0.5)"}}}),te.c)(function(e){var t=e.classes,n=e.date,a=e.day,r=e.workerName,o=e.getSchedules;return $.createElement(Et.i,{content:function(e){return $.createElement(an,nn()({},e,{vacancy:a.vacancy,workerName:r,onSuccess:o}))},title:"Снять с вакансии",subTitle:n.format("dddd, DD MMMM")},function(e){var r=e.show;return $.createElement(Et.s,{noWrap:!0,loading:a.vacancy.dismissForm.sending},$.createElement(Et.z.WorkDay,{className:t.root,onClick:r,date:n,day:a}))})}),pn=Object(ne.c)(tt,{name:"schedules"})(d=kt()(function(){return{container:{flexGrow:1,overflow:"hidden"},body:{height:"100%",width:"100%",overflow:"auto",display:"flex",flexDirection:"column"}}})(d=Object(te.c)(d=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"state",{list:!1}),Se()(Ht()(n),"changeView",function(){n.setState({list:!n.state.list})}),n}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){this.props.schedules.getWorkerSchedules(this.props.workerId)}},{key:"render",value:function(){var e=this.state.list,t=this.props,n=t.classes,a=t.workerName,r=t.schedules,o=t.shopId,c=t.workerId,i=r.loading,s=r.errors,l=r.getSchedules,u={workerName:a,shopId:o,workerId:c,getSchedules:l};return $.createElement($.Fragment,null,$.createElement("div",{className:n.container},$.createElement("div",{className:n.body},$.createElement(Et.s,{noWrap:!0,loading:i},$.createElement(Et.m,{visible:!1,message:s?s.form:"",onRetry:l},e?$.createElement(cn,{schedules:r}):$.createElement(Et.z,nn()({model:r},{EmptyDayComponent:un,WorkDayComponent:mn},{dayProps:u})),$.createElement(fn,null),$.createElement(hn,{schedules:r}))))),$.createElement(Et.n,{color:"primary",icon:e?"calendar":"list",onClick:this.changeView}))}}]),t}($.Component))||d)||d)||d,dn=Object(te.c)(function(e){var t=e.children,n=e.worker,a=e.shopId;return $.createElement(Et.j,{title:"График работы",subTitle:n.name,wrapBody:!1,body:$.createElement(pn,{shopId:a,workerName:n.name,workerId:n.id})},function(e){var n=e.show;return t({onClick:n})})}),fn=kt()(function(e){return{helpItem:{padding:e.spacing(1)},helpBox:{width:e.spacing(2.5),height:e.spacing(2.5),marginRight:e.spacing(1),border:"1px solid gray"},work:{backgroundColor:"rgba(233,190,149, 0.5)"},free:{backgroundColor:"transparent"},holiday:{backgroundColor:"rgba(255,221,0, 0.5)"},training:{backgroundColor:"rgba(131,170,236, 0.5)"}}})(function(e){var t=e.classes,n=e.className;return $.createElement(vt.a,{container:!0,className:n},$.createElement(vt.a,{item:!0,className:t.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Zt()(t.helpBox,t.work)}),$.createElement(yt.a,null,"- рабочий день"))),$.createElement(vt.a,{item:!0,className:t.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Zt()(t.helpBox,t.holiday)}),$.createElement(yt.a,null,"- выходной"))),$.createElement(vt.a,{item:!0,className:t.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Zt()(t.helpBox,t.training)}),$.createElement(yt.a,null,"- обучение"))),$.createElement(vt.a,{item:!0,className:t.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Zt()(t.helpBox,t.free)}),$.createElement(yt.a,null,"- свободный день"))))}),En=n(152),hn=kt()(function(e){return{summaryContainer:{position:"sticky",bottom:0,padding:e.spacing(1),backgroundColor:e.palette.secondary.main,color:"white",width:"100%"}}})(function(e){var t=e.classes,n=e.schedules,a=n.current,r=n.previous;return $.createElement(En.a,{square:!0,className:t.summaryContainer},$.createElement(yt.a,{color:"inherit",variant:"h6"},"Информация о месяце"),$.createElement(vt.a,{container:!0,direction:"column"},$.createElement(vt.a,{item:!0},!!a&&$.createElement(yt.a,{color:"inherit"},"Отработано в текущем месяце: ".concat(a.daysCount," дн. (").concat(a.hoursCount,"ч.)"))),$.createElement(vt.a,{item:!0},!!r&&$.createElement(yt.a,{color:"inherit"},"Отработано в прошлом месяце: ".concat(r.daysCount," дн. (").concat(r.hoursCount,"ч.)"))),$.createElement(vt.a,{item:!0})))}),gn=Object(de.c)(kt()(function(){return{table:{maxHeight:"100%"},tableBody:{overflow:"auto"}}}),te.c)(function(e){var t=e.classes,n=e.workers,a=e.shopId;return $.createElement(Ot.a,{className:t.table},$.createElement(St.a,null,$.createElement(Ct.a,null,$.createElement(It.a,null,"ИМЯ"),$.createElement(It.a,{align:"right"},"ТИП"),$.createElement(It.a,{align:"right"},"СЕГОДНЯ"),$.createElement(It.a,{align:"right"},"ОТРАБОТАНО"),$.createElement(It.a,{align:"right"},"ТЕЛЕФОН"))),$.createElement(jt.a,{className:t.tableBody},n.map(function(e){return $.createElement(dn,{key:e.id,worker:e,shopId:a},function(t){var n=t.onClick;return $.createElement(Yt,{worker:e,onClick:n})})})))}),vn=Object(de.c)(kt()(function(e){return{container:{marginBottom:e.spacing(2),marginLeft:e.spacing(.5),marginRight:e.spacing(.5),height:"100%"},cardRoot:{position:"relative",height:"100%",marginTop:e.spacing(1)},padding:{padding:e.spacing(1),paddingRight:e.spacing(.1666)}}}),te.c)(function(e){var t=e.worker,n=t.typeAsText,a=t.phone,r=t.fullName,o=e.classes,c=e.onClick;return $.createElement(ht.a,{className:o.cardRoot},$.createElement(en.a,{className:o.padding,onClick:c},$.createElement(vt.a,{container:!0},$.createElement(vt.a,{item:!0,xs:6},$.createElement(yt.a,null,r)),$.createElement(vt.a,{item:!0,xs:6},$.createElement(vt.a,{item:!0},$.createElement(yt.a,null,n)),$.createElement(vt.a,{item:!0},$.createElement(yt.a,null,$.createElement("a",{href:"tel:".concat(a),onClick:function(e){return e.stopPropagation()}},"+7",a)))))))}),yn=Object(te.c)(function(e){var t=e.workers,n=e.shopId;return t.map(function(e){return $.createElement(dn,{key:e.id,worker:e,shopId:n},function(t){var n=t.onClick;return $.createElement(vn,{key:e.id,worker:e,onClick:n})})})}),bn=Object(de.c)(kt()(function(){return{closeButton:{position:"absolute",top:0,right:0},name:{wordBreak:"break-word"}}}),te.c)(function(e){var t=e.workers,n=e.shopId;return $.createElement($.Fragment,null,$.createElement(H.a,{xsDown:!0,implementation:"css"},$.createElement(gn,{workers:t,shopId:n})),$.createElement(H.a,{smUp:!0,implementation:"css"},$.createElement(yn,{workers:t,shopId:n})))}),kn=Object(te.c)(function(e){var t=e.onSave,n=e.filter;return $.createElement(Et.o,{onSave:t,onReset:n.reset},$.createElement(Et.B,{fullWidth:!0,key:"shopId",name:"shopId",value:n.data.shopId,label:"Магазин",onChange:function(e,t){return n.change("shopId",Number(t.key))}}),n.workerTypes.map(function(e){return $.createElement(Ft.a,{key:e,control:$.createElement(At.a,{value:"".concat(e),color:"primary"}),label:n.workerTypesNames[e],checked:n.data.workerTypes.includes(e),onChange:function(){return n.сhangeWorkerTypes(e)}})}),$.createElement(Dt.a,{variant:"middle"}))}),wn=kt()(function(e){return{container:{overflow:"auto",paddingBottom:e.spacing(1)}}})(f=Object(ne.c)(at,{name:"workersList"})(f=Object(te.c)(f=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){this.props.workersList.getShopWorkers(this.props.shop.id)}},{key:"componentWillUnmount",value:function(){this.props.onClose()}},{key:"render",value:function(){var e=this.props,t=e.workersList,n=t.getItems,a=t.loading,r=t.items,o=t.filter,c=e.classes,i=e.shop.id;return $.createElement(Et.s,{noWrap:!0,loading:a},$.createElement(Et.k,{variant:"flexGrow",visible:r.length<1&&!a},$.createElement("div",{className:c.container},$.createElement(bn,{workers:r,shopId:i}))),$.createElement(kn,{onSave:n,filter:o}))}}]),t}($.Component))||f)||f)||f,Cn=Object(de.c)(Object(ne.c)(Ae,{name:"calendar"}),kt()(function(e){return{header:{padding:e.spacing(1)}}}),Object(te.b)("store"),te.c)(function(e){var t=e.store.app.user.shop,n=e.calendar,a=e.classes;return $.createElement($.Fragment,null,$.createElement("div",{className:a.header},$.createElement(yt.a,{variant:"h5"},t.name),$.createElement(yt.a,{variant:"caption"},t.address),$.createElement(Dt.a,null),$.createElement(Et.j,{title:"Посты",subTitle:t.address,wrapBody:!1,body:$.createElement(ea,{shop:t})},function(e){var t=e.show;return $.createElement(qt.a,{variant:"contained",color:"primary",size:"small",onClick:t},"Управление постами")}),$.createElement(Et.j,{title:"Отпуска и больничные",subTitle:t.address,wrapBody:!1,body:$.createElement(Wt,{shop:t})},function(e){var t=e.show;return $.createElement(qt.a,{variant:"contained",color:"primary",size:"small",onClick:t},"Отпуска и больничные")}),$.createElement(Et.j,{title:"Список сотрудников",subTitle:t.address,wrapBody:!1,body:$.createElement(wn,{shop:t,onClose:n.getDays})},function(e){var t=e.show;return $.createElement(qt.a,{variant:"contained",color:"primary",size:"small",onClick:t},"Список работников")}),$.createElement(Et.j,{title:"Отчет ВМТ",subTitle:t.address,wrapBody:!1,body:$.createElement(Hn,{shop:t})},function(e){var t=e.show;return $.createElement(qt.a,{variant:"contained",color:"primary",size:"small",onClick:t},"Отчет ВМТ")}),$.createElement(Et.j,{title:"Недостача",subTitle:t.address,wrapBody:!1,body:$.createElement(_a,{shop:t})},function(e){var t=e.show;return $.createElement(qt.a,{variant:"contained",color:"primary",size:"small",onClick:t},"Недостача")})),$.createElement(Fa,{shopId:t.id,calendar:n}))}),In=n(371),xn=kt()(function(e){return{padding:{paddingTop:e.spacing(2)}}})(E=Object(te.c)(E=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"onSubmit",function(){var e=Ye()(Ge.a.mark(function e(t){var a,r,o;return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.sale,o=a.onClose,t.preventDefault(),e.next=4,r.updateForm.request();case 4:e.sent&&o();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Se()(Ht()(n),"onChange",function(e,t){n.props.sale.updateForm.change("productId",t?t.id:null)}),Se()(Ht()(n),"onChangeNumber",function(e){n.props.sale.updateForm.changeNumber(e.target.name,e.target.value)}),Se()(Ht()(n),"onChangeDate",function(e){n.props.sale.updateForm.change("date",e)}),n}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.sale.updateForm;return $.createElement($.Fragment,null,$.createElement(Mt.a,null,$.createElement("form",{id:"HMS_EDIT_FORM_ID",onSubmit:this.onSubmit},$.createElement(vt.a,{container:!0}),$.createElement(vt.a,{item:!0,className:t.padding},$.createElement(Et.x,{error:n.errors.productId,name:"productId",productId:n.productId,onChange:this.onChange})),$.createElement(vt.a,{item:!0,className:t.padding},$.createElement(In.a,{error:!!n.errors.amount,helperText:n.errors.amount,fullWidth:!0,label:"Количество",variant:"outlined",name:"amount",onChange:this.onChangeNumber,type:"number",value:n.data.amount.toString()})),$.createElement(Et.h,{date:n.date,errors:n.errors,onChange:this.onChange}))),$.createElement(Bt.a,null,$.createElement(qt.a,{type:"submit",variant:"contained",color:"primary",form:"HMS_EDIT_FORM_ID"},"Сохранить")))}}]),t}($.Component))||E)||E,On=Object(te.c)(h=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.sale;return $.createElement(Et.i,{title:"Редактирование продажи",subTitle:n.worker.fullName,loading:n.updateForm.sending,content:function(e){var t=e.onClose;return $.createElement(xn,{sale:n,onClose:t})}},function(e){var n=e.show;return t({onClick:n})})}}]),t}($.Component))||h,jn=n(663),Sn=n.n(jn),Nn=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props.sale;return"Отклонить отчет о продаже  №".concat(e.id,"?")}}]),t}($.Component),Tn=Object(te.c)(g=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props.sale;return $.createElement(Et.f,{title:"Отклонение отчета продажи",subTitle:"№".concat(e.id),loading:e.declineForm.sending,onConfirm:e.decline,content:$.createElement(Nn,{sale:e})},function(e){var t=e.show;return $.createElement(Lt.a,{title:"Отклонить продажу",placement:"top-start"},$.createElement(_t.a,{onClick:t},$.createElement(Sn.a,null)))})}}]),t}($.Component))||g,Dn=Object(de.c)(kt()(function(){return{row:{"&:hover":{background:"rgba(0,0,0,0.1)"}},controllsCell:{minWidth:128}}}),te.c)(function(e){var t=e.sale,n=e.classes,a=e.className;return $.createElement(Ct.a,{className:Zt()(a,n.row)},$.createElement(It.a,null,t.worker.fullName),$.createElement(It.a,null,t.product.name," (",t.product.productId,")"),$.createElement(It.a,null,t.amount," шт."),$.createElement(It.a,null,t.dateAsText),$.createElement(It.a,null,t.createdAtAsText),$.createElement(It.a,{className:n.controllsCell,align:"right"},$.createElement(On,{sale:t},function(e){var t=e.onClick;return $.createElement(Lt.a,{title:"Редактирование продажи",placement:"top-start"},$.createElement(_t.a,{onClick:t},$.createElement(Pt.a,null)))}),$.createElement(Tn,{sale:t})))}),Fn=Object(te.c)(function(e){var t=e.sales,n=e.classNames,a=void 0===n?{}:n,r=e.rowClassNames;return $.createElement(Ot.a,null,$.createElement(St.a,null,$.createElement(Ct.a,null,$.createElement(It.a,null,"Сотрудник"),$.createElement(It.a,null,"Товар"),$.createElement(It.a,null,"Количество"),$.createElement(It.a,null,"Время продажи"),$.createElement(It.a,null,"Отчет создан"),$.createElement(It.a,{align:"right"},"Действия"))),$.createElement(jt.a,null,t.map(function(e){return $.createElement(Dn,{key:e.id,className:a[r[e.status]],sale:e})})))}),An=n(737),Rn=Object(de.c)(kt()(function(e){return{container:{marginBottom:e.spacing(2),marginLeft:e.spacing(.5),marginRight:e.spacing(.5),height:"100%"},cardRoot:{position:"relative",marginTop:e.spacing(1)},actionArea:{cursor:"pointer",padding:e.spacing(1),paddingRight:e.spacing(.1666),":hover":{background:"rgba(0,0,0,0.1)"}}}}),te.c)(function(e){var t=e.sale,n=e.classes,a=e.className;return $.createElement(On,{sale:t},function(e){var r=e.onClick;return $.createElement(ht.a,{className:Zt()(a,n.cardRoot)},$.createElement($.Fragment,null,$.createElement(An.a,{action:$.createElement($.Fragment,null,$.createElement(On,{sale:t},function(e){var t=e.onClick;return $.createElement(Lt.a,{title:"Редактирование продажи",placement:"top-start"},$.createElement(_t.a,{onClick:t},$.createElement(Pt.a,null)))}),$.createElement(_t.a,{onClick:t.decline},$.createElement(Gt.a,null))),subheader:t.worker.fullName}),$.createElement(en.a,{onClick:r,className:n.actionArea},$.createElement(vt.a,{container:!0},$.createElement(vt.a,{item:!0,xs:12},$.createElement(yt.a,null,$.createElement("b",null,t.product.name," (",t.product.productId,")"))),$.createElement(vt.a,{item:!0,xs:6},$.createElement(yt.a,{color:"textSecondary"},t.amount,"шт.")),$.createElement(vt.a,{item:!0,xs:6},$.createElement(yt.a,{color:"textSecondary"},t.dateAsText))))))})}),Wn=Object(te.c)(function(e){var t=e.sales,n=e.classNames,a=void 0===n?{}:n,r=e.rowClassNames;return t.map(function(e){return $.createElement(Rn,{key:e.id,className:a[r[e.status]],sale:e})})}),Bn=(v={},Se()(v,re.O.STATUS_SALE_REFUSED,"refusedRow"),Se()(v,re.O.STATUS_SALE_CONFLICT,"conflictRow"),Se()(v,re.O.STATUS_SALE_CONFIRMED,"confirmedRow"),v),qn=Object(de.c)(kt()(function(e){var t;return t={},Se()(t,Bn[re.O.STATUS_SALE_REFUSED],{background:e.palette.error.main}),Se()(t,Bn[re.O.STATUS_SALE_CONFLICT],{background:e.palette.caution.main}),Se()(t,Bn[re.O.STATUS_SALE_CONFIRMED],{background:e.palette.success.main}),Se()(t,"flex",{display:"flex",flexDirection:"column",flexGrow:1,overflow:"auto",width:"100%"}),Se()(t,"hidden",{width:"100%"}),t}),te.c)(function(e){var t=e.sales,n=t.getItems,a=t.items,r=t.loadingMore,o=e.classes,c=o.hidden,i=o.flex,s=le()(o,["hidden","flex"]),l=le()(e,["sales","classes"]);return $.createElement(Et.r,{className:i,threshold:1e3,onReachedBottom:n},$.createElement(H.a,{className:c,xsDown:!0,implementation:"css"},$.createElement(Fn,ie()({sales:a,rowClassNames:Bn,classNames:s},l))),$.createElement(H.a,{className:c,smUp:!0,implementation:"css"},$.createElement(Wn,ie()({sales:a,rowClassNames:Bn,classNames:s},l))),$.createElement(Et.s,{variant:"single",noWrap:!0,loading:r}))}),Mn=Object(de.c)(kt()(function(e){return{container:{width:"100%",padding:"0 ".concat(e.spacing(2),"px"),maxHeight:"20%"}}}),te.c)(function(e){var t=e.classes,n=e.filter;return ee.a.createElement("div",{className:t.container},ee.a.createElement(vt.a,{container:!0,spacing:2},ee.a.createElement(vt.a,{item:!0,xs:12},ee.a.createElement(Et.g,{dateRange:n.dateRange,clearable:!0,clearLabel:"Сброс",cancelLabel:"Назад",variant:"dialog",margin:"normal",disableFuture:!0,orientation:"landscape",inputVariant:"outlined"})),ee.a.createElement(vt.a,{item:!0,xs:12},ee.a.createElement(Et.p,{name:"statuses",value:n.statuses.toJS(),onChange:function(e){n.change(e.target.name,e.target.value)}})),ee.a.createElement(vt.a,{item:!0,xs:12},ee.a.createElement(In.a,{margin:"normal",name:"query",variant:"outlined",placeholder:"ФИО",fullWidth:!0,value:n.query||"",onChange:function(e){return n.change("query",e.target.value)}})),ee.a.createElement(vt.a,{item:!0,xs:12},ee.a.createElement(Et.y,{withCategory:!0,data:n.data,onChange:n.onProductChange}))))}),Ln=function(e){var t=e.onSave,n=e.filter;return $.createElement(Et.o,{onSave:t,onReset:n.reset},$.createElement(Mn,{filter:n}))},_n=n(738),Vn=Object(te.c)((k=b=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"onSubmit",function(){var e=Ye()(Ge.a.mark(function e(t){var a,r,o,c;return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=n.props,r=a.onClose,o=a.refreshItems,c=a.checkSales.request,e.next=4,c();case 4:o(),r();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props.onClose;return $.createElement($.Fragment,null,$.createElement(Mt.a,null,$.createElement("form",{id:"CONFIRM_SALES_DIALOG",onSubmit:this.onSubmit},$.createElement(_n.a,null,"Сверить отчеты о продажах с данными из чекККМ ?"))),$.createElement(Bt.a,null,$.createElement(qt.a,{color:"secondary",variant:"text",type:"submit",onClick:e},"Отмена"),$.createElement(qt.a,{color:"primary",variant:"contained",type:"submit",form:"CONFIRM_SALES_DIALOG",autoFocus:!0},"Подтвердить")))}}]),t}($.Component),Se()(b,"defaultProps",{onClose:function(){}}),y=k))||y,Hn=Object(ne.c)(ut,{name:"sales"})(w=Object(ne.c)(mt,{name:"checkSales"})(w=Object(te.c)(w=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){var e=Ye()(Ge.a.mark(function e(){return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.sales.getItems();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.shop,n=e.sales,a=e.checkSales,r=n.items,o=n.loading,c=n.filter,i=n.forceGetItems;return $.createElement($.Fragment,null,$.createElement(Et.i,{title:"Подтверждение продаж",loading:a.loading,content:function(e){var t=e.onClose;return $.createElement(Vn,{checkSales:a,refreshItems:n.forceGetItems,onClose:t})}},function(e){var t=e.show;return $.createElement(qt.a,{color:"primary",variant:"contained",onClick:t},"Подтвердить продажи")}),$.createElement(Et.s,{flexRoot:!0,noWrap:!0,loading:o},$.createElement(Et.k,{variant:"flexGrow",visible:r.length<1&&!o},$.createElement(qn,{sales:n,shopId:t.id}))),$.createElement(Ln,{filter:c,onSave:i}))}}]),t}($.Component))||w)||w)||w,zn=n(744),Pn=n(721),Un=n(268),Gn=n.n(Un),Kn=kt()(function(){return{text:{marginTop:15,flexGrow:0},content:{display:"flex",flexDirection:"column"},actions:{flexWrap:"wrap"}}})(C=Object(te.c)(C=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"onSave",Ye()(Ge.a.mark(function e(){return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.spot.updateForm.request();case 2:e.sent&&(n.props.getItems(),n.props.onClose());case 4:case"end":return e.stop()}},e)}))),Se()(Ht()(n),"changeName",function(e){n.props.spot.updateForm.change("name",e.target.value)}),n}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.spot.updateForm,n=t.data.name,a=t.sending,r=e.classes,o=e.onClose;return $.createElement($.Fragment,null,$.createElement(Mt.a,{className:r.content},$.createElement(Et.s,{loading:a},$.createElement(In.a,{label:"Название поста",className:r.text,onChange:this.changeName,fullWidth:!0,value:n,variant:"outlined"}),$.createElement(Et.k,{visible:!0,variant:"flexGrow"},$.createElement(vt.a,null,[])))),$.createElement(Bt.a,null,$.createElement(qt.a,{onClick:o},"Назад"),$.createElement(qt.a,{variant:"contained",color:"primary",onClick:this.onSave},"Сохранить")))}}]),t}($.Component))||C)||C,Yn=kt()(function(e){return{closeButton:{position:"absolute",top:0,right:0},cardRoot:{position:"relative",padding:e.spacing(1),paddingRight:e.spacing(.1666),height:"100%"},name:{wordBreak:"break-word"}}})(I=Object(te.c)(I=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"onDeleteConfirm",Ye()(Ge.a.mark(function e(){return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.spot.deleteForm.request();case 2:e.sent&&n.props.getItems();case 4:case"end":return e.stop()}},e)}))),n}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.spot,n=e.classes,a=e.getItems;return $.createElement(Et.s,{loading:t.deleteForm.sending},$.createElement(ht.a,{className:n.cardRoot},$.createElement(Et.i,{title:"Изменить пост",content:function(e){return $.createElement(Kn,nn()({spot:t},e,{getItems:a}))}},function(e){var a=e.show;return $.createElement(en.a,{onClick:a},$.createElement(yt.a,{className:n.name,variant:"subtitle1"},t.name))}),$.createElement(Et.f,{onConfirm:this.onDeleteConfirm,title:"Удаление",content:$.createElement(yt.a,{variant:"subtitle1",className:n.name},"Вы действительно хотите удалить этот пост?")},function(e){var t=e.show;return $.createElement(_t.a,{className:n.closeButton,onClick:t},$.createElement(Gt.a,null))})))}}]),t}($.Component))||I)||I,Jn=Object(te.c)(function(e){var t=e.spots,n=e.getItems;return $.createElement(vt.a,{container:!0,spacing:2},t.map(function(e){return $.createElement(vt.a,{key:e.id,item:!0,xs:12},$.createElement(Yn,{spot:e,getItems:n}))}))}),Zn=kt()(function(){return{cell:{wordBreak:"break-word",width:"80%"},button:{margin:0,padding:3}}})(x=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"onDeleteConfirm",Ye()(Ge.a.mark(function e(){return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.spot.deleteForm.request();case 2:e.sent&&n.props.getItems();case 4:case"end":return e.stop()}},e)}))),n}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.spot,a=e.getItems;return $.createElement(Ct.a,null,$.createElement(It.a,null," ",n.id),$.createElement(It.a,{className:t.cell},n.name),$.createElement(It.a,null,$.createElement(vt.a,{container:!0,direction:"column"},$.createElement(vt.a,{item:!0},$.createElement(Et.i,{title:"Изменить пост",content:function(e){return $.createElement(Kn,nn()({spot:n},e,{getItems:a}))}},function(e){var n=e.show;return $.createElement(qt.a,{color:"primary",className:t.button,onClick:n},"Изменить")})),$.createElement(vt.a,{item:!0},$.createElement(Et.f,{title:"Удалить?",onConfirm:this.onDeleteConfirm,openLabel:"Удалить",content:$.createElement(yt.a,null,'Вы действительно хотите удалить пост "'.concat(n.name,'"?'))},function(e){var t=e.show;return $.createElement(qt.a,{color:"primary",onClick:t},"Удалить")})))))}}]),t}($.Component))||x,Qn=Object(te.c)(function(e){var t=e.spots,n=e.getItems;return $.createElement(Ot.a,null,$.createElement(St.a,null,$.createElement(Ct.a,null,$.createElement(It.a,null," id"),$.createElement(It.a,null," Название"),$.createElement(It.a,null," "))),$.createElement(jt.a,null,t.map(function(e){return $.createElement(Zn,{key:e.id,spot:e,getItems:n})})))}),Xn=Object(te.c)(function(e){var t=e.spots,n=e.getItems;return $.createElement(Et.s,{noWrap:!0,loading:!1},$.createElement(Et.k,{visible:t.length<1,emptyText:"Нет постов",variant:"absolute"},$.createElement(H.a,{xsDown:!0},$.createElement(Qn,{spots:t,getItems:n})),$.createElement(H.a,{smUp:!0},$.createElement(Jn,{spots:t,getItems:n}))))}),$n=kt()(function(){return{text:{marginTop:15,flexGrow:0},content:{display:"flex",flexDirection:"column"},actions:{flexWrap:"wrap"}}})(O=Object(te.c)(O=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"onSave",Ye()(Ge.a.mark(function e(){return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.role.spotCreateForm.request();case 2:e.sent&&(n.props.getItems(),n.props.onClose());case 4:case"end":return e.stop()}},e)}))),Se()(Ht()(n),"changeName",function(e){n.props.role.spotCreateForm.change("name",e.target.value)}),n}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.role.spotCreateForm,n=t.data.name,a=t.sending,r=e.classes,o=e.onClose;return $.createElement($.Fragment,null,$.createElement(Mt.a,{className:r.content},$.createElement(Et.s,{loading:a},$.createElement(In.a,{label:"Название поста",className:r.text,onChange:this.changeName,fullWidth:!0,value:n,variant:"outlined"}),$.createElement(Et.k,{visible:!0,variant:"flexGrow"},$.createElement(vt.a,null,[])))),$.createElement(Bt.a,null,$.createElement(qt.a,{onClick:o},"Назад"),$.createElement(qt.a,{variant:"contained",color:"primary",onClick:this.onSave},"Создать")))}}]),t}($.Component))||O)||O,ea=kt()(function(e){return{swipeableSlide:Se()({},e.breakpoints.down("md"),{display:"flex",alignItems:"flex-start",padding:10})}})(j=Object(ne.c)(Le,{name:"spotsList"})(j=Object(te.c)(j=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"handleChange",function(e,t){n.props.spotsList.handleRoleChange(t)}),n}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){this.props.spotsList.setShopId(this.props.shop.id),this.props.spotsList.getItems()}},{key:"render",value:function(){var e=this.props,t=e.spotsList,n=t.loading,a=t.items,r=t.getItems,o=t.handleRoleChange,c=t.idx,i=e.classes;return $.createElement(Et.s,{noWrap:!0,variant:"flexGrow",loading:n},$.createElement(Et.k,{variant:"flexGrow",visible:a.length<1&&!n,emptyText:"Нет ролей для создания постов."},$.createElement(En.a,null,$.createElement(zn.a,{value:c,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},a.map(function(e,t){var n=e.id,a=e.name;return $.createElement(Pn.a,{key:n,value:t,label:a})}))),$.createElement(Gn.a,{index:c,onChangeIndex:o,style:{flexGrow:1,position:"relative",display:"flex",flexDirection:"column"},containerStyle:{height:"100%",paddingTop:2},slideClassName:i.swipeableSlide},a.map(function(e){var t=e.id,n=e.spots;return $.createElement(Xn,{key:t,value:t,spots:n,getItems:r})}))),a.length>1&&$.createElement(Et.i,{title:"Новый пост",subTitle:a[c].name,content:function(e){return $.createElement($n,nn()({getItems:r,role:a[c]},e))}},function(e){var t=e.show;return $.createElement(Et.n,{onClick:t,color:"primary"})}))}}]),t}($.Component))||j)||j)||j,ta=n(713),na=n(265),aa=n.n(na),ra=n(647),oa=n(655),ca=n(712),ia=n(657),sa=n(649),la=Object(te.c)(S=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"onChangeRole",function(e){var t=n.props.form.change;t("roleId",parseInt(e.target.value,10)),t("spotId",null)}),Se()(Ht()(n),"onSave",Ye()(Ge.a.mark(function e(){return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.form.request();case 2:e.sent&&n.props.onSuccess();case 4:case"end":return e.stop()}},e)}))),n}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){this.props.form.roles.getItems()}},{key:"render",value:function(){var e=this.props.form,t=e.roles,n=e.data,a=e.change,r=e.sending,o=e.errors,c=t.getRole(n.roleId);return $.createElement($.Fragment,null,$.createElement(Mt.a,null,o.form&&$.createElement(sa.a,{error:!0},o.form),$.createElement(ra.a,{fullWidth:!0,margin:"normal"},$.createElement(ia.a,{htmlFor:"roleId"},"Роль"),$.createElement(oa.a,{value:n.roleId||"",onChange:this.onChangeRole},t.items.map(function(e){return $.createElement(ca.a,{key:e.id,value:e.id},e.name)})),o.roleId&&$.createElement(sa.a,{error:!0},o.roleId)),c&&$.createElement(ra.a,{fullWidth:!0,margin:"normal"},$.createElement(ia.a,{htmlFor:"spotId",disabled:!c.spots.length},"Пост"),$.createElement(oa.a,{value:n.spotId||"",onChange:function(e){return a("spotId",parseInt(e.target.value,10))}},$.createElement(ca.a,{key:"",value:""},c.spots.length>0?"Не выбрано":"Нет постов для роли"),c.spots.map(function(e){return $.createElement(ca.a,{key:e.id,value:e.id},e.name)}))),$.createElement(ra.a,{fullWidth:!0,margin:"normal"},$.createElement(Et.w,{fullWidth:!0,period:n.time}),o.time&&$.createElement(sa.a,{error:!0},o.time))),$.createElement(Bt.a,null,$.createElement(qt.a,{disabled:r||t.loading||n.time.hasErrors,variant:"contained",color:"primary",onClick:this.onSave},"Создать")))}}]),t}($.Component))||S,ua=Object(de.q)("TEMPLATE_CREATE_FROM"),ma=Object(te.c)(N=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"onSubmit",function(){var e=Ye()(Ge.a.mark(function e(t){var a,r,o,c,i;return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=n.props,r=a.onClose,o=a.onSuccess,c=a.form,e.next=4,c.request();case 4:if(!(i=e.sent)){e.next=9;break}return o(),r(),e.abrupt("return",i);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Se()(Ht()(n),"onChange",function(e){n.props.form.change(e.target.name,e.target.value)}),n}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props.form,t=e.sending,n=e.errors;return $.createElement($.Fragment,null,$.createElement(Mt.a,null,$.createElement(yt.a,null,"Записать вакансии текущего дня в шаблон (сможете создавать копии этого дня.)"),$.createElement("form",{id:ua,onSubmit:this.onSubmit},$.createElement(In.a,{label:"Название шаблона",error:n.form&&!!n.form.name,helperText:n.form&&n.form.name,name:"name",type:"text",margin:"normal",variant:"outlined",fullWidth:!0,onChange:this.onChange}))),$.createElement(Bt.a,null,$.createElement(qt.a,{disabled:t,variant:"contained",color:"primary",type:"submit",form:ua},"Создать")))}}]),t}($.Component))||N,pa=Object(te.c)(T=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.templates.createForm,n=e.onSuccess;return $.createElement(Et.i,{title:"Создание шаблона",subtitle:"Создание шаблона вакансий из этого дня",loading:t.sending,content:function(e){var a=e.onClose;return $.createElement(ma,{form:t,onSuccess:n,onClose:a})}},function(e){var t=e.show;return $.createElement(qt.a,{variant:"outlined",color:"primary",onClick:t},"Создать шаблон")})}}]),t}($.Component))||T,da=n(711),fa=n(650),Ea=n(739),ha=n(707),ga=n(719),va=Object(te.c)(D=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"loadTemplate",function(){var e=Ye()(Ge.a.mark(function e(t){var a,r,o,c;return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.form,o=a.onClose,c=a.onSuccess,r.change("name",t.toString()),e.next=4,r.request();case 4:e.sent&&(c(),o());case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.templates,a=n.items,r=n.loading,o=t.form;return $.createElement(Mt.a,null,$.createElement(Et.k,{visible:!a.length&&!r,variant:"flexGrow"},o.errors&&o.errors.date&&$.createElement(sa.a,{error:!0},o.errors.date),$.createElement(da.a,null,a.map(function(t){return $.createElement(fa.a,{button:!0,key:t,onClick:function(){return e.loadTemplate(t.name)}},$.createElement(ga.a,{primary:t.name}),t.deleteForm.sending?$.createElement(ha.a,{size:20}):$.createElement(Ea.a,null,$.createElement(_t.a,{edge:"end","aria-label":"delete",onClick:t.delete},$.createElement(Sn.a,null))))}))))}}]),t}($.Component))||D,ya=Object(ne.c)(Ie,{name:"form"})(F=Object(te.c)(F=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.form,n=e.shopId,a=e.date;t.setData({date:a,shopId:n})}},{key:"render",value:function(){var e=this.props,t=e.templates,n=e.form,a=le()(e,["templates","form"]);return $.createElement(Et.i,{title:"Список шаблонов",loading:t.loading||n.sending||t.createForm.sending,content:function(e){var r=e.onClose;return $.createElement(va,nn()({templates:t,form:n,onClose:r},a))}},function(e){var t=e.show;return $.createElement(qt.a,{variant:"outlined",color:"primary",onClick:t},"Список шаблонов")})}}]),t}($.Component))||F)||F,ba=kt()(function(){return{spot:{wordBreak:"break-word"},actions:{minWidth:150}}})(A=Object(te.c)(A=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.vacancies,n=e.classes,a=e.ActionsComponent;return $.createElement(Ot.a,null,$.createElement(St.a,null,$.createElement(Ct.a,null,$.createElement(It.a,null,"ID"),$.createElement(It.a,null,"Статус"),$.createElement(It.a,null,"Дата"),$.createElement(It.a,null,"Время"),$.createElement(It.a,null,"Роль"),$.createElement(It.a,null,"Пост"),$.createElement(It.a,null,"Работник"),$.createElement(It.a,null,"Действия"))),$.createElement(jt.a,null,t.map(function(e){return $.createElement(Ct.a,{key:e.id},$.createElement(It.a,null,e.id),$.createElement(It.a,null,e.statusAsText),$.createElement(It.a,null,e.dateAsText),$.createElement(It.a,null,$.createElement(yt.a,null,"Запланировано: ".concat(e.plan.asText)),e.fact.notEmpty&&$.createElement(yt.a,null,"Фактическое: ".concat(e.fact.asText))),$.createElement(It.a,null,e.role.name),$.createElement(It.a,{className:n.spot},e.spot?e.spot.name:"-"),$.createElement(It.a,null,e.user?e.user.fullName:"-"),$.createElement(It.a,{className:n.actions},$.createElement(a,{vacancy:e})))})))}}]),t}($.Component))||A)||A,ka=Object(te.c)(R=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.vacancies,n=e.classes,a=e.ActionsComponent;return t.map(function(e){return $.createElement(ht.a,{key:e.id,className:n.card},$.createElement(gt.a,null,$.createElement(vt.a,{container:!0,justify:"space-between",alignItems:"center"},$.createElement(vt.a,null,$.createElement(yt.a,{variant:"subtitle1"},e.role.name)),$.createElement(vt.a,null,$.createElement(yt.a,null,e.statusAsText))),$.createElement(yt.a,null,"Запланировано: ".concat(e.plan.asText)),$.createElement(yt.a,null,"Фактически: ".concat(e.fact.notEmpty?e.fact.asText:"Не указано")),e.spot&&$.createElement(yt.a,{className:n.spot},"Пост: ".concat(e.spot.name)),$.createElement(yt.a,null,e.user?e.user.fullName:"Никто не назначен")),$.createElement(sn.a,null,$.createElement(a,{vacancy:e})))})}}]),t}($.Component))||R,wa=kt()(function(e){return{card:{marginBottom:e.spacing(1)},spot:{wordBreak:"break-word"}}})(ka),Ca=n(676),Ia=n.n(Ca),xa=n(677),Oa=n.n(xa),ja=n(269),Sa=n.n(ja),Na=Object(ne.c)(Oe,{name:"vacancyWorkers"})(W=Object(ne.c)(oe,{name:"hireForm"})(W=Object(te.c)(W=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"onSelectWorker",function(){var e=Ye()(Ge.a.mark(function e(t){var a,r,o;return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.hireForm,o=a.onHireSuccess,r.change("workerId",t.id),e.next=4,r.request();case 4:e.sent&&o();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Se()(Ht()(n),"onApproveSuccess",function(e){e(),n.props.onApproveSuccess()}),Se()(Ht()(n),"onDismissWorker",function(){var e=Ye()(Ge.a.mark(function e(t){return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dismissWorker();case 2:e.sent&&n.props.onDismissWorkerSuccess();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.vacancyWorkers.filter,n=e.vacancy,a=n.id,r=n.shop;e.hireForm.change("vacancyId",a),t.change("vacancyId",a),t.change("shopId",r.id)}},{key:"render",value:function(){var e=this,t=this.props,n=t.vacancy,a=t.vacancyWorkers,r=t.hireForm;return $.createElement(Et.s,{loading:r.sending||n.deleteForm.sending||n.dismissWorkerForm.sending},n.canHire&&$.createElement(Et.i,{title:"Назначить работника",closable:!0,content:function(t){var n=t.onClose;return $.createElement(Et.F,{workers:a,onSelectWorker:e.onSelectWorker,onClose:n})}},function(e){var t=e.show;return $.createElement(Lt.a,{title:"Назначить работника",placement:"top"},$.createElement(_t.a,{onClick:t},$.createElement(Ia.a,{fontSize:"small"})))}),n.canDelete&&$.createElement(Lt.a,{title:"Удалить",placement:"top"},$.createElement(_t.a,{onClick:n.delete},$.createElement(Sn.a,{fontSize:"small"}))),n.canDismiss&&$.createElement(Lt.a,{title:"Снять работника",placement:"top"},$.createElement(_t.a,{onClick:function(){return e.onDismissWorker(n)}},$.createElement(Oa.a,{fontSize:"small"}))),n.canApprove&&$.createElement(Et.i,{title:"Подтвердить время работы",closable:!0,content:function(t){var a=t.onClose;return $.createElement(Kt,{vacancy:n,onSuccess:function(){return e.onApproveSuccess(a)}})}},function(e){var t=e.show;return $.createElement(Lt.a,{title:"Подтвердить время работы",placement:"top"},$.createElement(_t.a,{onClick:t},$.createElement(Sa.a,{fontSize:"small"})))}))}}]),t}($.Component))||W)||W)||W,Ta=kt()(function(e){return{fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)}}})(B=Object(ne.c)(Ce,{name:"templates"})(B=Object(ne.c)(ye,{name:"vacancies"})(B=Object(te.c)(B=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"renderActions",function(e){var t=e.vacancy;return $.createElement(Na,{onHireSuccess:n.props.vacancies.getItems,onDismissWorkerSuccess:n.props.vacancies.getItems,onApproveSuccess:n.props.vacancies.getItems,vacancy:t})}),n}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.templates,n=e.date,a=e.shopId;e.vacancies.setDateAndShopId({date:n,shopId:a}),t.setShopId({date:n,shopId:a})}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.shopId,a=e.vacancies,r=e.classes,o=e.templates,c=a.items,i=a.loading,s=a.createForm,l=a.dateAsText,u=a.canCreate,m={vacancies:c,ActionsComponent:this.renderActions};return $.createElement($.Fragment,null,$.createElement("div",null,!!c.length&&$.createElement(pa,{templates:o,date:t,subTitle:l,shopId:n,onSuccess:o.forceGetItems}),a.canCreate&&$.createElement(ya,{templates:o,date:t,subTitle:l,shopId:n,onSuccess:a.getItems})),$.createElement(Et.s,{loading:i},$.createElement(H.a,{mdDown:!0},$.createElement(ba,m)),$.createElement(H.a,{lgUp:!0},$.createElement(wa,m)),u&&$.createElement(Et.i,{title:"Создание вакансии",subTitle:l,loading:s.sending||s.roles.loading,content:function(e){var t=e.onClose;return $.createElement(la,{form:s,onSuccess:t})}},function(e){var t=e.show;return $.createElement(ta.a,{size:"small",color:"primary",className:r.fab,onClick:t},$.createElement(aa.a,null))})))}}]),t}($.Component))||B)||B)||B)||B,Da=kt()(function(){return{empty:{background:"rgba(233,190,149, 0.5)"},filled:{background:"rgba(11,243,131, 0.5)"},notFilled:{background:"rgba(255,221,0, 0.5)"},old:{background:"rgba(131,170,236, 0.5)"}}})(function(e){var t=e.date,n=e.day,a=e.classes,r=e.onCloseVacanciesList;return $.createElement(Et.j,{onClose:r,subTitle:t.format("DD, MMMM (dddd)"),title:"Список вакансий",wrapBody:!1,body:n&&$.createElement(Ta,{date:n.date,shopId:n.shopId})},function(e){var r,o=e.show,c=me()().isAfter(t,"day"),i=Zt()(Se()({},a.old,c),a.empty);if(!n)return $.createElement(Et.c.DefaultItem,{date:t,className:i,onClick:o},$.createElement(H.a,{only:"xs"},$.createElement(yt.a,null,"Вакансий нет")));var s=Zt()(i,(r={},Se()(r,a.filled,n.isFilled),Se()(r,a.notFilled,!n.isFilled&&!n.isEmpty),Se()(r,a.empty,n.isEmpty),r));return $.createElement(Et.c.DefaultItem,{date:t,className:s,onClick:o},$.createElement(H.a,{only:"xs"},n.isEmpty?$.createElement(yt.a,null,"Вакансий нет"):n.roles.map(function(e){var t=e.role,n=e.total,a=e.exist;return $.createElement("div",{key:t.id},$.createElement(yt.a,null,"".concat(t.name," ").concat(a,"/").concat(n)))})))})}),Fa=kt()(function(e){return{helpContainer:{marginBottom:90},helpItem:{padding:e.spacing(1)},helpBox:{width:e.spacing(2.5),height:e.spacing(2.5),marginRight:e.spacing(1),border:"1px solid gray"},empty:{backgroundColor:"rgba(233,190,149, 0.5)"},filled:{backgroundColor:"rgba(11,243,131, 0.5)"},notFilled:{backgroundColor:"rgba(255,221,0, 0.5)"},old:{backgroundColor:"rgba(131,170,236, 0.5)"},summaryContainer:Se()({position:"fixed",bottom:0,padding:e.spacing(1),backgroundColor:e.palette.secondary.main,color:"white",width:"100%"},e.breakpoints.up("md"),{width:"calc(100% - ".concat(e.drawer.width,"px)")})}})(q=Object(te.c)(q=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"getDays",function(){n.props.calendar.setShopId(n.props.shopId)}),Se()(Ht()(n),"renderItem",function(e){var t=n.props.calendar.getDayByDate(e.unix());return $.createElement(Da,{date:e,day:t,onCloseVacanciesList:n.props.calendar.getDays})}),n}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){this.getDays()}},{key:"render",value:function(){var e=this.props,t=e.calendar,n=e.classes,a=t.loading,r=t.error,o=t.changeMonthOffset,c=t.monthOffset;return $.createElement($.Fragment,null,$.createElement(Et.s,{loading:a},$.createElement(Et.m,{visible:r,message:"Не удалось загрузить календарь",onRetry:this.getDays},$.createElement(Et.c,{monthOffset:c,onChangeOffset:o,renderItem:this.renderItem}),$.createElement(vt.a,{container:!0,className:n.helpContainer},$.createElement(vt.a,{item:!0,className:n.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Zt()(n.helpBox,n.empty)}),$.createElement(yt.a,null,"- без вакансий"))),$.createElement(vt.a,{item:!0,className:n.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Zt()(n.helpBox,n.filled)}),$.createElement(yt.a,null,"- на все вакансии назначены работники"))),$.createElement(vt.a,{item:!0,className:n.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Zt()(n.helpBox,n.notFilled)}),$.createElement(yt.a,null,"- необходимо назначить сотрудников на свободные вакансии"))),$.createElement(vt.a,{item:!0,className:n.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center",direction:"row"},$.createElement("div",{className:Zt()(n.helpBox,n.old)}),$.createElement(yt.a,null,"- завершенный день")))))))}}]),t}($.Component))||q)||q,Aa=Object(te.c)(M=function(e){function t(){var e,n;P()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Z()(t)).call.apply(e,[this].concat(r))),Se()(Ht()(n),"onSubmit",function(){var e=Ye()(Ge.a.mark(function e(t){var a,r,o;return Ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.revision,o=a.onClose,t.preventDefault(),e.next=4,r.updateForm.request();case 4:e.sent&&o();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Se()(Ht()(n),"onChangeDecimal",function(e){n.props.revision.updateForm.changeDecimal(e.target.name,e.target.value)}),n}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props.revision.updateForm;return $.createElement($.Fragment,null,$.createElement(Mt.a,null,$.createElement("form",{id:"REVISION_UPDATE_FORM_ID",onSubmit:this.onSubmit},$.createElement(In.a,{error:!!e.errors.declaredDeficit,helperText:e.errors.declaredDeficit,fullWidth:!0,label:"Заявленная недостача",variant:"outlined",name:"declaredDeficit",onChange:this.onChangeDecimal,value:e.declaredDeficit.toString()}))),$.createElement(Bt.a,null,$.createElement(qt.a,{type:"submit",variant:"contained",color:"primary",form:"REVISION_UPDATE_FORM_ID"},"Сохранить")))}}]),t}($.Component))||M,Ra=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.revision,n=e.children;return $.createElement(Et.i,{title:"Заявить сумму ревизии",content:function(e){return $.createElement(Aa,nn()({revision:t},e))}},function(e){var t=e.show;return n({show:t})})}}]),t}($.Component),Wa=kt()(function(){return{cell:{wordBreak:"break-word",width:"80%"},button:{margin:0,padding:0}}})(L=Object(te.c)(L=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.revision;return $.createElement(Ct.a,null,$.createElement(It.a,null,n.id),$.createElement(It.a,null,n.dateAsText),$.createElement(It.a,null,n.declaredDeficit.toFixed(2)," руб."),$.createElement(It.a,null,n.revisionDeficit.toFixed(2)," руб."),$.createElement(It.a,null,n.cashDifference.toFixed(2)," руб."),$.createElement(It.a,null,$.createElement(vt.a,{container:!0},$.createElement(vt.a,{item:!0},n.active&&$.createElement(Ra,{revision:n},function(e){var n=e.show;return $.createElement(qt.a,{color:"primary",className:t.button,onClick:n},"Заявить Недостачу")})))))}}]),t}($.Component))||L)||L,Ba=Object(te.c)(function(e){var t=e.revisions,n=e.getItems;return $.createElement(Ot.a,null,$.createElement(St.a,null,$.createElement(Ct.a,null,$.createElement(It.a,null,"id"),$.createElement(It.a,null,"Месяц"),$.createElement(It.a,null,"Заявленная недостача"),$.createElement(It.a,null,"Недостача по ревизии"),$.createElement(It.a,null,"Разница ОКС"),$.createElement(It.a,null,"Изменить"))),$.createElement(jt.a,null,t.map(function(e){return $.createElement(Wa,{key:e.id,revision:e,getItems:n})})))}),qa=kt()(function(e){return{cardRoot:{position:"relative",padding:e.spacing(1),paddingRight:e.spacing(.1666),height:"100%"}}})(_=Object(te.c)(_=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"render",value:function(){var e=this.props,t=e.revision,n=e.classes;return $.createElement(Et.s,{loading:t.updateForm.sending},$.createElement(An.a,{title:t.dateAsText,action:$.createElement(Ra,{revision:t},function(e){var t=e.show;return $.createElement(_t.a,{color:"primary",onClick:t},$.createElement(Pt.a,null))})}),$.createElement(ht.a,{className:n.cardRoot},$.createElement(vt.a,{container:!0},$.createElement(vt.a,{item:!0,xs:12},$.createElement(vt.a,{container:!0},$.createElement(vt.a,{item:!0},$.createElement(yt.a,{color:"secondary"},"Заявленная сумма недостачи :")),$.createElement(vt.a,{item:!0},$.createElement(yt.a,{color:"main"},t.declaredDeficit," руб.")))))))}}]),t}($.Component))||_)||_,Ma=Object(te.c)(function(e){var t=e.revisions;return $.createElement(vt.a,{container:!0,spacing:2},t.map(function(e){return $.createElement(vt.a,{key:e.id,item:!0,xs:12},$.createElement(qa,{revision:e}))}))}),La=Object(te.c)(function(e){var t=e.revisions;return $.createElement($.Fragment,null,$.createElement(H.a,{smDown:!0},$.createElement(Ba,{revisions:t})),$.createElement(H.a,{mdUp:!0},$.createElement(Ma,{revisions:t})))}),_a=Object(ne.c)(ft,{name:"revision"})(V=Object(te.c)(V=function(e){function t(){return P()(this,t),Y()(this,Z()(t).apply(this,arguments))}return X()(t,e),G()(t,[{key:"componentDidMount",value:function(){this.props.revision.getItems()}},{key:"render",value:function(){var e=this.props.revision,t=e.loading,n=e.items;return $.createElement(Et.s,{noWrap:!0,variant:"flexGrow",loading:t},$.createElement(Et.k,{variant:"flexGrow",visible:n.length<1&&!t,emptyText:"Нет информации по недостаче."},$.createElement(La,{revisions:n})))}}]),t}($.Component))||V)||V;n.d(t,"c",function(){return Wt}),n.d(t,"g",function(){return Kt}),n.d(t,"h",function(){return wn}),n.d(t,"a",function(){return Cn}),n.d(t,"b",function(){return Hn}),n.d(t,"e",function(){return ea}),n.d(t,"f",function(){return Fa}),n.d(t,"d",function(){return _a}),n.d(t,"e",function(){return ea})},771:function(e,t,n){"use strict";var a,r,o,c,i=n(749),s=n(371),l=n(712),u=n(24),m=n.n(u),p=n(52),d=n.n(p),f=n(10),E=n.n(f),h=n(12),g=n.n(h),v=n(13),y=n.n(v),b=n(14),k=n.n(b),w=n(9),C=n.n(w),I=n(15),x=n.n(I),O=n(3),j=n.n(O),S=n(0),N=n(20),T=n(35),D=n(113),F=n(731),A=n(736),R=n(176),W=n(732),B=n(59),q=n(17),M=n.n(q),L=M()(function(e){return{card:{width:"calc(100% - ".concat(e.spacing(2),"px)"),margin:e.spacing(1)}}})(a=Object(N.c)(a=function(e){function t(){return E()(this,t),y()(this,k()(t).apply(this,arguments))}return x()(t,e),g()(t,[{key:"render",value:function(){var e=this.props,t=e.vacancies,n=e.classes,a=e.onRespond;return t.map(function(e){return S.createElement(D.s,{key:e.id,loading:e.respondForm&&e.respondForm.sending},S.createElement(F.a,{className:n.card},S.createElement(W.a,null,S.createElement(B.a,{variant:"subtitle1"},e.role.name),S.createElement(B.a,{variant:"subtitle2"},e.shop.address),e.spot&&S.createElement(B.a,{variant:"subtitle2"},e.spot.name),S.createElement(B.a,{variant:"subtitle2"},e.plan.asText)),S.createElement(A.a,null,S.createElement(R.a,{size:"small",color:"primary",onClick:function(){return a(e)}},"Откликнуться"))))})}}]),t}(S.Component))||a)||a,_=n(724),V=n(726),H=n(725),z=n(723),P=n(722),U=M()(function(){return{spot:{wordBreak:"break-word"},actions:{minWidth:150,padding:0,paddingRight:16}}})(r=Object(N.c)(r=function(e){function t(){return E()(this,t),y()(this,k()(t).apply(this,arguments))}return x()(t,e),g()(t,[{key:"render",value:function(){var e=this.props,t=e.vacancies,n=e.classes,a=e.onRespond;return S.createElement(_.a,null,S.createElement(H.a,null,S.createElement(z.a,null,S.createElement(P.a,null,"ID"),S.createElement(P.a,null,"Статус"),S.createElement(P.a,null,"Дата"),S.createElement(P.a,null,"Время"),S.createElement(P.a,null,"Роль"),S.createElement(P.a,null,"Пост"),S.createElement(P.a,null,"Действия"))),S.createElement(V.a,null,t.map(function(e){return S.createElement(z.a,{key:e.id},S.createElement(P.a,null,e.id),S.createElement(P.a,null,e.statusAsText),S.createElement(P.a,null,e.dateAsText),S.createElement(P.a,null,S.createElement(B.a,null,"Запланировано: ".concat(e.plan.asText)),e.fact.notEmpty&&S.createElement(B.a,null,"Фактическое: ".concat(e.fact.asText))),S.createElement(P.a,null,e.role.name),S.createElement(P.a,{className:n.spot},e.spot?e.spot.name:"-"),S.createElement(P.a,{className:n.actions,align:"center"},S.createElement(D.s,{loading:e.respondForm.sending},S.createElement(R.a,{size:"small",color:"primary",onClick:function(){return a(e)}},"Откликнуться"))))})))}}]),t}(S.Component))||r)||r,G=n(766),K=Object(T.c)(G.c,{name:"shops"})(o=Object(T.c)(G.d,{name:"vacancies"})(o=Object(N.c)(o=function(e){function t(){var e,n;E()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=y()(this,(e=k()(t)).call.apply(e,[this].concat(r))),j()(C()(n),"getShops",function(){var e=d()(m.a.mark(function e(t){var a,r,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.shops,o=a.vacancies,r.setDate(t),e.next=4,r.getItems();case 4:r.items.length>0&&o.setDateAndShopId(t,r.items[0].id);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),j()(C()(n),"onChangeShopId",function(e){n.props.vacancies.setShopId(e.target.value)}),j()(C()(n),"onRespondClick",function(){var e=d()(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.respondForm.request();case 2:e.sent&&n.props.onRespondSuccess();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n}return x()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.getShops(this.props.date)}},{key:"render",value:function(){var e=this.props,t=e.shops,n=e.vacancies,a={vacancies:n.items,onRespond:this.onRespondClick};return S.createElement(D.s,{loading:t.loading},S.createElement(s.a,{select:!0,value:n.shopId||"",onChange:this.onChangeShopId,fullWidth:!0,margin:"normal",variant:"outlined",label:"Магазин"},t.items.map(function(e){return S.createElement(l.a,{key:e.id,value:e.id},e.name)})),S.createElement(D.s,{loading:n.loading},S.createElement(i.a,{mdDown:!0},S.createElement(U,a)),S.createElement(i.a,{lgUp:!0},S.createElement(L,a))))}}]),t}(S.Component))||o)||o)||o,Y=n(705),J=n(737),Z=n(152),Q=M()(function(e){var t;return{container:{padding:e.spacing(2),marginTop:40,position:"relative",display:"flex",flexDirection:"column"},header:(t={padding:e.spacing(2),marginTop:-40,marginBottom:e.spacing(1),backgroundColor:e.palette.primary.main,alignItems:"center"},j()(t,e.breakpoints.down("sm"),{flexWrap:"wrap"}),j()(t,"zIndex",11),t),headerText:{color:"white",marginRight:e.spacing(1)},cardContainer:{marginBottom:e.spacing(2),marginLeft:e.spacing(.5),marginRight:e.spacing(.5)}}})(c=Object(T.c)(G.a,{name:"model"})(c=Object(N.c)(c=function(e){function t(){return E()(this,t),y()(this,k()(t).apply(this,arguments))}return x()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.model.getCurrent()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.model;return S.createElement(Z.a,{className:t.container},S.createElement(Z.a,{className:t.header},S.createElement(B.a,{className:t.headerText,variant:"subtitle1"},n.titleText)),S.createElement(D.s,{noWrap:!0,loading:n.loading},n.vacancy&&S.createElement(Y.a,{container:!0},S.createElement(Y.a,{item:!0,xs:12,md:12,sm:12,lg:12},S.createElement(F.a,{className:t.cardContainer},S.createElement(J.a,{titleTypographyProps:{variant:"subtitle1"},title:n.titleText}),S.createElement(W.a,null,S.createElement(B.a,null,n.vacancy.shop.address),S.createElement(B.a,null,n.vacancy.role.name),S.createElement(B.a,null,n.vacancy.dateAsText," ",n.vacancy.plan.asText)))))))}}]),t}(S.Component))||c)||c)||c;n.d(t,"b",function(){return K}),n.d(t,"a",function(){return Q})}}]);