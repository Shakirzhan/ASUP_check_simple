(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{386:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(769);t.default=function(){return r.createElement(a.a,null)}},769:function(e,t,n){"use strict";var r,a,o,c,s,i,l,u,m,p,d,f,h,E,g,v,y,b,k,w,I,C,O,x,S,j,N,D,T,F,A,R,W,B,M,q,L,_,V,U=n(749),G=n(10),z=n.n(G),P=n(12),H=n.n(P),J=n(13),K=n.n(J),Y=n(14),Q=n.n(Y),X=n(15),Z=n.n(X),$=n(0),ee=n.n($),te=n(20),ne=n(35),re=n(1),ae=n(38),oe=ae.K.named("HireForm").props({vacancyId:re.types.maybeNull(re.types.number),workerId:re.types.maybeNull(re.types.number)}).views(function(e){return{get getData(){return e.data}}}).actions(function(e){return{reset:function(){e.setData({vacancyId:e.vacancyId}),e.sending=!1},invokeRequest:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.workerId,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.vacancyId;return Object(re.getEnv)(e).api.director.hireWorker({vacancyId:r,workerId:n})},parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t,{default:"Не удалось назначить работника",406:"У работника нет подходящей роли",404:"Вакансия уже в работе",423:"Вакансия зарезервирована",409.1:"Работник уже назначен на вакансию в этот день",409.2:"Работник обучается в этот день",409.3:"Работник отдыхает в этот день"});return Object(re.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},afterRequest:function(){Object(re.getEnv)(e).snackBar.show("Работник назначен",{variant:"success"})}}}),ce=n(32),se=n.n(ce),ie=n(21),le=n.n(ie),ue=n(19),me=n.n(ue),pe=ae.B.named("DismissForm").props({vacancyId:0}).actions(function(e){return{invokeRequest:function(){return Object(re.getEnv)(e).api.director.dismissWorker(e.vacancyId)},parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t,{403:"Вы не можете снимать работников с вакансии в этом магазине",404:"Вакансия не найдена",406.1:"Вакансия уже подтверждена",406.2:"На эту вакансию не назначен сотрудник",default:"Не удалось снять работника с вакансии"});return Object(re.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},afterRequest:function(){Object(re.getEnv)(e).snackBar.show("Работник снят с вакансии",{variant:"success"})}}}),de=n(30),fe=ae.W.props({spots:re.types.optional(re.types.array(ae.bb),[])}),he=Object(ae.ub)(fe).named("RolesList").props({shopId:re.types.maybeNull(re.types.number)}).actions(function(e){return{invokeRequest:function(){return Object(re.getEnv)(e).api.director.getRolesWithSpots(e.shopId)},getRole:function(t){return e.items.find(function(e){return e.id===t})}}}),Ee=ae.f.named("VacancyCreateForm").props({data:re.types.optional(re.types.model("Data",{shopId:re.types.maybeNull(re.types.number),roleId:re.types.maybeNull(re.types.number),spotId:re.types.maybeNull(re.types.number),date:re.types.maybeNull(re.types.number),time:re.types.maybeNull(ae.N)}),{}),roles:re.types.maybeNull(he)}).views(function(e){return{get getData(){var t=e.data,n=t.time,r=n.begin,a=n.end,o=le()(t,["time"]);return se()({},o,{time:{begin:r,end:a}})}}}).actions(function(e){return{invokeRequest:function(){return Object(re.getEnv)(e).api.director.createVacancy(e.getData)},afterCreate:function(){e.data.time=ae.N.create(Object(de.f)(e.data.date)),e.roles=he.create({shopId:e.data.shopId})},reset:function(){e.sending=!1,e.data.roleId=null,e.data.spotId=null,e.data.time=ae.N.create(Object(de.f)(e.data.date))},parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t,{403:"Вы не можете создавать вакансии в этом магазине",default:"Не удалось создать вакансию"});return(n.begin||n.end||n["begin or end"])&&(n.time="Неверно указан период"),n.date&&(n.form="Нельзя создать вакансию на эту дату"),n}}}),ge=ae.j.named("VacancyDeleteForm").actions(function(e){return{invokeRequest:function(){return Object(re.getEnv)(e).api.director.deleteVacancy(Object(re.getParent)(e).id)},parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t,{403:"Вы не можете удалять вакансии в этом магазине",404:"Вакансия не найдена либо уже удалена",409:"На вакансию уже назначен работник",default:"Не удалось удалить вакансию"});return Object(re.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n}}}),ve=ae.kb.named("VacancyItem").props({dismissWorkerForm:re.types.optional(pe,function(){return pe.create()})}).views(function(e){return{get canDelete(){return e.status===ae.hb||e.status===ae.ib||(e.status===ae.gb||e.status===ae.jb)&&e.isToday},get canHire(){return[ae.hb,ae.gb,ae.ib].includes(e.status)},get canApprove(){return e.status===ae.fb&&(!e.isBeginApproved||!e.isEndApproved)||e.status===ae.ib},get canDismiss(){return e.status===ae.gb&&!e.isToday}}}).actions(function(e){return{dismissWorker:function(){return e.dismissWorkerForm.request()},afterCreate:function(){e.dismissWorkerForm.vacancyId=e.id}}}),ye=Object(ae.sb)({ItemModel:ve,CreateForm:Ee,DeleteForm:ge}).named("DirectorVacanciesList").props({shopId:re.types.maybeNull(re.types.number),date:re.types.maybeNull(re.types.number)}).views(function(e){return{get dateAsText(){return me.a.unix(e.date).format("dddd, DD MMMM")},get canCreate(){return!me()().isAfter(me.a.unix(e.date+86400))}}}).actions(function(e){var t=e.afterItemDelete;return{invokeRequest:function(){return Object(re.getEnv)(e).api.director.getShopVacanciesByDate(e.shopId,e.date)},afterItemCreate:function(){e.getItems()},afterItemDelete:function(n){t(n),Object(re.getEnv)(e).snackBar.show("Вакансия удалена",{variant:"success"})},setDateAndShopId:function(t){var n=t.date,r=t.shopId;e.date=n,e.shopId=r,e.createForm=Ee.create({data:{shopId:r,date:n}}),e.getItems()}}}),be=re.types.model("VacancyTemplate",{name:re.types.maybeNull(re.types.union(re.types.string,re.types.number))}),ke=ae.I.named("TemplateCreateForm").props({name:re.types.maybeNull(re.types.string),shopId:re.types.maybeNull(re.types.number),date:re.types.maybeNull(re.types.number)}).actions(function(e){return{reset:function(){e.name="",e.sending=!1},invokeRequest:function(){return Object(re.getEnv)(e).api.director.saveTemplate(e.data)},parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t,{default:"Не удалось сохранить шаблон"});return Object(re.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},afterRequest:function(){Object(re.getEnv)(e).snackBar.show("Шаблон успешно сохранен",{variant:"success"})}}}),we=ae.J.named("TemplateDeleteForm").actions(function(e){return{invokeRequest:function(){return Object(re.getEnv)(e).api.director.deleteTemplate({name:Object(re.getParent)(e).name,shopId:Object(re.getParent)(e,3).shopId})}}}),Ie=Object(ae.wb)({CreateForm:ke,DeleteForm:we,ItemModel:be}).named("TemplatesList").props({shopId:re.types.maybeNull(re.types.number)}).actions(function(e){return{invokeRequest:function(){return Object(re.getEnv)(e).api.director.getTemplates(e.shopId)},setShopId:function(t){var n=t.shopId,r=t.date;e.shopId=n,e.createForm.setData({shopId:n,date:r}),e.getItems()}}}),Ce=ae.K.named("TemplateApplyForm").props({date:re.types.maybeNull(re.types.number),shopId:re.types.maybeNull(re.types.number),name:re.types.maybeNull(re.types.string)}).actions(function(e){return{reset:function(){e.name="",e.sending=!1},invokeRequest:function(t){return Object(re.getEnv)(e).api.director.loadTemplate(t)},parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t,{403:"У вас нет доступа",409:"На вакансию уже назначены сотрудники в этот день",default:"Не удалось сохранить шаблон"});return Object(re.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n}}}),Oe=ae.K.named("VacancyWorkersListFilter").props({query:re.types.maybeNull(re.types.string),vacancyId:re.types.maybeNull(re.types.number),workerTypes:re.types.optional(re.types.array(re.types.number),[ae.lb]),shopId:re.types.maybeNull(re.types.number)}).views(function(e){return{get getData(){return se()({},e.data,{workerTypes:e.workerTypes.join(";")})}}}),xe=Object(ae.tb)(ae.mb).named("VacancyWorkersList").props({filter:re.types.optional(Oe,{})}).actions(function(e){return{invokeRequest:function(t,n){return Object(re.getEnv)(e).api.director.getWorkersForVacancy(se()({offset:t,limit:n},e.filter.getData))}}}),Se=n(3),je=n.n(Se),Ne=n(66),De=n.n(Ne),Te=re.types.model("DayRole",{total:re.types.number,exist:re.types.number,roleId:re.types.number,role:ae.W}),Fe=re.types.model("CalendarDay",{date:re.types.number,shopId:re.types.number,roles:re.types.optional(re.types.array(Te),[])}).views(function(e){return{get total(){return e.roles.reduce(function(e,t){return e+t.total},0)},get exist(){return e.roles.reduce(function(e,t){return e+t.exist},0)},get isFilled(){return!e.isEmpty&&e.exist===e.total},get isEmpty(){return!e.roles.length}}}),Ae=Object(ae.ub)(Fe).named("DirectorVacanciesCalendar").props({shopId:re.types.maybeNull(re.types.number),hours:re.types.maybeNull(re.types.number),hoursSelected:re.types.maybeNull(re.types.number),date:re.types.optional(re.types.number,me()().utc().startOf("day").unix()),monthOffset:0}).actions(function(e){return{invokeRequest:function(){return Object(re.getEnv)(e).api.director.getDaysByShop(e.shopId,e.monthOffset)},fillDays:function(t){var n=t.reduce(function(e,t){var n=t.date,r=le()(t,["date"]);return e[n]?se()({},e,je()({},n,[].concat(De()(e[n]),[r]))):se()({},e,je()({},n,[r]))},{}),r=Object.keys(n),a=Object(de.i)(e.monthOffset).filter(function(e){return!r.includes(e)}).map(function(t){return Fe.create({date:t,shopId:e.shopId})});e.items=[].concat(De()(r.map(function(t){return Fe.create({date:parseInt(t),shopId:e.shopId,roles:n[t]})})),De()(a))},mapResponse:function(t){var n=t.date,r=t.days,a=t.hours,o=t.hoursSelected;e.fillDays(r),e.date=n,e.hours=a,e.hoursSelected=o},setShopId:function(t){e.shopId=t,e.getItems()},getDays:e.getItems,changeMonthOffset:function(t){e.monthOffset=t,e.getItems()}}}).views(function(e){return{getDayByDate:function(t){return e.items.find(function(e){return e.date===t})}}}),Re=ae.B.named("SpotDeleteForm").actions(function(e){return{parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t);return Object(re.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},afterRequest:function(){Object(re.getEnv)(e).snackBar.show("Пост удален",{variant:"success"})},invokeRequest:function(){return Object(re.getEnv)(e).api.director.deleteSpot(Object(re.getParent)(e,5).shopId,Object(re.getParent)(e).id)}}}),We=ae.B.named("SpotUpdateForm").props({data:re.types.optional(ae.cb,{})}).actions(function(e){return{parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t);return Object(re.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},invokeRequest:function(){return Object(re.getEnv)(e).api.director.updateSpot(Object(re.getParent)(e,5).shopId,Object(re.getParent)(e).id,{roleId:Object(re.getParent)(e,3).id,name:e.data.name})},afterRequest:function(){Object(re.getEnv)(e).snackBar.show("Пост изменен.",{variant:"success"})}}}),Be=ae.B.named("SpotCreateForm").props({data:re.types.optional(ae.cb,{})}).actions(function(e){return{parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t);return Object(re.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},addCategories:function(t){e.data.categories.push(t)},afterRequest:function(){Object(re.getEnv)(e).snackBar.show("Пост добалвен.",{variant:"success"})},invokeRequest:function(){var t={roleId:Object(re.getParent)(e).id,name:e.data.name};return Object(re.getEnv)(e).api.director.createSpot(Object(re.getParent)(e,3).shopId,t)}}}),Me=ae.bb.named("SpotItem").props({updateForm:re.types.optional(We,{}),deleteForm:re.types.optional(Re,{})}).actions(function(e){return{afterAttach:function(){e.updateForm.data.name=e.name,e.updateForm.data.categories=e.categories}}}),qe=ae.W.props({spots:re.types.array(Me),spotCreateForm:re.types.optional(Be,{})}),Le=Object(ae.ub)(qe).props({shopId:re.types.optional(re.types.number,0),idx:0}).actions(function(e){return{invokeRequest:function(){return Object(re.getEnv)(e).api.director.getRolesWithSpots(e.shopId)},setShopId:function(t){e.shopId=t},handleRoleChange:function(t){e.idx=t}}}),_e=re.types.model({allShops:!1,workerTypes:re.types.optional(re.types.array(re.types.number),ae.pb)}),Ve=ae.B.named("DirectorHolidaysFilter").props({data:re.types.optional(_e,{})}).views(function(e){return{get workerTypesString(){return e.data.workerTypes.join(";")},get workerTypesNames(){return ae.Ab},get workerTypes(){return ae.zb}}}).actions(function(e){return{"сhangeWorkerTypes":function(t){e.data.workerTypes.includes(t)?e.data.workerTypes=e.data.workerTypes.filter(function(e){return e!==t}):e.data.workerTypes.push(t)}}}),Ue=Object(ae.ub)(ae.F).named("DirectorHolidays").props({shopId:re.types.maybeNull(re.types.number),filter:re.types.optional(Ve,{})}).actions(function(e){return{setShopId:function(t){return e.shopId=t}}}).views(function(e){return{invokeRequest:function(){var t=e.shopId,n=e.filter,r=n.workerTypesString,a=n.data.allShops;return Object(re.getEnv)(e).api.director.getHolidays({shopId:t,all:a,workerTypes:r})},get holidays(){return e.items}}}),Ge=ae.B.named("VacancyApproveFormData").props({worker:re.types.maybeNull(ae.mb),data:re.types.optional(re.types.model({vacancyId:re.types.maybeNull(re.types.number),fact:re.types.optional(ae.N,{})}),{})}),ze=Ge.named("VacancyApproveForm").actions(function(e){return{invokeRequest:function(t){var n=t.vacancyId,r=t.fact,a=r.begin,o=r.end;return Object(re.getEnv)(e).api.director.approveVacancy({vacancyId:n,begin:a,end:o,workerId:e.worker?e.worker.id:null})},reset:function(){e.sending=!1},parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t,{default:"Не удалось подтвердить вакансию",404:"Вакансия не найдена",406:"Вакансия еще на завершена",409:"Начало еще не подтверждено"});return Object(re.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},setWorker:function(t){e.worker=t?se()({},t.toJSON()):null}}}),Pe=n(24),He=n.n(Pe),Je=n(52),Ke=n.n(Je),Ye=ae.K.named("VacancyNoAppearanceForm").props({vacancyId:re.types.maybeNull(re.types.number)}).actions(function(e){return{reset:function(){e.setData({vacancyId:e.vacancyId}),e.sending=!1},invokeRequest:function(){var t=Ke()(He.a.mark(function t(){return He.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(re.getEnv)(e).api.director.vacancyNoAppearance(e.vacancyId));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t,{406.1:"Вакансия еще не начата.",406.2:"Вакансия уже подтверждена.",406.3:"Статус вакансии уже был изменен.",default:"Не удалось подтвердить прогул."});return Object(re.getEnv)(e).snackBar.show(n.form,"error"),n},afterRequest:function(){Object(re.getEnv)(e).snackBar.show("Не явка сотрудника подтверждена.",{variant:"success"})}}}),Qe=ae.B.named("WorkersFilter").props({data:re.types.optional(re.types.model("WorkersFilterData",{shopId:0,workerTypes:re.types.optional(re.types.array(re.types.number),ae.pb)}),{})}).views(function(e){return{get workerTypesString(){return e.data.workerTypes.join(";")},get workerTypesNames(){return ae.Ab},get workerTypes(){return ae.zb}}}).actions(function(e){return{"сhangeWorkerTypes":function(t){e.data.workerTypes.includes(t)?e.data.workerTypes=e.data.workerTypes.filter(function(e){return e!==t}):e.data.workerTypes.push(t)}}}),Xe=re.types.model("SummaryItem",{daysCount:0,hoursCount:0}),Ze=re.types.model("Schedules",{vacancies:re.types.optional(re.types.array(ae.kb),[]),trainings:re.types.optional(re.types.array(ae.db),[]),holidays:re.types.optional(re.types.array(ae.F),[])}),$e=ae.kb.named("DismissableVacancy").props({dismissForm:re.types.optional(pe,{})}).actions(function(e){return{afterCreate:function(){e.dismissForm.vacancyId=e.id}}}),et=re.types.model("WorkerSchedulesDay",{date:re.types.number,holiday:re.types.maybeNull(ae.F),vacancy:re.types.maybeNull($e),training:re.types.maybeNull(ae.db)}).views(function(e){return{get isHoliday(){return!!e.holiday},get isTraining(){return!!e.training},get isWork(){return!!e.vacancy},get isEmpty(){return!e.holiday&&!e.training&&!e.vacancy},formatDate:function(){var t;return(t=me.a.unix(e.date)).format.apply(t,arguments)},get dateAsText(){return me.a.unix(e.date).format("dddd, DD MMMM")}}}),tt=re.types.compose(Object(ae.ub)(et),ae.c,Ze).named("WorkerSchedules").props({workerId:re.types.optional(re.types.union(re.types.null,re.types.number,re.types.string),null),current:re.types.optional(Xe,{}),previous:re.types.optional(Xe,{})}).views(function(e){return{getDayByDate:function(t){return e.items.find(function(e){return e.date==t})},get daysList(){return e.items.filter(function(e){return!e.isEmpty})}}}).actions(function(e){var t=function(t){var n=t.vacancies,r=t.trainings,a=t.holidays,o={};e.monthDaysArray.forEach(function(e){return o[e]={date:e}}),n.forEach(function(e){o[e.date].vacancy=e}),r.forEach(function(e){return o[e.date].training=e}),a.forEach(function(e){for(var t in o)me.a.unix(t).isBetween(me.a.unix(Object(de.m)(e.beginAt)-1),me.a.unix(Object(de.g)(e.endAt)))&&(o[t].holiday=e)}),e.items=e.monthDaysArray.map(function(e){return o[e]||{date:e}})};return{getWorkerSchedules:function(t){e.workerId=t,e.getItems()},invokeRequest:function(){return Object(re.getEnv)(e).api.director.getSchedules({workerId:e.workerId,offset:e.monthOffset})},parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t,{409:"Сотрудник уже занят в этот день",406:"Сотрудник не может быть назначен на эту роль"});return Object(re.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n},getSchedules:function(){e.getItems()},fillDays:t,mapResponse:function(n){for(var r in n)e[r]=n[r];t(n)}}}),nt=re.types.compose(ae.nb,Xe,Ze).named("Worker"),rt=Object(ae.ub)(nt).props({filter:re.types.optional(Qe,{})}).actions(function(e){return{invokeRequest:function(){var t=e.filter,n=t.data.shopId,r=t.workerTypesString;return Object(re.getEnv)(e).api.director.getWorkers({shopId:n,workerTypes:r})},setShopId:function(t){e.filter.change("shopId",t)},getShopWorkers:function(t){e.filter.change("shopId",t),e.getItems()}}}),at=ae.kb.named("ResponsibleVacancy").props({responseForm:re.types.optional(oe,{})}).actions(function(e){return{afterCreate:function(){e.responseForm.vacancyId=e.id,e.responseForm.workerId=Object(re.getParent)(e,2).workerId}}}),ot=Object(ae.ub)(at).named("DayVacanciesList").props({shopId:re.types.maybeNull(re.types.number),date:re.types.maybeNull(re.types.number),workerId:re.types.maybeNull(re.types.number)}).actions(function(e){return{getVacancies:function(t){var n=t.shopId,r=t.date,a=t.workerId;e.shopId=n,e.date=r,e.workerId=a,e.getItems()},invokeRequest:function(){var t=e.shopId,n=e.workerId,r=e.date;return Object(re.getEnv)(e).api.director.getWorkerVacancies({shopId:t,workerId:n,date:r})}}}),ct=ae.K.named("HMSFilter").props({query:re.types.maybeNull(re.types.string),categoryId:re.types.maybeNull(re.types.number),productId:re.types.maybeNull(re.types.number),dateRange:re.types.optional(ae.M,{}),statuses:re.types.optional(re.types.array(re.types.union(re.types.number,re.types.string)),[ae.O.STATUS_SALE_NEW,ae.O.STATUS_SALE_CONFLICT])}).actions(function(e){return{onProductChange:function(t){var n=t.categoryId,r=t.productId;e.change("categoryId",n),e.change("productId",r)}}}),st=ae.L.named("HMSDeclineForm").props({id:re.types.maybeNull(re.types.number)}).actions(function(e){return{invokeRequest:function(){return Object(re.getEnv)(e).api.director.declineSale(e.id)},reset:function(){(e={id:e.id}).sending=!1},parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t);return Object(re.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n}}}),it=ae.L.named("HMSUpdateForm").props({id:re.types.maybeNull(re.types.number),amount:0,status:ae.O.STATUS_SALE_NEW,productId:re.types.maybeNull(re.types.number),date:re.types.optional(ae.i,{required:!0})}).preProcessSnapshot(function(e){return se()({},e,{amount:Number(e.amount),status:Number(e.status),productId:e.productId||e.product&&e.product.id||null,date:e.date instanceof Object?e.date:{date:me()(1e3*e.date)}})}).actions(function(e){var t=e.afterRequest;return{reset:function(){e.sending=!1},afterRequest:function(n){t(n),Object(re.getEnv)(e).snackBar.show("Продажа изменена",{variant:"success"})},parseErrors:function(t){return Object(re.getEnv)(e).api.parseErrors(t,{default:"Ошибка сохранения продажи"})},invokeRequest:function(){var t=e.data,n=t.id,r=t.amount,a=t.productId,o=t.date;return Object(re.getEnv)(e).api.director.editHighMarginSale({id:n,amount:r,productId:a,date:o.unix})}}}),lt=ae.O.props({declineForm:re.types.optional(st,{})}).actions(function(e){return{decline:function(){return e.declineForm.request()}}}),ut=Object(ae.wb)({ItemModel:lt,UpdateForm:it}).props({filter:re.types.optional(ct,{})}).actions(function(e){return{invokeRequest:function(t,n){var r=e.filter.data,a=r.dateRange,o=r.statuses,c=le()(r,["dateRange","statuses"]);return Object(re.getEnv)(e).api.director.getShopSales(se()({offset:t,limit:n,statuses:o.join(";")},a,c))}}}),mt=Object(ae.vb)().named("CheckSales").actions(function(e){var t=e.afterRequest;return{invokeRequest:function(){return Object(re.getEnv)(e).api.director.checkSales()},afterRequest:function(n){return n?Object(re.getEnv)(e).snackBar.show("Продажи успешно проверены",{variant:"success"}):Object(re.getEnv)(e).snackBar.show("Обнаружены конфликты личных продаж",{variant:"info"}),t(n)},parseErrors:function(t){var n=Object(re.getEnv)(e).api.parseErrors(t);return Object(re.getEnv)(e).snackBar.show(n.form,{variant:"error"}),n}}}),pt=ae.V.views(function(e){return{get canEdit(){return me()().unix(e.date).isSame(me()(),"month")},get dateAsText(){return me.a.unix(e.date).format("MMMM YYYY")}}}),dt=ae.L.named("RevisionUpdateForm").props({id:re.types.maybeNull(re.types.number),declaredDeficit:re.types.optional(re.types.union(re.types.number,re.types.string),0)}).actions(function(e){return{reset:function(){e.loading=!1},invokeRequest:function(){return Object(re.getEnv)(e).api.director.editRevision(e.data)}}}),ft=Object(ae.wb)({name:"RevisionList",ItemModel:pt,UpdateForm:dt}).named("RevisionList").actions(function(e){return{invokeRequest:function(){return Object(re.getEnv)(e).api.director.getRevision()}}}),ht=n(113),Et=n(731),gt=n(732),vt=n(705),yt=n(59),bt=n(17),kt=n.n(bt),wt=Object(de.c)(kt()(function(e){return{container:{marginBottom:e.spacing(2),marginLeft:e.spacing(.5),marginRight:e.spacing(.5),height:"100%"}}}),te.c)(function(e){var t=e.holiday,n=e.classes;return $.createElement(Et.a,{className:n.container},$.createElement(gt.a,null,$.createElement(vt.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-start"},$.createElement(vt.a,{item:!0},$.createElement(yt.a,{variant:"h6",color:"textPrimary"},t.typeAsText)),$.createElement(vt.a,{item:!0},$.createElement(yt.a,{variant:"h6",color:"textSecondary"},t.statusAsText))),$.createElement(yt.a,{variant:"body1",color:"textSecondary"},t.user.fullName),$.createElement(yt.a,null,t.periodAsText),$.createElement(yt.a,{variant:"body1",color:"textSecondary"},t.text)))}),It=n(723),Ct=n(722),Ot=function(e){var t=e.holiday;return $.createElement(It.a,{key:t.id},$.createElement(Ct.a,null,t.user.fullName),$.createElement(Ct.a,{align:"right"},t.typeAsText),$.createElement(Ct.a,{align:"right"},t.beginAsText),$.createElement(Ct.a,{align:"right"},t.endAsText),$.createElement(Ct.a,{align:"right"},t.text))},xt=n(724),St=n(726),jt=n(725),Nt=function(e){var t=e.holidays;return $.createElement(xt.a,null,$.createElement(jt.a,null,$.createElement(It.a,null,$.createElement(Ct.a,null,"ИМЯ"),$.createElement(Ct.a,{align:"right"},"ТИП"),$.createElement(Ct.a,{align:"right"},"НАЧАЛО"),$.createElement(Ct.a,{align:"right"},"КОНЕЦ"),$.createElement(Ct.a,{align:"right"},"КОММЕНТАРИЙ"))),$.createElement(St.a,null,t.map(function(e){return $.createElement(Ot,{key:e.id,holiday:e})})))},Dt=kt()(function(){return{grid:{width:"100%",margin:0}}})(function(e){var t=e.holidays,n=e.classes;return $.createElement(vt.a,{container:!0,className:n.grid,spacing:2,justify:"space-around"},t.map(function(e){return $.createElement(vt.a,{item:!0,key:e.id,lg:4,md:6,sm:6,xs:12},$.createElement(wt,{holiday:e}))}))}),Tt=n(704),Ft=n(733),At=n(746),Rt=Object(te.c)(function(e){var t=e.onSave,n=e.filter;return $.createElement(ht.o,{onSave:t,onReset:n.reset},$.createElement(Ft.a,{key:"allShops",control:$.createElement(At.a,{value:"allShops"}),label:"Все магазины",checked:n.data.allShops,onChange:function(){return n.change("allShops",!n.data.allShops)}}),n.workerTypes.map(function(e){return $.createElement(Ft.a,{key:e,control:$.createElement(At.a,{value:"".concat(e)}),label:n.workerTypesNames[e],checked:n.data.workerTypes.includes(e),onChange:function(){return n.сhangeWorkerTypes(e)}})}),$.createElement(Tt.a,{variant:"middle"}))}),Wt=(r=Object(ne.c)(Ue,{name:"holidays"}),r(a=Object(te.c)(a=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){this.props.holidays.setShopId(this.props.shop.id),this.props.holidays.getItems()}},{key:"render",value:function(){var e=this.props.holidays,t=e.loading,n=e.items,r=e.getItems,a=e.filter;return $.createElement($.Fragment,null,$.createElement(ht.s,{noWrap:!0,loading:t},$.createElement(ht.k,{variant:"flexGrow",visible:n.length<1&&!t},$.createElement(U.a,{smDown:!0},$.createElement(Nt,{holidays:n})),$.createElement(U.a,{mdUp:!0},$.createElement(Dt,{holidays:n}))),$.createElement(Rt,{title:"Фильтры",onSave:r,filter:a})))}}]),t}($.Component))||a)||a),Bt=n(653),Mt=n(176),qt=n(652),Lt=n(734),_t=n(220),Vt=n(9),Ut=n.n(Vt),Gt=n(661),zt=n.n(Gt),Pt=n(128),Ht=n.n(Pt),Jt=(o=kt()(function(){return{customContainer:{display:"flex",alignItems:"center","& button":{marginLeft:"5px"}}}}),c=Object(ne.c)(ze,{name:"form"}),s=Object(ne.c)(xe,{name:"vacancyWorkers"}),i=Object(ne.c)(Ye,{name:"noAppearanceForm"}),o(l=c(l=s(l=i(l=Object(te.c)((u=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"onSubmit",Ke()(He.a.mark(function e(){var t,r,a;return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.onSuccess,a=t.form,e.next=3,a.request();case 3:e.sent&&r();case 5:case"end":return e.stop()}},e)}))),je()(Ut()(n),"onSelectWorker",function(e){n.props.form.setWorker(e)}),je()(Ut()(n),"onResetWorker",function(){n.props.form.setWorker(null)}),je()(Ut()(n),"onNoApearence",Ke()(He.a.mark(function e(){var t,r,a,o;return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.noAppearanceForm.request,a=t.onSuccess,e.next=3,r();case 3:if(!(o=e.sent)){e.next=7;break}return a(),e.abrupt("return",o);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e)}))),n}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.vacancyWorkers.filter,n=e.form,r=e.noAppearanceForm,a=e.vacancy,o=a.plan,c=a.id,s=a.shop;r.change("vacancyId",c),t.change("vacancyId",c),t.change("shopId",s.id),n.change("vacancyId",c),n.change("fact",{begin:o.begin,end:o.end})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.form,a=t.vacancy,o=t.vacancyWorkers,c=t.noAppearanceForm;return $.createElement($.Fragment,null,$.createElement(qt.a,null,$.createElement(ht.s,{loading:r.sending},$.createElement(yt.a,{variant:"caption"},"Работник"),$.createElement("div",{className:n.customContainer},$.createElement(yt.a,{variant:"body1"},r.worker?r.worker.fullName:a.workerFullName),$.createElement(ht.i,{title:"Изменить работника",closable:!0,loading:o.loading,content:function(t){var n=t.onClose;return $.createElement(ht.F,{workers:o,onClose:n,onSelectWorker:e.onSelectWorker})}},function(e){var t=e.show;return $.createElement(Lt.a,{title:"Изменить работника",placement:"top"},$.createElement(_t.a,{"aria-label":"edit",fontSize:"small",onClick:t},$.createElement(zt.a,{fontSize:"small"})))}),r.worker&&$.createElement(Lt.a,{title:"Отменить изменения",placement:"top"},$.createElement(_t.a,{"aria-label":"edit",fontSize:"small",onClick:this.onResetWorker},$.createElement(Ht.a,{fontSize:"small"})))),$.createElement(yt.a,{variant:"caption"},"Роль"),$.createElement(yt.a,{variant:"body1"},a.role.name),$.createElement(yt.a,{variant:"caption"},"Магазин"),$.createElement(yt.a,{variant:"body1"},a.shop.name),$.createElement(yt.a,{variant:"caption"},"Дата"),$.createElement(yt.a,{variant:"body1"},a.dateAsText),$.createElement(yt.a,{variant:"caption"},"Фактическое время работы"),$.createElement(ht.w,{period:r.data.fact}))),$.createElement(Bt.a,null,$.createElement(ht.f,{title:"Вы уверены?",content:"Сотрудник не явился?",loading:c.sending,onConfirm:this.onNoApearence},function(e){var t=e.show;return $.createElement(Mt.a,{onClick:t},"Не работал")}),$.createElement(Mt.a,{disabled:r.sending,variant:"contained",color:"primary",onClick:this.onSubmit},"Подтвердить")))}}]),t}($.Component),l=u))||l)||l)||l)||l)||l),Kt=kt()(function(){return{row:{"&:hover":{background:"rgba(0,0,0,0.1)"}}}})(function(e){var t=e.worker,n=e.classes,r=e.onClick;return $.createElement(It.a,{className:n.row,onClick:r},$.createElement(Ct.a,null,t.fullName),$.createElement(Ct.a,{align:"right"},t.workerType.typeAsText),$.createElement(Ct.a,{align:"right"},t.vacancies.length>0&&"Работает",t.trainings.length>0&&"Обучается",t.holidays.length>0&&"В отпуске",(t.vacancies.length|t.trainings.length|t.holidays.length)<1&&"Свободен"),$.createElement(Ct.a,{align:"right"},t.daysCount,"д. или ",t.hoursCount,"ч."),$.createElement(Ct.a,{align:"right"},$.createElement("a",{href:"tel:".concat(t.phone)},"+7",t.phone)))}),Yt=n(36),Qt=n.n(Yt),Xt=kt()(function(e){return{root:{border:"1px solid rgba(128,128,128, 0.2)",backgroundColor:"rgba(255,221,0, 0.5)",height:"100%",padding:e.spacing(1)}}})(function(e){var t=e.classes,n=e.children,r=e.className;return $.createElement(Et.a,{className:Qt()(t.root,r)},n||"День пуст")}),Zt=kt()(function(){return{root:{border:"1px solid rgba(128,128,128, 0.2)",backgroundColor:"rgba(255,221,0, 0.5)"}}})(function(e){var t=e.classes,n=e.day,r=n.holiday,a=n.formatDate;return $.createElement(Xt,{className:t.root},$.createElement(yt.a,{variant:"caption"},"Тип"),$.createElement(yt.a,{variant:"body1"},r.typeAsText),$.createElement(yt.a,{variant:"body1"},a("dddd, DD MMMM")),$.createElement(yt.a,{variant:"caption"},"Период"),$.createElement(yt.a,{variant:"body1"},r.periodAsText))}),$t=kt()(function(){return{root:{border:"1px solid rgba(128,128,128, 0.2)",backgroundColor:"rgba(131,170,236, 0.5)"}}})(function(e){var t=e.classes,n=e.day,r=n.training,a=n.formatDate;return $.createElement(Xt,{className:t.root},$.createElement(yt.a,{variant:"body1"},a("dddd, DD MMMM")),$.createElement(yt.a,{variant:"caption"},"Название"),$.createElement(yt.a,{variant:"body1"},r.name),$.createElement(yt.a,{variant:"caption"},"Описание"),$.createElement(yt.a,{variant:"body1"},r.description),$.createElement(yt.a,{variant:"caption"},"Адрес"),$.createElement(yt.a,{variant:"body1"},r.address),$.createElement(yt.a,{variant:"caption"},"Время"),$.createElement(yt.a,{variant:"body1"},r.time.asText))}),en=n(735),tn=n(18),nn=n.n(tn),rn=Object(te.c)(function(e){var t=e.onClose,n=e.workerName,r=e.vacancy,a=r.role,o=r.shop,c=r.spot,s=r.plan,i=r.dismissForm,l=i.request,u=i.sending,m=e.onSuccess,p=function(){var e=Ke()(He.a.mark(function e(){return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:e.sent&&m(),t();case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return $.createElement(ht.s,{noWrap:!0,loading:u},$.createElement(qt.a,null,$.createElement(yt.a,{variant:"body1"},"Вы действительно хотите снять работника ",n,' с вакансии "',a.name,'" ',o.address," ",s.asText),c&&$.createElement($.Fragment,null,$.createElement(yt.a,{variant:"caption"},"Пост"),$.createElement(yt.a,{variant:"body1"},c.name))),$.createElement(Bt.a,null,$.createElement(Mt.a,{variant:"outlined",color:"primary",onClick:t},"Назад"),$.createElement(Mt.a,{variant:"contained",color:"primary",onClick:p},"Ок")))}),an=kt()(function(e){return{root:{border:"1px solid rgba(128,128,128, 0.2)",backgroundColor:"rgba(233,190,149, 0.5)"},area:{padding:e.spacing(1),height:"100%"}}})(function(e){var t=e.classes,n=e.day,r=n.vacancy,a=n.dateAsText,o=e.onSuccess;return $.createElement(ht.i,{content:function(e){return $.createElement(rn,nn()({},e,{vacancy:r,onSuccess:o}))},title:"Рабочий день",subTitle:a},function(e){var n=e.show;return $.createElement(ht.s,{noWrap:!0,loading:r.responding},$.createElement(Xt,{className:t.root},$.createElement(en.a,{className:t.area,onClick:n},$.createElement(yt.a,{variant:"h6"},"Рабочий день"),$.createElement(yt.a,{variant:"body1"},a),$.createElement(yt.a,{variant:"caption"},"Роль"),$.createElement(yt.a,{variant:"body1"},r.role.name),$.createElement(yt.a,{variant:"caption"},"Магазин"),$.createElement(yt.a,{variant:"body1"},r.shop.address),r.spot&&$.createElement($.Fragment,null,$.createElement(yt.a,{variant:"caption"},"Пост"),$.createElement(yt.a,{variant:"body1"},r.spot.name)),$.createElement(yt.a,{variant:"caption"},"Планируемое время работы"),$.createElement(yt.a,{variant:"body1"},r.plan.asText))))})}),on=function(e){var t=e.day,n=e.workerName,r=e.onSuccess;if(t){if(t.isHoliday)return $.createElement(Zt,{day:t});if(t.isTraining)return $.createElement($t,{day:t});if(t.isWork)return $.createElement(an,{day:t,workerName:n,onSuccess:r})}return null},cn=kt()(function(e){return{summaryContainer:{position:"sticky",bottom:0,padding:e.spacing(1),backgroundColor:e.palette.secondary.main,color:"white",width:"100%"},grow:{display:"flex",flexGrow:1},overflow:{overflow:"auto"},monthSlider:{zIndex:2},body:{padding:10,width:"100%",margin:0}}})(m=Object(te.c)(m=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.schedules,r=n.daysList,a=n.monthOffset,o=n.changeMonthOffset,c=n.getSchedules,s=e.classes;return $.createElement($.Fragment,null,$.createElement(ht.t,{fullWidth:!0,variant:"sticky",className:s.monthSlider,monthOffset:a,onChangeOffset:o}),$.createElement("div",{className:s.grow},$.createElement(ht.k,{visible:r.length<1,variant:"flexGrow"},$.createElement(vt.a,{container:!0,className:s.body,spacing:2},r.map(function(e){return $.createElement(vt.a,{item:!0,key:e.date,xs:12,sm:6,md:4,lg:3},$.createElement(on,{day:e,workerName:t,onSuccess:c}))})))))}}]),t}($.Component))||m)||m,sn=n(736),ln=Object(ne.c)(ot,{name:"vacancies"})(p=kt()(function(){return{card:{width:"calc(100% - 10px)",margin:5}}})(p=Object(te.c)(p=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"getOnclickHandler",function(e){return Ke()(He.a.mark(function t(){return He.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.responseForm.request();case 2:t.sent&&n.props.onSuccess();case 4:case"end":return t.stop()}},t)}))}),n}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.workerId,n=e.date,r=e.shopId;this.props.vacancies.getVacancies({workerId:t,date:n,shopId:r})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.vacancies,a=r.items,o=r.loading;return $.createElement(ht.s,{noWrap:!0,loading:o},$.createElement(ht.k,{visible:a.length<1,emptyText:"Нет свободных вакансий",variant:"flexGrow"},a.map(function(t){return $.createElement(ht.s,{key:t.id,loading:t.responseForm.sending},$.createElement(Et.a,{className:n.card},$.createElement(sn.a,{onClick:e.getOnclickHandler(t)},$.createElement(gt.a,null,$.createElement(yt.a,{variant:"subtitle1"},t.role.name),$.createElement(yt.a,{variant:"subtitle2"},t.shop.address),t.spot&&$.createElement(yt.a,{variant:"subtitle2"},t.spot.name),$.createElement(yt.a,{variant:"subtitle2"},t.plan.asText)))))})))}}]),t}($.Component))||p)||p)||p,un=function(e){var t=e.date,n=e.day,r=e.workerName,a=e.workerId,o=e.shopId,c=e.getSchedules;return n?$.createElement(ht.j,{wrapBody:!1,title:"Назначить на вакансию",subTitle:"".concat(r," (").concat(n.dateAsText,")"),body:$.createElement(ln,{workerId:a,shopId:o,date:n.date,onSuccess:c})},function(e){var r=e.show;return $.createElement(ht.z.EmptyDay,{onClick:r,date:t,day:n})}):$.createElement(ht.z.EmptyDay,{date:t})},mn=Object(de.c)(kt()(function(){return{root:{border:"1px solid rgba(128,128,128, 0.2)",backgroundColor:"rgba(233,190,149, 0.5)"}}}),te.c)(function(e){var t=e.classes,n=e.date,r=e.day,a=e.workerName,o=e.getSchedules;return $.createElement(ht.i,{content:function(e){return $.createElement(rn,nn()({},e,{vacancy:r.vacancy,workerName:a,onSuccess:o}))},title:"Снять с вакансии",subTitle:n.format("dddd, DD MMMM")},function(e){var a=e.show;return $.createElement(ht.s,{noWrap:!0,loading:r.vacancy.dismissForm.sending},$.createElement(ht.z.WorkDay,{className:t.root,onClick:a,date:n,day:r}))})}),pn=Object(ne.c)(tt,{name:"schedules"})(d=kt()(function(){return{container:{flexGrow:1,overflow:"hidden"},body:{height:"100%",width:"100%",overflow:"auto",display:"flex",flexDirection:"column"}}})(d=Object(te.c)(d=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"state",{list:!1}),je()(Ut()(n),"changeView",function(){n.setState({list:!n.state.list})}),n}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){this.props.schedules.getWorkerSchedules(this.props.workerId)}},{key:"render",value:function(){var e=this.state.list,t=this.props,n=t.classes,r=t.workerName,a=t.schedules,o=t.shopId,c=t.workerId,s=a.loading,i=a.errors,l=a.getSchedules,u={workerName:r,shopId:o,workerId:c,getSchedules:l};return $.createElement($.Fragment,null,$.createElement("div",{className:n.container},$.createElement("div",{className:n.body},$.createElement(ht.s,{noWrap:!0,loading:s},$.createElement(ht.m,{visible:!1,message:i?i.form:"",onRetry:l},e?$.createElement(cn,{schedules:a}):$.createElement(ht.z,nn()({model:a},{EmptyDayComponent:un,WorkDayComponent:mn},{dayProps:u})),$.createElement(fn,null),$.createElement(En,{schedules:a}))))),$.createElement(ht.n,{color:"primary",icon:e?"calendar":"list",onClick:this.changeView}))}}]),t}($.Component))||d)||d)||d,dn=Object(te.c)(function(e){var t=e.children,n=e.worker,r=e.shopId;return $.createElement(ht.j,{title:"График работы",subTitle:n.name,wrapBody:!1,body:$.createElement(pn,{shopId:r,workerName:n.name,workerId:n.id})},function(e){var n=e.show;return t({onClick:n})})}),fn=kt()(function(e){return{helpItem:{padding:e.spacing(1)},helpBox:{width:e.spacing(2.5),height:e.spacing(2.5),marginRight:e.spacing(1),border:"1px solid gray"},work:{backgroundColor:"rgba(233,190,149, 0.5)"},free:{backgroundColor:"transparent"},holiday:{backgroundColor:"rgba(255,221,0, 0.5)"},training:{backgroundColor:"rgba(131,170,236, 0.5)"}}})(function(e){var t=e.classes,n=e.className;return $.createElement(vt.a,{container:!0,className:n},$.createElement(vt.a,{item:!0,className:t.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Qt()(t.helpBox,t.work)}),$.createElement(yt.a,null,"- рабочий день"))),$.createElement(vt.a,{item:!0,className:t.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Qt()(t.helpBox,t.holiday)}),$.createElement(yt.a,null,"- выходной"))),$.createElement(vt.a,{item:!0,className:t.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Qt()(t.helpBox,t.training)}),$.createElement(yt.a,null,"- обучение"))),$.createElement(vt.a,{item:!0,className:t.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Qt()(t.helpBox,t.free)}),$.createElement(yt.a,null,"- свободный день"))))}),hn=n(152),En=kt()(function(e){return{summaryContainer:{position:"sticky",bottom:0,padding:e.spacing(1),backgroundColor:e.palette.secondary.main,color:"white",width:"100%"}}})(function(e){var t=e.classes,n=e.schedules,r=n.current,a=n.previous;return $.createElement(hn.a,{square:!0,className:t.summaryContainer},$.createElement(yt.a,{color:"inherit",variant:"h6"},"Информация о месяце"),$.createElement(vt.a,{container:!0,direction:"column"},$.createElement(vt.a,{item:!0},!!r&&$.createElement(yt.a,{color:"inherit"},"Отработано в текущем месяце: ".concat(r.daysCount," дн. (").concat(r.hoursCount,"ч.)"))),$.createElement(vt.a,{item:!0},!!a&&$.createElement(yt.a,{color:"inherit"},"Отработано в прошлом месяце: ".concat(a.daysCount," дн. (").concat(a.hoursCount,"ч.)"))),$.createElement(vt.a,{item:!0})))}),gn=Object(de.c)(kt()(function(){return{table:{maxHeight:"100%"},tableBody:{overflow:"auto"}}}),te.c)(function(e){var t=e.classes,n=e.workers,r=e.shopId;return $.createElement(xt.a,{className:t.table},$.createElement(jt.a,null,$.createElement(It.a,null,$.createElement(Ct.a,null,"ИМЯ"),$.createElement(Ct.a,{align:"right"},"ТИП"),$.createElement(Ct.a,{align:"right"},"СЕГОДНЯ"),$.createElement(Ct.a,{align:"right"},"ОТРАБОТАНО"),$.createElement(Ct.a,{align:"right"},"ТЕЛЕФОН"))),$.createElement(St.a,{className:t.tableBody},n.map(function(e){return $.createElement(dn,{key:e.id,worker:e,shopId:r},function(t){var n=t.onClick;return $.createElement(Kt,{worker:e,onClick:n})})})))}),vn=Object(de.c)(kt()(function(e){return{container:{marginBottom:e.spacing(2),marginLeft:e.spacing(.5),marginRight:e.spacing(.5),height:"100%"},cardRoot:{position:"relative",height:"100%",marginTop:e.spacing(1)},padding:{padding:e.spacing(1),paddingRight:e.spacing(.1666)}}}),te.c)(function(e){var t=e.worker,n=t.typeAsText,r=t.phone,a=t.fullName,o=e.classes,c=e.onClick;return $.createElement(Et.a,{className:o.cardRoot},$.createElement(en.a,{className:o.padding,onClick:c},$.createElement(vt.a,{container:!0},$.createElement(vt.a,{item:!0,xs:6},$.createElement(yt.a,null,a)),$.createElement(vt.a,{item:!0,xs:6},$.createElement(vt.a,{item:!0},$.createElement(yt.a,null,n)),$.createElement(vt.a,{item:!0},$.createElement(yt.a,null,$.createElement("a",{href:"tel:".concat(r),onClick:function(e){return e.stopPropagation()}},"+7",r)))))))}),yn=Object(te.c)(function(e){var t=e.workers,n=e.shopId;return t.map(function(e){return $.createElement(dn,{key:e.id,worker:e,shopId:n},function(t){var n=t.onClick;return $.createElement(vn,{key:e.id,worker:e,onClick:n})})})}),bn=Object(de.c)(kt()(function(){return{closeButton:{position:"absolute",top:0,right:0},name:{wordBreak:"break-word"}}}),te.c)(function(e){var t=e.workers,n=e.shopId;return $.createElement($.Fragment,null,$.createElement(U.a,{xsDown:!0,implementation:"css"},$.createElement(gn,{workers:t,shopId:n})),$.createElement(U.a,{smUp:!0,implementation:"css"},$.createElement(yn,{workers:t,shopId:n})))}),kn=Object(te.c)(function(e){var t=e.onSave,n=e.filter;return $.createElement(ht.o,{onSave:t,onReset:n.reset},$.createElement(ht.B,{fullWidth:!0,key:"shopId",name:"shopId",value:n.data.shopId,label:"Магазин",onChange:function(e,t){return n.change("shopId",Number(t.key))}}),n.workerTypes.map(function(e){return $.createElement(Ft.a,{key:e,control:$.createElement(At.a,{value:"".concat(e),color:"primary"}),label:n.workerTypesNames[e],checked:n.data.workerTypes.includes(e),onChange:function(){return n.сhangeWorkerTypes(e)}})}),$.createElement(Tt.a,{variant:"middle"}))}),wn=kt()(function(e){return{container:{overflow:"auto",paddingBottom:e.spacing(1)}}})(f=Object(ne.c)(rt,{name:"workersList"})(f=Object(te.c)(f=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){this.props.workersList.getShopWorkers(this.props.shop.id)}},{key:"componentWillUnmount",value:function(){this.props.onClose()}},{key:"render",value:function(){var e=this.props,t=e.workersList,n=t.getItems,r=t.loading,a=t.items,o=t.filter,c=e.classes,s=e.shop.id;return $.createElement(ht.s,{noWrap:!0,loading:r},$.createElement(ht.k,{variant:"flexGrow",visible:a.length<1&&!r},$.createElement("div",{className:c.container},$.createElement(bn,{workers:a,shopId:s}))),$.createElement(kn,{onSave:n,filter:o}))}}]),t}($.Component))||f)||f)||f,In=Object(de.c)(Object(ne.c)(Ae,{name:"calendar"}),kt()(function(e){return{header:{padding:e.spacing(1)}}}),Object(te.b)("store"),te.c)(function(e){var t=e.store.app.user.shop,n=e.calendar,r=e.classes;return $.createElement($.Fragment,null,$.createElement("div",{className:r.header},$.createElement(yt.a,{variant:"h5"},t.name),$.createElement(yt.a,{variant:"caption"},t.address),$.createElement(Tt.a,null),$.createElement(ht.j,{title:"Посты",subTitle:t.address,wrapBody:!1,body:$.createElement(er,{shop:t})},function(e){var t=e.show;return $.createElement(Mt.a,{variant:"contained",color:"primary",size:"small",onClick:t},"Управление постами")}),$.createElement(ht.j,{title:"Отпуска и больничные",subTitle:t.address,wrapBody:!1,body:$.createElement(Wt,{shop:t})},function(e){var t=e.show;return $.createElement(Mt.a,{variant:"contained",color:"primary",size:"small",onClick:t},"Отпуска и больничные")}),$.createElement(ht.j,{title:"Список сотрудников",subTitle:t.address,wrapBody:!1,body:$.createElement(wn,{shop:t,onClose:n.getDays})},function(e){var t=e.show;return $.createElement(Mt.a,{variant:"contained",color:"primary",size:"small",onClick:t},"Список работников")}),$.createElement(ht.j,{title:"Отчет ВМТ",subTitle:t.address,wrapBody:!1,body:$.createElement(Un,{shop:t})},function(e){var t=e.show;return $.createElement(Mt.a,{variant:"contained",color:"primary",size:"small",onClick:t},"Отчет ВМТ")}),$.createElement(ht.j,{title:"Недостача",subTitle:t.address,wrapBody:!1,body:$.createElement(_r,{shop:t})},function(e){var t=e.show;return $.createElement(Mt.a,{variant:"contained",color:"primary",size:"small",onClick:t},"Недостача")})),$.createElement(Fr,{shopId:t.id,calendar:n}))}),Cn=n(371),On=kt()(function(e){return{padding:{paddingTop:e.spacing(2)}}})(h=Object(te.c)(h=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"onSubmit",function(){var e=Ke()(He.a.mark(function e(t){var r,a,o;return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,a=r.sale,o=r.onClose,t.preventDefault(),e.next=4,a.updateForm.request();case 4:e.sent&&o();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),je()(Ut()(n),"onChange",function(e,t){n.props.sale.updateForm.change("productId",t?t.id:null)}),je()(Ut()(n),"onChangeNumber",function(e){n.props.sale.updateForm.changeNumber(e.target.name,e.target.value)}),je()(Ut()(n),"onChangeDate",function(e){n.props.sale.updateForm.change("date",e)}),n}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.sale.updateForm;return $.createElement($.Fragment,null,$.createElement(qt.a,null,$.createElement("form",{id:"HMS_EDIT_FORM_ID",onSubmit:this.onSubmit},$.createElement(vt.a,{container:!0}),$.createElement(vt.a,{item:!0,className:t.padding},$.createElement(ht.x,{error:n.errors.productId,name:"productId",productId:n.productId,onChange:this.onChange})),$.createElement(vt.a,{item:!0,className:t.padding},$.createElement(Cn.a,{error:!!n.errors.amount,helperText:n.errors.amount,fullWidth:!0,label:"Количество",variant:"outlined",name:"amount",onChange:this.onChangeNumber,type:"number",value:n.data.amount.toString()})),$.createElement(ht.h,{date:n.date,errors:n.errors,onChange:this.onChange}))),$.createElement(Bt.a,null,$.createElement(Mt.a,{type:"submit",variant:"contained",color:"primary",form:"HMS_EDIT_FORM_ID"},"Сохранить")))}}]),t}($.Component))||h)||h,xn=Object(te.c)(E=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.sale;return $.createElement(ht.i,{title:"Редактирование продажи",subTitle:n.worker.fullName,loading:n.updateForm.sending,content:function(e){var t=e.onClose;return $.createElement(On,{sale:n,onClose:t})}},function(e){var n=e.show;return t({onClick:n})})}}]),t}($.Component))||E,Sn=n(663),jn=n.n(Sn),Nn=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props.sale;return"Отклонить отчет о продаже  №".concat(e.id,"?")}}]),t}($.Component),Dn=Object(te.c)(g=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props.sale;return $.createElement(ht.f,{title:"Отклонение отчета продажи",subTitle:"№".concat(e.id),loading:e.declineForm.sending,onConfirm:e.decline,content:$.createElement(Nn,{sale:e})},function(e){var t=e.show;return $.createElement(Lt.a,{title:"Отклонить продажу",placement:"top-start"},$.createElement(_t.a,{onClick:t},$.createElement(jn.a,null)))})}}]),t}($.Component))||g,Tn=Object(de.c)(kt()(function(){return{row:{"&:hover":{background:"rgba(0,0,0,0.1)"}},controllsCell:{minWidth:128}}}),te.c)(function(e){var t=e.sale,n=e.classes,r=e.className;return $.createElement(It.a,{className:Qt()(r,n.row)},$.createElement(Ct.a,null,t.worker.fullName),$.createElement(Ct.a,null,t.product.name," (",t.product.productId,")"),$.createElement(Ct.a,null,t.amount," шт."),$.createElement(Ct.a,null,t.dateAsText),$.createElement(Ct.a,null,t.createdAtAsText),$.createElement(Ct.a,{className:n.controllsCell,align:"right"},$.createElement(xn,{sale:t},function(e){var t=e.onClick;return $.createElement(Lt.a,{title:"Редактирование продажи",placement:"top-start"},$.createElement(_t.a,{onClick:t},$.createElement(zt.a,null)))}),$.createElement(Dn,{sale:t})))}),Fn=Object(te.c)(function(e){var t=e.sales,n=e.classNames,r=void 0===n?{}:n,a=e.rowClassNames;return $.createElement(xt.a,null,$.createElement(jt.a,null,$.createElement(It.a,null,$.createElement(Ct.a,null,"Сотрудник"),$.createElement(Ct.a,null,"Товар"),$.createElement(Ct.a,null,"Количество"),$.createElement(Ct.a,null,"Время продажи"),$.createElement(Ct.a,null,"Отчет создан"),$.createElement(Ct.a,{align:"right"},"Действия"))),$.createElement(St.a,null,t.map(function(e){return $.createElement(Tn,{key:e.id,className:r[a[e.status]],sale:e})})))}),An=n(737),Rn=Object(de.c)(kt()(function(e){return{container:{marginBottom:e.spacing(2),marginLeft:e.spacing(.5),marginRight:e.spacing(.5),height:"100%"},cardRoot:{position:"relative",marginTop:e.spacing(1)},actionArea:{cursor:"pointer",padding:e.spacing(1),paddingRight:e.spacing(.1666),":hover":{background:"rgba(0,0,0,0.1)"}}}}),te.c)(function(e){var t=e.sale,n=e.classes,r=e.className;return $.createElement(xn,{sale:t},function(e){var a=e.onClick;return $.createElement(Et.a,{className:Qt()(r,n.cardRoot)},$.createElement($.Fragment,null,$.createElement(An.a,{action:$.createElement($.Fragment,null,$.createElement(xn,{sale:t},function(e){var t=e.onClick;return $.createElement(Lt.a,{title:"Редактирование продажи",placement:"top-start"},$.createElement(_t.a,{onClick:t},$.createElement(zt.a,null)))}),$.createElement(_t.a,{onClick:t.decline},$.createElement(Ht.a,null))),subheader:t.worker.fullName}),$.createElement(en.a,{onClick:a,className:n.actionArea},$.createElement(vt.a,{container:!0},$.createElement(vt.a,{item:!0,xs:12},$.createElement(yt.a,null,$.createElement("b",null,t.product.name," (",t.product.productId,")"))),$.createElement(vt.a,{item:!0,xs:6},$.createElement(yt.a,{color:"textSecondary"},t.amount,"шт.")),$.createElement(vt.a,{item:!0,xs:6},$.createElement(yt.a,{color:"textSecondary"},t.dateAsText))))))})}),Wn=Object(te.c)(function(e){var t=e.sales,n=e.classNames,r=void 0===n?{}:n,a=e.rowClassNames;return t.map(function(e){return $.createElement(Rn,{key:e.id,className:r[a[e.status]],sale:e})})}),Bn=(v={},je()(v,ae.O.STATUS_SALE_REFUSED,"refusedRow"),je()(v,ae.O.STATUS_SALE_CONFLICT,"conflictRow"),je()(v,ae.O.STATUS_SALE_CONFIRMED,"confirmedRow"),v),Mn=Object(de.c)(kt()(function(e){var t;return t={},je()(t,Bn[ae.O.STATUS_SALE_REFUSED],{background:e.palette.error.main}),je()(t,Bn[ae.O.STATUS_SALE_CONFLICT],{background:e.palette.caution.main}),je()(t,Bn[ae.O.STATUS_SALE_CONFIRMED],{background:e.palette.success.main}),je()(t,"flex",{display:"flex",flexDirection:"column",flexGrow:1,overflow:"auto",width:"100%"}),je()(t,"hidden",{width:"100%"}),t}),te.c)(function(e){var t=e.sales,n=t.getItems,r=t.items,a=t.loadingMore,o=e.classes,c=o.hidden,s=o.flex,i=le()(o,["hidden","flex"]),l=le()(e,["sales","classes"]);return $.createElement(ht.r,{className:s,threshold:1e3,onReachedBottom:n},$.createElement(U.a,{className:c,xsDown:!0,implementation:"css"},$.createElement(Fn,se()({sales:r,rowClassNames:Bn,classNames:i},l))),$.createElement(U.a,{className:c,smUp:!0,implementation:"css"},$.createElement(Wn,se()({sales:r,rowClassNames:Bn,classNames:i},l))),$.createElement(ht.s,{variant:"single",noWrap:!0,loading:a}))}),qn=Object(de.c)(kt()(function(e){return{container:{width:"100%",padding:"0 ".concat(e.spacing(2),"px"),maxHeight:"20%"}}}),te.c)(function(e){var t=e.classes,n=e.filter;return ee.a.createElement("div",{className:t.container},ee.a.createElement(vt.a,{container:!0,spacing:2},ee.a.createElement(vt.a,{item:!0,xs:12},ee.a.createElement(ht.g,{dateRange:n.dateRange,clearable:!0,clearLabel:"Сброс",cancelLabel:"Назад",variant:"dialog",margin:"normal",disableFuture:!0,orientation:"landscape",inputVariant:"outlined"})),ee.a.createElement(vt.a,{item:!0,xs:12},ee.a.createElement(ht.p,{name:"statuses",value:n.statuses.toJS(),onChange:function(e){n.change(e.target.name,e.target.value)}})),ee.a.createElement(vt.a,{item:!0,xs:12},ee.a.createElement(Cn.a,{margin:"normal",name:"query",variant:"outlined",placeholder:"ФИО",fullWidth:!0,value:n.query||"",onChange:function(e){return n.change("query",e.target.value)}})),ee.a.createElement(vt.a,{item:!0,xs:12},ee.a.createElement(ht.y,{withCategory:!0,data:n.data,onChange:n.onProductChange}))))}),Ln=function(e){var t=e.onSave,n=e.filter;return $.createElement(ht.o,{onSave:t,onReset:n.reset},$.createElement(qn,{filter:n}))},_n=n(738),Vn=Object(te.c)((k=b=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"onSubmit",function(){var e=Ke()(He.a.mark(function e(t){var r,a,o,c;return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=n.props,a=r.onClose,o=r.refreshItems,c=r.checkSales.request,e.next=4,c();case 4:o(),a();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props.onClose;return $.createElement($.Fragment,null,$.createElement(qt.a,null,$.createElement("form",{id:"CONFIRM_SALES_DIALOG",onSubmit:this.onSubmit},$.createElement(_n.a,null,"Сверить отчеты о продажах с данными из чекККМ ?"))),$.createElement(Bt.a,null,$.createElement(Mt.a,{color:"secondary",variant:"text",type:"submit",onClick:e},"Отмена"),$.createElement(Mt.a,{color:"primary",variant:"contained",type:"submit",form:"CONFIRM_SALES_DIALOG",autoFocus:!0},"Подтвердить")))}}]),t}($.Component),je()(b,"defaultProps",{onClose:function(){}}),y=k))||y,Un=Object(ne.c)(ut,{name:"sales"})(w=Object(ne.c)(mt,{name:"checkSales"})(w=Object(te.c)(w=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){var e=Ke()(He.a.mark(function e(){return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.sales.getItems();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.shop,n=e.sales,r=e.checkSales,a=n.items,o=n.loading,c=n.filter,s=n.forceGetItems;return $.createElement($.Fragment,null,$.createElement(ht.i,{title:"Подтверждение продаж",loading:r.loading,content:function(e){var t=e.onClose;return $.createElement(Vn,{checkSales:r,refreshItems:n.forceGetItems,onClose:t})}},function(e){var t=e.show;return $.createElement(Mt.a,{color:"primary",variant:"contained",onClick:t},"Подтвердить продажи")}),$.createElement(ht.s,{flexRoot:!0,noWrap:!0,loading:o},$.createElement(ht.k,{variant:"flexGrow",visible:a.length<1&&!o},$.createElement(Mn,{sales:n,shopId:t.id}))),$.createElement(Ln,{filter:c,onSave:s}))}}]),t}($.Component))||w)||w)||w,Gn=n(744),zn=n(721),Pn=n(268),Hn=n.n(Pn),Jn=kt()(function(){return{text:{marginTop:15,flexGrow:0},content:{display:"flex",flexDirection:"column"},actions:{flexWrap:"wrap"}}})(I=Object(te.c)(I=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"onSave",Ke()(He.a.mark(function e(){return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.spot.updateForm.request();case 2:e.sent&&(n.props.getItems(),n.props.onClose());case 4:case"end":return e.stop()}},e)}))),je()(Ut()(n),"changeName",function(e){n.props.spot.updateForm.change("name",e.target.value)}),n}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.spot.updateForm,n=t.data.name,r=t.sending,a=e.classes,o=e.onClose;return $.createElement($.Fragment,null,$.createElement(qt.a,{className:a.content},$.createElement(ht.s,{loading:r},$.createElement(Cn.a,{label:"Название поста",className:a.text,onChange:this.changeName,fullWidth:!0,value:n,variant:"outlined"}),$.createElement(ht.k,{visible:!0,variant:"flexGrow"},$.createElement(vt.a,null,[])))),$.createElement(Bt.a,null,$.createElement(Mt.a,{onClick:o},"Назад"),$.createElement(Mt.a,{variant:"contained",color:"primary",onClick:this.onSave},"Сохранить")))}}]),t}($.Component))||I)||I,Kn=kt()(function(e){return{closeButton:{position:"absolute",top:0,right:0},cardRoot:{position:"relative",padding:e.spacing(1),paddingRight:e.spacing(.1666),height:"100%"},name:{wordBreak:"break-word"}}})(C=Object(te.c)(C=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"onDeleteConfirm",Ke()(He.a.mark(function e(){return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.spot.deleteForm.request();case 2:e.sent&&n.props.getItems();case 4:case"end":return e.stop()}},e)}))),n}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.spot,n=e.classes,r=e.getItems;return $.createElement(ht.s,{loading:t.deleteForm.sending},$.createElement(Et.a,{className:n.cardRoot},$.createElement(ht.i,{title:"Изменить пост",content:function(e){return $.createElement(Jn,nn()({spot:t},e,{getItems:r}))}},function(e){var r=e.show;return $.createElement(en.a,{onClick:r},$.createElement(yt.a,{className:n.name,variant:"subtitle1"},t.name))}),$.createElement(ht.f,{onConfirm:this.onDeleteConfirm,title:"Удаление",content:$.createElement(yt.a,{variant:"subtitle1",className:n.name},"Вы действительно хотите удалить этот пост?")},function(e){var t=e.show;return $.createElement(_t.a,{className:n.closeButton,onClick:t},$.createElement(Ht.a,null))})))}}]),t}($.Component))||C)||C,Yn=Object(te.c)(function(e){var t=e.spots,n=e.getItems;return $.createElement(vt.a,{container:!0,spacing:2},t.map(function(e){return $.createElement(vt.a,{key:e.id,item:!0,xs:12},$.createElement(Kn,{spot:e,getItems:n}))}))}),Qn=kt()(function(){return{cell:{wordBreak:"break-word",width:"80%"},button:{margin:0,padding:3}}})(O=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"onDeleteConfirm",Ke()(He.a.mark(function e(){return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.spot.deleteForm.request();case 2:e.sent&&n.props.getItems();case 4:case"end":return e.stop()}},e)}))),n}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.spot,r=e.getItems;return $.createElement(It.a,null,$.createElement(Ct.a,null," ",n.id),$.createElement(Ct.a,{className:t.cell},n.name),$.createElement(Ct.a,null,$.createElement(vt.a,{container:!0,direction:"column"},$.createElement(vt.a,{item:!0},$.createElement(ht.i,{title:"Изменить пост",content:function(e){return $.createElement(Jn,nn()({spot:n},e,{getItems:r}))}},function(e){var n=e.show;return $.createElement(Mt.a,{color:"primary",className:t.button,onClick:n},"Изменить")})),$.createElement(vt.a,{item:!0},$.createElement(ht.f,{title:"Удалить?",onConfirm:this.onDeleteConfirm,openLabel:"Удалить",content:$.createElement(yt.a,null,'Вы действительно хотите удалить пост "'.concat(n.name,'"?'))},function(e){var t=e.show;return $.createElement(Mt.a,{color:"primary",onClick:t},"Удалить")})))))}}]),t}($.Component))||O,Xn=Object(te.c)(function(e){var t=e.spots,n=e.getItems;return $.createElement(xt.a,null,$.createElement(jt.a,null,$.createElement(It.a,null,$.createElement(Ct.a,null," id"),$.createElement(Ct.a,null," Название"),$.createElement(Ct.a,null," "))),$.createElement(St.a,null,t.map(function(e){return $.createElement(Qn,{key:e.id,spot:e,getItems:n})})))}),Zn=Object(te.c)(function(e){var t=e.spots,n=e.getItems;return $.createElement(ht.s,{noWrap:!0,loading:!1},$.createElement(ht.k,{visible:t.length<1,emptyText:"Нет постов",variant:"absolute"},$.createElement(U.a,{xsDown:!0},$.createElement(Xn,{spots:t,getItems:n})),$.createElement(U.a,{smUp:!0},$.createElement(Yn,{spots:t,getItems:n}))))}),$n=kt()(function(){return{text:{marginTop:15,flexGrow:0},content:{display:"flex",flexDirection:"column"},actions:{flexWrap:"wrap"}}})(x=Object(te.c)(x=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"onSave",Ke()(He.a.mark(function e(){return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.role.spotCreateForm.request();case 2:e.sent&&(n.props.getItems(),n.props.onClose());case 4:case"end":return e.stop()}},e)}))),je()(Ut()(n),"changeName",function(e){n.props.role.spotCreateForm.change("name",e.target.value)}),n}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.role.spotCreateForm,n=t.data.name,r=t.sending,a=e.classes,o=e.onClose;return $.createElement($.Fragment,null,$.createElement(qt.a,{className:a.content},$.createElement(ht.s,{loading:r},$.createElement(Cn.a,{label:"Название поста",className:a.text,onChange:this.changeName,fullWidth:!0,value:n,variant:"outlined"}),$.createElement(ht.k,{visible:!0,variant:"flexGrow"},$.createElement(vt.a,null,[])))),$.createElement(Bt.a,null,$.createElement(Mt.a,{onClick:o},"Назад"),$.createElement(Mt.a,{variant:"contained",color:"primary",onClick:this.onSave},"Создать")))}}]),t}($.Component))||x)||x,er=kt()(function(e){return{swipeableSlide:je()({},e.breakpoints.down("md"),{display:"flex",alignItems:"flex-start",padding:10})}})(S=Object(ne.c)(Le,{name:"spotsList"})(S=Object(te.c)(S=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"handleChange",function(e,t){n.props.spotsList.handleRoleChange(t)}),n}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){this.props.spotsList.setShopId(this.props.shop.id),this.props.spotsList.getItems()}},{key:"render",value:function(){var e=this.props,t=e.spotsList,n=t.loading,r=t.items,a=t.getItems,o=t.handleRoleChange,c=t.idx,s=e.classes;return $.createElement(ht.s,{noWrap:!0,variant:"flexGrow",loading:n},$.createElement(ht.k,{variant:"flexGrow",visible:r.length<1&&!n,emptyText:"Нет ролей для создания постов."},$.createElement(hn.a,null,$.createElement(Gn.a,{value:c,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},r.map(function(e,t){var n=e.id,r=e.name;return $.createElement(zn.a,{key:n,value:t,label:r})}))),$.createElement(Hn.a,{index:c,onChangeIndex:o,style:{flexGrow:1,position:"relative",display:"flex",flexDirection:"column"},containerStyle:{height:"100%",paddingTop:2},slideClassName:s.swipeableSlide},r.map(function(e){var t=e.id,n=e.spots;return $.createElement(Zn,{key:t,value:t,spots:n,getItems:a})}))),r.length>1&&$.createElement(ht.i,{title:"Новый пост",subTitle:r[c].name,content:function(e){return $.createElement($n,nn()({getItems:a,role:r[c]},e))}},function(e){var t=e.show;return $.createElement(ht.n,{onClick:t,color:"primary"})}))}}]),t}($.Component))||S)||S)||S,tr=n(713),nr=n(265),rr=n.n(nr),ar=n(647),or=n(655),cr=n(712),sr=n(657),ir=n(649),lr=Object(te.c)(j=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"onChangeRole",function(e){var t=n.props.form.change;t("roleId",parseInt(e.target.value,10)),t("spotId",null)}),je()(Ut()(n),"onSave",Ke()(He.a.mark(function e(){return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.form.request();case 2:e.sent&&n.props.onSuccess();case 4:case"end":return e.stop()}},e)}))),n}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){this.props.form.roles.getItems()}},{key:"render",value:function(){var e=this.props.form,t=e.roles,n=e.data,r=e.change,a=e.sending,o=e.errors,c=t.getRole(n.roleId);return $.createElement($.Fragment,null,$.createElement(qt.a,null,o.form&&$.createElement(ir.a,{error:!0},o.form),$.createElement(ar.a,{fullWidth:!0,margin:"normal"},$.createElement(sr.a,{htmlFor:"roleId"},"Роль"),$.createElement(or.a,{value:n.roleId||"",onChange:this.onChangeRole},t.items.map(function(e){return $.createElement(cr.a,{key:e.id,value:e.id},e.name)})),o.roleId&&$.createElement(ir.a,{error:!0},o.roleId)),c&&$.createElement(ar.a,{fullWidth:!0,margin:"normal"},$.createElement(sr.a,{htmlFor:"spotId",disabled:!c.spots.length},"Пост"),$.createElement(or.a,{value:n.spotId||"",onChange:function(e){return r("spotId",parseInt(e.target.value,10))}},$.createElement(cr.a,{key:"",value:""},c.spots.length>0?"Не выбрано":"Нет постов для роли"),c.spots.map(function(e){return $.createElement(cr.a,{key:e.id,value:e.id},e.name)}))),$.createElement(ar.a,{fullWidth:!0,margin:"normal"},$.createElement(ht.w,{fullWidth:!0,period:n.time}),o.time&&$.createElement(ir.a,{error:!0},o.time))),$.createElement(Bt.a,null,$.createElement(Mt.a,{disabled:a||t.loading||n.time.hasErrors,variant:"contained",color:"primary",onClick:this.onSave},"Создать")))}}]),t}($.Component))||j,ur=Object(de.q)("TEMPLATE_CREATE_FROM"),mr=Object(te.c)(N=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"onSubmit",function(){var e=Ke()(He.a.mark(function e(t){var r,a,o,c,s;return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=n.props,a=r.onClose,o=r.onSuccess,c=r.form,e.next=4,c.request();case 4:if(!(s=e.sent)){e.next=9;break}return o(),a(),e.abrupt("return",s);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),je()(Ut()(n),"onChange",function(e){n.props.form.change(e.target.name,e.target.value)}),n}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props.form,t=e.sending,n=e.errors;return $.createElement($.Fragment,null,$.createElement(qt.a,null,$.createElement(yt.a,null,"Записать вакансии текущего дня в шаблон (сможете создавать копии этого дня.)"),$.createElement("form",{id:ur,onSubmit:this.onSubmit},$.createElement(Cn.a,{label:"Название шаблона",error:n.form&&!!n.form.name,helperText:n.form&&n.form.name,name:"name",type:"text",margin:"normal",variant:"outlined",fullWidth:!0,onChange:this.onChange}))),$.createElement(Bt.a,null,$.createElement(Mt.a,{disabled:t,variant:"contained",color:"primary",type:"submit",form:ur},"Создать")))}}]),t}($.Component))||N,pr=Object(te.c)(D=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.templates.createForm,n=e.onSuccess;return $.createElement(ht.i,{title:"Создание шаблона",subtitle:"Создание шаблона вакансий из этого дня",loading:t.sending,content:function(e){var r=e.onClose;return $.createElement(mr,{form:t,onSuccess:n,onClose:r})}},function(e){var t=e.show;return $.createElement(Mt.a,{variant:"outlined",color:"primary",onClick:t},"Создать шаблон")})}}]),t}($.Component))||D,dr=n(711),fr=n(650),hr=n(739),Er=n(707),gr=n(719),vr=Object(te.c)(T=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"loadTemplate",function(){var e=Ke()(He.a.mark(function e(t){var r,a,o,c;return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,a=r.form,o=r.onClose,c=r.onSuccess,a.change("name",t.toString()),e.next=4,a.request();case 4:e.sent&&(c(),o());case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.templates,r=n.items,a=n.loading,o=t.form;return $.createElement(qt.a,null,$.createElement(ht.k,{visible:!r.length&&!a,variant:"flexGrow"},o.errors&&o.errors.date&&$.createElement(ir.a,{error:!0},o.errors.date),$.createElement(dr.a,null,r.map(function(t){return $.createElement(fr.a,{button:!0,key:t,onClick:function(){return e.loadTemplate(t.name)}},$.createElement(gr.a,{primary:t.name}),t.deleteForm.sending?$.createElement(Er.a,{size:20}):$.createElement(hr.a,null,$.createElement(_t.a,{edge:"end","aria-label":"delete",onClick:t.delete},$.createElement(jn.a,null))))}))))}}]),t}($.Component))||T,yr=Object(ne.c)(Ce,{name:"form"})(F=Object(te.c)(F=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.form,n=e.shopId,r=e.date;t.setData({date:r,shopId:n})}},{key:"render",value:function(){var e=this.props,t=e.templates,n=e.form,r=le()(e,["templates","form"]);return $.createElement(ht.i,{title:"Список шаблонов",loading:t.loading||n.sending||t.createForm.sending,content:function(e){var a=e.onClose;return $.createElement(vr,nn()({templates:t,form:n,onClose:a},r))}},function(e){var t=e.show;return $.createElement(Mt.a,{variant:"outlined",color:"primary",onClick:t},"Список шаблонов")})}}]),t}($.Component))||F)||F,br=kt()(function(){return{spot:{wordBreak:"break-word"},actions:{minWidth:150}}})(A=Object(te.c)(A=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.vacancies,n=e.classes,r=e.ActionsComponent;return $.createElement(xt.a,null,$.createElement(jt.a,null,$.createElement(It.a,null,$.createElement(Ct.a,null,"ID"),$.createElement(Ct.a,null,"Статус"),$.createElement(Ct.a,null,"Дата"),$.createElement(Ct.a,null,"Время"),$.createElement(Ct.a,null,"Роль"),$.createElement(Ct.a,null,"Пост"),$.createElement(Ct.a,null,"Работник"),$.createElement(Ct.a,null,"Действия"))),$.createElement(St.a,null,t.map(function(e){return $.createElement(It.a,{key:e.id},$.createElement(Ct.a,null,e.id),$.createElement(Ct.a,null,e.statusAsText),$.createElement(Ct.a,null,e.dateAsText),$.createElement(Ct.a,null,$.createElement(yt.a,null,"Запланировано: ".concat(e.plan.asText)),e.fact.notEmpty&&$.createElement(yt.a,null,"Фактическое: ".concat(e.fact.asText))),$.createElement(Ct.a,null,e.role.name),$.createElement(Ct.a,{className:n.spot},e.spot?e.spot.name:"-"),$.createElement(Ct.a,null,e.user?e.user.fullName:"-"),$.createElement(Ct.a,{className:n.actions},$.createElement(r,{vacancy:e})))})))}}]),t}($.Component))||A)||A,kr=Object(te.c)(R=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.vacancies,n=e.classes,r=e.ActionsComponent;return t.map(function(e){return $.createElement(Et.a,{key:e.id,className:n.card},$.createElement(gt.a,null,$.createElement(vt.a,{container:!0,justify:"space-between",alignItems:"center"},$.createElement(vt.a,null,$.createElement(yt.a,{variant:"subtitle1"},e.role.name)),$.createElement(vt.a,null,$.createElement(yt.a,null,e.statusAsText))),$.createElement(yt.a,null,"Запланировано: ".concat(e.plan.asText)),$.createElement(yt.a,null,"Фактически: ".concat(e.fact.notEmpty?e.fact.asText:"Не указано")),e.spot&&$.createElement(yt.a,{className:n.spot},"Пост: ".concat(e.spot.name)),$.createElement(yt.a,null,e.user?e.user.fullName:"Никто не назначен")),$.createElement(sn.a,null,$.createElement(r,{vacancy:e})))})}}]),t}($.Component))||R,wr=kt()(function(e){return{card:{marginBottom:e.spacing(1)},spot:{wordBreak:"break-word"}}})(kr),Ir=n(676),Cr=n.n(Ir),Or=n(677),xr=n.n(Or),Sr=n(269),jr=n.n(Sr),Nr=Object(ne.c)(xe,{name:"vacancyWorkers"})(W=Object(ne.c)(oe,{name:"hireForm"})(W=Object(te.c)(W=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"onSelectWorker",function(){var e=Ke()(He.a.mark(function e(t){var r,a,o;return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,a=r.hireForm,o=r.onHireSuccess,a.change("workerId",t.id),e.next=4,a.request();case 4:e.sent&&o();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),je()(Ut()(n),"onApproveSuccess",function(e){e(),n.props.onApproveSuccess()}),je()(Ut()(n),"onDismissWorker",function(){var e=Ke()(He.a.mark(function e(t){return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dismissWorker();case 2:e.sent&&n.props.onDismissWorkerSuccess();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.vacancyWorkers.filter,n=e.vacancy,r=n.id,a=n.shop;e.hireForm.change("vacancyId",r),t.change("vacancyId",r),t.change("shopId",a.id)}},{key:"render",value:function(){var e=this,t=this.props,n=t.vacancy,r=t.vacancyWorkers,a=t.hireForm;return $.createElement(ht.s,{loading:a.sending||n.deleteForm.sending||n.dismissWorkerForm.sending},n.canHire&&$.createElement(ht.i,{title:"Назначить работника",closable:!0,content:function(t){var n=t.onClose;return $.createElement(ht.F,{workers:r,onSelectWorker:e.onSelectWorker,onClose:n})}},function(e){var t=e.show;return $.createElement(Lt.a,{title:"Назначить работника",placement:"top"},$.createElement(_t.a,{onClick:t},$.createElement(Cr.a,{fontSize:"small"})))}),n.canDelete&&$.createElement(Lt.a,{title:"Удалить",placement:"top"},$.createElement(_t.a,{onClick:n.delete},$.createElement(jn.a,{fontSize:"small"}))),n.canDismiss&&$.createElement(Lt.a,{title:"Снять работника",placement:"top"},$.createElement(_t.a,{onClick:function(){return e.onDismissWorker(n)}},$.createElement(xr.a,{fontSize:"small"}))),n.canApprove&&$.createElement(ht.i,{title:"Подтвердить время работы",closable:!0,content:function(t){var r=t.onClose;return $.createElement(Jt,{vacancy:n,onSuccess:function(){return e.onApproveSuccess(r)}})}},function(e){var t=e.show;return $.createElement(Lt.a,{title:"Подтвердить время работы",placement:"top"},$.createElement(_t.a,{onClick:t},$.createElement(jr.a,{fontSize:"small"})))}))}}]),t}($.Component))||W)||W)||W,Dr=kt()(function(e){return{fab:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)}}})(B=Object(ne.c)(Ie,{name:"templates"})(B=Object(ne.c)(ye,{name:"vacancies"})(B=Object(te.c)(B=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"renderActions",function(e){var t=e.vacancy;return $.createElement(Nr,{onHireSuccess:n.props.vacancies.getItems,onDismissWorkerSuccess:n.props.vacancies.getItems,onApproveSuccess:n.props.vacancies.getItems,vacancy:t})}),n}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.templates,n=e.date,r=e.shopId;e.vacancies.setDateAndShopId({date:n,shopId:r}),t.setShopId({date:n,shopId:r})}},{key:"render",value:function(){var e=this.props,t=e.date,n=e.shopId,r=e.vacancies,a=e.classes,o=e.templates,c=r.items,s=r.loading,i=r.createForm,l=r.dateAsText,u=r.canCreate,m={vacancies:c,ActionsComponent:this.renderActions};return $.createElement($.Fragment,null,$.createElement("div",null,!!c.length&&$.createElement(pr,{templates:o,date:t,subTitle:l,shopId:n,onSuccess:o.forceGetItems}),r.canCreate&&$.createElement(yr,{templates:o,date:t,subTitle:l,shopId:n,onSuccess:r.getItems})),$.createElement(ht.s,{loading:s},$.createElement(U.a,{mdDown:!0},$.createElement(br,m)),$.createElement(U.a,{lgUp:!0},$.createElement(wr,m)),u&&$.createElement(ht.i,{title:"Создание вакансии",subTitle:l,loading:i.sending||i.roles.loading,content:function(e){var t=e.onClose;return $.createElement(lr,{form:i,onSuccess:t})}},function(e){var t=e.show;return $.createElement(tr.a,{size:"small",color:"primary",className:a.fab,onClick:t},$.createElement(rr.a,null))})))}}]),t}($.Component))||B)||B)||B)||B,Tr=kt()(function(){return{empty:{background:"rgba(233,190,149, 0.5)"},filled:{background:"rgba(11,243,131, 0.5)"},notFilled:{background:"rgba(255,221,0, 0.5)"},old:{background:"rgba(131,170,236, 0.5)"}}})(function(e){var t=e.date,n=e.day,r=e.classes,a=e.onCloseVacanciesList;return $.createElement(ht.j,{onClose:a,subTitle:t.format("DD, MMMM (dddd)"),title:"Список вакансий",wrapBody:!1,body:n&&$.createElement(Dr,{date:n.date,shopId:n.shopId})},function(e){var a,o=e.show,c=me()().isAfter(t,"day"),s=Qt()(je()({},r.old,c),r.empty);if(!n)return $.createElement(ht.c.DefaultItem,{date:t,className:s,onClick:o},$.createElement(U.a,{only:"xs"},$.createElement(yt.a,null,"Вакансий нет")));var i=Qt()(s,(a={},je()(a,r.filled,n.isFilled),je()(a,r.notFilled,!n.isFilled&&!n.isEmpty),je()(a,r.empty,n.isEmpty),a));return $.createElement(ht.c.DefaultItem,{date:t,className:i,onClick:o},$.createElement(U.a,{only:"xs"},n.isEmpty?$.createElement(yt.a,null,"Вакансий нет"):n.roles.map(function(e){var t=e.role,n=e.total,r=e.exist;return $.createElement("div",{key:t.id},$.createElement(yt.a,null,"".concat(t.name," ").concat(r,"/").concat(n)))})))})}),Fr=kt()(function(e){return{helpContainer:{marginBottom:90},helpItem:{padding:e.spacing(1)},helpBox:{width:e.spacing(2.5),height:e.spacing(2.5),marginRight:e.spacing(1),border:"1px solid gray"},empty:{backgroundColor:"rgba(233,190,149, 0.5)"},filled:{backgroundColor:"rgba(11,243,131, 0.5)"},notFilled:{backgroundColor:"rgba(255,221,0, 0.5)"},old:{backgroundColor:"rgba(131,170,236, 0.5)"},summaryContainer:je()({position:"fixed",bottom:0,padding:e.spacing(1),backgroundColor:e.palette.secondary.main,color:"white",width:"100%"},e.breakpoints.up("md"),{width:"calc(100% - ".concat(e.drawer.width,"px)")})}})(M=Object(te.c)(M=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"getDays",function(){n.props.calendar.setShopId(n.props.shopId)}),je()(Ut()(n),"renderItem",function(e){var t=n.props.calendar.getDayByDate(e.unix());return $.createElement(Tr,{date:e,day:t,onCloseVacanciesList:n.props.calendar.getDays})}),n}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){this.getDays()}},{key:"render",value:function(){var e=this.props,t=e.calendar,n=e.classes,r=t.loading,a=t.error,o=t.changeMonthOffset,c=t.monthOffset;return $.createElement($.Fragment,null,$.createElement(ht.s,{loading:r},$.createElement(ht.m,{visible:a,message:"Не удалось загрузить календарь",onRetry:this.getDays},$.createElement(ht.c,{monthOffset:c,onChangeOffset:o,renderItem:this.renderItem}),$.createElement(vt.a,{container:!0,className:n.helpContainer},$.createElement(vt.a,{item:!0,className:n.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Qt()(n.helpBox,n.empty)}),$.createElement(yt.a,null,"- без вакансий"))),$.createElement(vt.a,{item:!0,className:n.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Qt()(n.helpBox,n.filled)}),$.createElement(yt.a,null,"- на все вакансии назначены работники"))),$.createElement(vt.a,{item:!0,className:n.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center"},$.createElement("div",{className:Qt()(n.helpBox,n.notFilled)}),$.createElement(yt.a,null,"- необходимо назначить сотрудников на свободные вакансии"))),$.createElement(vt.a,{item:!0,className:n.helpItem},$.createElement(vt.a,{container:!0,alignItems:"center",direction:"row"},$.createElement("div",{className:Qt()(n.helpBox,n.old)}),$.createElement(yt.a,null,"- завершенный день")))))))}}]),t}($.Component))||M)||M,Ar=Object(te.c)(q=function(e){function t(){var e,n;z()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=K()(this,(e=Q()(t)).call.apply(e,[this].concat(a))),je()(Ut()(n),"onSubmit",function(){var e=Ke()(He.a.mark(function e(t){var r,a,o;return He.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,a=r.revision,o=r.onClose,t.preventDefault(),e.next=4,a.updateForm.request();case 4:e.sent&&o();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),je()(Ut()(n),"onChangeDecimal",function(e){n.props.revision.updateForm.changeDecimal(e.target.name,e.target.value)}),n}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props.revision.updateForm;return $.createElement($.Fragment,null,$.createElement(qt.a,null,$.createElement("form",{id:"REVISION_UPDATE_FORM_ID",onSubmit:this.onSubmit},$.createElement(Cn.a,{error:!!e.errors.declaredDeficit,helperText:e.errors.declaredDeficit,fullWidth:!0,label:"Заявленная недостача",variant:"outlined",name:"declaredDeficit",onChange:this.onChangeDecimal,value:e.declaredDeficit.toString()}))),$.createElement(Bt.a,null,$.createElement(Mt.a,{type:"submit",variant:"contained",color:"primary",form:"REVISION_UPDATE_FORM_ID"},"Сохранить")))}}]),t}($.Component))||q,Rr=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.revision,n=e.children;return $.createElement(ht.i,{title:"Заявить сумму ревизии",content:function(e){return $.createElement(Ar,nn()({revision:t},e))}},function(e){var t=e.show;return n({show:t})})}}]),t}($.Component),Wr=kt()(function(){return{cell:{wordBreak:"break-word",width:"80%"},button:{margin:0,padding:0}}})(L=Object(te.c)(L=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.revision;return $.createElement(It.a,null,$.createElement(Ct.a,null,n.id),$.createElement(Ct.a,null,n.dateAsText),$.createElement(Ct.a,null,n.declaredDeficit.toFixed(2)," руб."),$.createElement(Ct.a,null,n.revisionDeficit.toFixed(2)," руб."),$.createElement(Ct.a,null,n.cashDifference.toFixed(2)," руб."),$.createElement(Ct.a,null,$.createElement(vt.a,{container:!0},$.createElement(vt.a,{item:!0},n.active&&$.createElement(Rr,{revision:n},function(e){var n=e.show;return $.createElement(Mt.a,{color:"primary",className:t.button,onClick:n},"Заявить Недостачу")})))))}}]),t}($.Component))||L)||L,Br=Object(te.c)(function(e){var t=e.revisions,n=e.getItems;return $.createElement(xt.a,null,$.createElement(jt.a,null,$.createElement(It.a,null,$.createElement(Ct.a,null,"id"),$.createElement(Ct.a,null,"Месяц"),$.createElement(Ct.a,null,"Заявленная недостача"),$.createElement(Ct.a,null,"Недостача по ревизии"),$.createElement(Ct.a,null,"Разница ОКС"),$.createElement(Ct.a,null,"Изменить"))),$.createElement(St.a,null,t.map(function(e){return $.createElement(Wr,{key:e.id,revision:e,getItems:n})})))}),Mr=kt()(function(e){return{cardRoot:{position:"relative",padding:e.spacing(1),paddingRight:e.spacing(.1666),height:"100%"}}})(_=Object(te.c)(_=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"render",value:function(){var e=this.props,t=e.revision,n=e.classes;return $.createElement(ht.s,{loading:t.updateForm.sending},$.createElement(An.a,{title:t.dateAsText,action:$.createElement(Rr,{revision:t},function(e){var t=e.show;return $.createElement(_t.a,{color:"primary",onClick:t},$.createElement(zt.a,null))})}),$.createElement(Et.a,{className:n.cardRoot},$.createElement(vt.a,{container:!0},$.createElement(vt.a,{item:!0,xs:12},$.createElement(vt.a,{container:!0},$.createElement(vt.a,{item:!0},$.createElement(yt.a,{color:"secondary"},"Заявленная сумма недостачи :")),$.createElement(vt.a,{item:!0},$.createElement(yt.a,{color:"main"},t.declaredDeficit," руб.")))))))}}]),t}($.Component))||_)||_,qr=Object(te.c)(function(e){var t=e.revisions;return $.createElement(vt.a,{container:!0,spacing:2},t.map(function(e){return $.createElement(vt.a,{key:e.id,item:!0,xs:12},$.createElement(Mr,{revision:e}))}))}),Lr=Object(te.c)(function(e){var t=e.revisions;return $.createElement($.Fragment,null,$.createElement(U.a,{smDown:!0},$.createElement(Br,{revisions:t})),$.createElement(U.a,{mdUp:!0},$.createElement(qr,{revisions:t})))}),_r=Object(ne.c)(ft,{name:"revision"})(V=Object(te.c)(V=function(e){function t(){return z()(this,t),K()(this,Q()(t).apply(this,arguments))}return Z()(t,e),H()(t,[{key:"componentDidMount",value:function(){this.props.revision.getItems()}},{key:"render",value:function(){var e=this.props.revision,t=e.loading,n=e.items;return $.createElement(ht.s,{noWrap:!0,variant:"flexGrow",loading:t},$.createElement(ht.k,{variant:"flexGrow",visible:n.length<1&&!t,emptyText:"Нет информации по недостаче."},$.createElement(Lr,{revisions:n})))}}]),t}($.Component))||V)||V;n.d(t,"c",function(){return Wt}),n.d(t,"g",function(){return Jt}),n.d(t,"h",function(){return wn}),n.d(t,"a",function(){return In}),n.d(t,"b",function(){return Un}),n.d(t,"e",function(){return er}),n.d(t,"f",function(){return Fr}),n.d(t,"d",function(){return _r}),n.d(t,"e",function(){return er})}}]);