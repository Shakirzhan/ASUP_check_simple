(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{390:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(767);n.default=function(){return r.createElement(a.c,null)}},764:function(e,n,t){"use strict";var r=t(1),a=t(38),c=a.L.named("TrainingAcceptForm").props({id:r.types.maybeNull(r.types.number)}).actions(function(e){var n=e.afterRequest;return{reset:function(){e.setData({id:e.id}),e.sending=!1},invokeRequest:function(){return Object(r.getEnv)(e).api.trainings.acceptTraining(e.id)},parseErrors:function(n){var t=Object(r.getEnv)(e).api.parseErrors(n,{409.1:"Вы работаете в этот день",409.2:"Вы уже записались на это обучение",404:"Тест не найден",default:"Не удалось записаться на обучение"});return Object(r.getEnv)(e).snackBar.show(t.form,{variant:"error"}),t},afterRequest:function(t){Object(r.getParent)(e).typeHMS||Object(r.getEnv)(e).snackBar.show("Вы подтвердили желание принять участие в обучении.",{variant:"success"}),n(t)}}}),i=a.L.named("TrainingConfirmForm").props({id:r.types.maybeNull(r.types.number)}).actions(function(e){var n=e.afterRequest;return{reset:function(){e.setData({id:e.id}),e.sending=!1},afterRequest:function(t){!e.typeHMS&&Object(r.getEnv)(e).snackBar.show("Вы подтвердили прохождение обучения.",{variant:"success"}),n(t)},invokeRequest:function(){return Object(r.getEnv)(e).api.trainings.confirmTraining(e.id)},parseErrors:function(n){var t=Object(r.getEnv)(e).api.parseErrors(n,{default:"Не удалось подтвердить обучение"});return Object(r.getEnv)(e).snackBar.show(t.form,{variant:"error"}),t}}}),o=Object(a.rb)({ItemModel:a.db}).props({confirmForm:r.types.optional(i,{}),acceptForm:r.types.optional(c,{})}).actions(function(e){var n=e.afterItemUpdate;return{afterItemUpdate:function(t){n(t),e.confirmForm.setData(t),e.acceptForm.setData(t)},accept:function(){var n;return(n=e.acceptForm).request.apply(n,arguments)},confirm:function(){var n;return(n=e.confirmForm).request.apply(n,arguments)}}}),l=t(3),u=t.n(l),s=t(32),m=t.n(s)()({},a.qb,u()({},a.t,o)),p=Object(a.xb)({eventEntityModelByType:m}),f=a.z.props({entity:r.types.union({dispatcher:p})}).named("MainEvent");t.d(n,"b",function(){return o}),t.d(n,"a",function(){return f})},767:function(e,n,t){"use strict";var r,a=t(749),c=t(10),i=t.n(c),o=t(12),l=t.n(o),u=t(13),s=t.n(u),m=t(14),p=t.n(m),f=t(9),d=t.n(f),g=t(15),E=t.n(g),b=t(3),v=t.n(b),y=t(0),h=t(20),k=t(113),j=t(35),O=t(724),w=t(726),x=t(725),S=t(723),T=t(722),M=t(59),A=t(176),H=t(18),q=t.n(H),F=t(24),C=t.n(F),L=t(52),R=t.n(L),P=t(21),B=t.n(P),D=Object(h.c)(function(e){var n=e.training,t=n.acceptForm.sending,r=n.accept,a=e.onAccept,c=void 0===a?function(){}:a,i=e.children,o=B()(e,["training","onAccept","children"]);return y.createElement(k.f,q()({title:"Принять участие",dialogProps:{loading:t},onConfirm:R()(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:if(!e.sent){e.next=6;break}return c(),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e)})),content:y.createElement(M.a,null,"Вы действительно хотите посетить это обучение?")},o),i&&i)}),I=Object(h.c)(function(e){var n=e.training,t=n.confirmForm.sending,r=n.confirm,a=e.onConfirm,c=void 0===a?function(){}:a,i=e.children,o=B()(e,["training","onConfirm","children"]);return y.createElement(k.f,q()({title:"Завершить обучение",openLabel:"Прошел обучение",dialogProps:{loading:t},onConfirm:R()(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:if(!e.sent){e.next=6;break}return c(),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e)})),content:y.createElement(M.a,null,"Вы действительно прошли это обучение?")},o),i&&i)}),N=Object(h.c)(function(e){var n=e.training;return y.createElement(S.a,null,y.createElement(T.a,null,n.id),y.createElement(T.a,null,n.name),y.createElement(T.a,null,n.typeHMS?y.createElement(A.a,{variant:"text",color:"primary",onClick:n.accept,href:n.description,target:"_blank"},"Открыть обучение"):n.description),y.createElement(T.a,null,!n.typeHMS&&n.dateAsText),y.createElement(T.a,null,!n.typeHMS&&n.address),y.createElement(T.a,null,n.userTraining&&n.userTraining.statusPassed?y.createElement(M.a,{color:"textSecondary"},"Обучение пройдено"):n.typeHMS?y.createElement(I,{training:n,openLabel:"Завершить обучение",content:y.createElement(M.a,null,'Вы действительно прошли обучение "',n.name,'"?')}):n.userTraining&&n.userTraining.statusWaiting?y.createElement(M.a,{color:"textSecondary"},"Вы записаны на обучение"):y.createElement(D,{training:n,title:"Подтверждение",openLabel:"Принять участие",content:y.createElement(M.a,null,'Вы действительно хотите посетить обучение "',n.name,'"?')})))}),U=function(e){var n=e.trainings,t=e.onAccept;return y.createElement(O.a,null,y.createElement(x.a,null,y.createElement(S.a,null,y.createElement(T.a,null,"id"),y.createElement(T.a,null,"Название"),y.createElement(T.a,null,"Описание"),y.createElement(T.a,null,"Дата"),y.createElement(T.a,null,"Адрес"),y.createElement(T.a,null,"Статус"))),y.createElement(w.a,null,n.map(function(e){return y.createElement(N,{key:e.id,training:e,onAccept:t})})))},W=t(705),J=t(731),_=t(735),z=t(732),G=t(17),K=t.n(G),Q=t(30),V=Object(Q.c)(K()(function(e){return{container:{marginBottom:e.spacing(2),marginLeft:e.spacing(.5),marginRight:e.spacing(.5)},subtitle:{whiteSpace:"nowrap"}}}),h.c)(function(e){var n=e.training,t=e.classes;return y.createElement(J.a,{className:t.container},y.createElement(_.a,null,y.createElement(z.a,null,y.createElement(M.a,{variant:"h6",color:"textPrimary"},n.name),y.createElement(M.a,{variant:"body1",color:"textSecondary",className:t.subtitle},!n.typeHMS&&n.description),y.createElement(M.a,null,!n.typeHMS&&"Дата: ".concat(n.dateAsText)),y.createElement(M.a,null,!n.typeHMS&&"Адрес: ".concat(n.address)),y.createElement(W.a,{container:!0},y.createElement(W.a,{item:!0},n.typeHMS&&y.createElement(A.a,{variant:"contained",color:"primary",onClick:function(e){n.accept(),e.stopPropagation()},href:n.description,target:"_blank"},"Открыть обучение")),y.createElement(W.a,{item:!0},n.userTraining&&n.userTraining.statusPassed?y.createElement(M.a,{color:"textSecondary"},y.createElement("span",null,"Обучение пройдено")):n.typeHMS?y.createElement(I,{training:n,openLabel:"Завершить обучение",content:y.createElement(M.a,null,'Вы действительно прошли обучение "'.concat(n.name,'"?'))}):n.userTraining&&n.userTraining.statusWaiting?y.createElement(M.a,{color:"textSecondary"},"Вы записаны на обучение"):y.createElement(D,{training:n,openLabel:"Принять участие",content:y.createElement(M.a,null,'Вы действительно хотите посетить обучение "'.concat(n.name,'"?'))}))))))}),X=function(e){var n=e.trainings,t=e.onAccept;return y.createElement(W.a,{container:!0},n.map(function(e){return y.createElement(W.a,{item:!0,key:e.id,xs:12,lg:4,md:6,sm:12},y.createElement(V,{training:e,onAccept:t}))}))},Y=t(1),Z=t(38),$=t(764),ee=Object(Z.ub)($.b).named("Trainings").actions(function(e){return{invokeRequest:function(){return Object(Y.getEnv)(e).api.trainings.getTrainings()}}}),ne=Object(j.c)(ee,{name:"trainings"})(r=Object(h.c)(r=function(e){function n(){var e,t;i()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return t=s()(this,(e=p()(n)).call.apply(e,[this].concat(a))),v()(d()(t),"onAccept",function(){t.props.trainings.getItems()}),t}return E()(n,e),l()(n,[{key:"componentDidMount",value:function(){this.props.trainings.getItems()}},{key:"render",value:function(){var e=this.props.trainings,n=e.items,t=e.loading,r={trainings:n,onAccept:this.onAccept};return y.createElement(k.s,{noWrap:!0,variant:"fixed",loading:t},y.createElement(k.k,{variant:"absolute",visible:n.length<1&&!t},y.createElement(a.a,{smDown:!0},y.createElement(U,r)),y.createElement(a.a,{mdUp:!0},y.createElement(X,r))))}}]),n}(y.Component))||r)||r;t.d(n,"c",function(){return ne}),t.d(n,"a",function(){return D}),t.d(n,"b",function(){return I})}}]);